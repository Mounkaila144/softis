var Qf=Object.defineProperty;var Kf=(t,e,n)=>e in t?Qf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var zt=(t,e,n)=>Kf(t,typeof e!="symbol"?e+"":e,n);import{r as Wf,g as as,R as Bt,a as U,j as o,L as we,N as vc,m as Q,A as nn,u as Sh,O as Yf,b as pn,c as ri,d as Ch,B as Xf,e as Jf,f as Ge}from"./vendor-rZuCylbC.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Ph,_c=Wf;Ph=_c.createRoot,_c.hydrateRoot;var Zf=typeof Element<"u",ep=typeof Map=="function",tp=typeof Set=="function",np=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Hs(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,s;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!Hs(t[r],e[r]))return!1;return!0}var i;if(ep&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;for(i=t.entries();!(r=i.next()).done;)if(!Hs(r.value[1],e.get(r.value[0])))return!1;return!0}if(tp&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(np&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;if(Zf&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((s[r]==="_owner"||s[r]==="__v"||s[r]==="__o")&&t.$$typeof)&&!Hs(t[s[r]],e[s[r]]))return!1;return!0}return t!==t&&e!==e}var rp=function(e,n){try{return Hs(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const sp=as(rp);var ip=function(t,e,n,r,s,i,a,c){if(!t){var u;if(e===void 0)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var h=[n,r,s,i,a,c],m=0;u=new Error(e.replace(/%s/g,function(){return h[m++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}},op=ip;const Ec=as(op);var ap=function(e,n,r,s){var i=r?r.call(s,e,n):void 0;if(i!==void 0)return!!i;if(e===n)return!0;if(typeof e!="object"||!e||typeof n!="object"||!n)return!1;var a=Object.keys(e),c=Object.keys(n);if(a.length!==c.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(n),h=0;h<a.length;h++){var m=a[h];if(!u(m))return!1;var f=e[m],g=n[m];if(i=r?r.call(s,f,g,m):void 0,i===!1||i===void 0&&f!==g)return!1}return!0};const lp=as(ap);var Rh=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(Rh||{}),po={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},Nc=Object.values(Rh),Ia={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},cp=Object.entries(Ia).reduce((t,[e,n])=>(t[n]=e,t),{}),Nt="data-rh",Qn={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Kn=(t,e)=>{for(let n=t.length-1;n>=0;n-=1){const r=t[n];if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}return null},up=t=>{let e=Kn(t,"title");const n=Kn(t,Qn.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),n&&e)return n.replace(/%s/g,()=>e);const r=Kn(t,Qn.DEFAULT_TITLE);return e||r||void 0},hp=t=>Kn(t,Qn.ON_CHANGE_CLIENT_STATE)||(()=>{}),go=(t,e)=>e.filter(n=>typeof n[t]<"u").map(n=>n[t]).reduce((n,r)=>({...n,...r}),{}),dp=(t,e)=>e.filter(n=>typeof n.base<"u").map(n=>n.base).reverse().reduce((n,r)=>{if(!n.length){const s=Object.keys(r);for(let i=0;i<s.length;i+=1){const c=s[i].toLowerCase();if(t.indexOf(c)!==-1&&r[c])return n.concat(r)}}return n},[]),mp=t=>console&&typeof console.warn=="function"&&console.warn(t),Dr=(t,e,n)=>{const r={};return n.filter(s=>Array.isArray(s[t])?!0:(typeof s[t]<"u"&&mp(`Helmet: ${t} should be of type "Array". Instead found type "${typeof s[t]}"`),!1)).map(s=>s[t]).reverse().reduce((s,i)=>{const a={};i.filter(u=>{let h;const m=Object.keys(u);for(let g=0;g<m.length;g+=1){const x=m[g],_=x.toLowerCase();e.indexOf(_)!==-1&&!(h==="rel"&&u[h].toLowerCase()==="canonical")&&!(_==="rel"&&u[_].toLowerCase()==="stylesheet")&&(h=_),e.indexOf(x)!==-1&&(x==="innerHTML"||x==="cssText"||x==="itemprop")&&(h=x)}if(!h||!u[h])return!1;const f=u[h].toLowerCase();return r[h]||(r[h]={}),a[h]||(a[h]={}),r[h][f]?!1:(a[h][f]=!0,!0)}).reverse().forEach(u=>s.push(u));const c=Object.keys(a);for(let u=0;u<c.length;u+=1){const h=c[u],m={...r[h],...a[h]};r[h]=m}return s},[]).reverse()},fp=(t,e)=>{if(Array.isArray(t)&&t.length){for(let n=0;n<t.length;n+=1)if(t[n][e])return!0}return!1},pp=t=>({baseTag:dp(["href"],t),bodyAttributes:go("bodyAttributes",t),defer:Kn(t,Qn.DEFER),encode:Kn(t,Qn.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:go("htmlAttributes",t),linkTags:Dr("link",["rel","href"],t),metaTags:Dr("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:Dr("noscript",["innerHTML"],t),onChangeClientState:hp(t),scriptTags:Dr("script",["src","innerHTML"],t),styleTags:Dr("style",["cssText"],t),title:up(t),titleAttributes:go("titleAttributes",t),prioritizeSeoTags:fp(t,Qn.PRIORITIZE_SEO_TAGS)}),Dh=t=>Array.isArray(t)?t.join(""):t,gp=(t,e)=>{const n=Object.keys(t);for(let r=0;r<n.length;r+=1)if(e[n[r]]&&e[n[r]].includes(t[n[r]]))return!0;return!1},xo=(t,e)=>Array.isArray(t)?t.reduce((n,r)=>(gp(r,e)?n.priority.push(r):n.default.push(r),n),{priority:[],default:[]}):{default:t,priority:[]},Tc=(t,e)=>({...t,[e]:void 0}),xp=["noscript","script","style"],zo=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),Vh=t=>Object.keys(t).reduce((e,n)=>{const r=typeof t[n]<"u"?`${n}="${t[n]}"`:`${n}`;return e?`${e} ${r}`:r},""),yp=(t,e,n,r)=>{const s=Vh(n),i=Dh(e);return s?`<${t} ${Nt}="true" ${s}>${zo(i,r)}</${t}>`:`<${t} ${Nt}="true">${zo(i,r)}</${t}>`},wp=(t,e,n=!0)=>e.reduce((r,s)=>{const i=s,a=Object.keys(i).filter(h=>!(h==="innerHTML"||h==="cssText")).reduce((h,m)=>{const f=typeof i[m]>"u"?m:`${m}="${zo(i[m],n)}"`;return h?`${h} ${f}`:f},""),c=i.innerHTML||i.cssText||"",u=xp.indexOf(t)===-1;return`${r}<${t} ${Nt}="true" ${a}${u?"/>":`>${c}</${t}>`}`},""),Oh=(t,e={})=>Object.keys(t).reduce((n,r)=>{const s=Ia[r];return n[s||r]=t[r],n},e),bp=(t,e,n)=>{const r={key:e,[Nt]:!0},s=Oh(n,r);return[Bt.createElement("title",s,e)]},Gs=(t,e)=>e.map((n,r)=>{const s={key:r,[Nt]:!0};return Object.keys(n).forEach(i=>{const c=Ia[i]||i;if(c==="innerHTML"||c==="cssText"){const u=n.innerHTML||n.cssText;s.dangerouslySetInnerHTML={__html:u}}else s[c]=n[i]}),Bt.createElement(t,s)}),wt=(t,e,n=!0)=>{switch(t){case"title":return{toComponent:()=>bp(t,e.title,e.titleAttributes),toString:()=>yp(t,e.title,e.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>Oh(e),toString:()=>Vh(e)};default:return{toComponent:()=>Gs(t,e),toString:()=>wp(t,e,n)}}},vp=({metaTags:t,linkTags:e,scriptTags:n,encode:r})=>{const s=xo(t,po.meta),i=xo(e,po.link),a=xo(n,po.script);return{priorityMethods:{toComponent:()=>[...Gs("meta",s.priority),...Gs("link",i.priority),...Gs("script",a.priority)],toString:()=>`${wt("meta",s.priority,r)} ${wt("link",i.priority,r)} ${wt("script",a.priority,r)}`},metaTags:s.default,linkTags:i.default,scriptTags:a.default}},_p=t=>{const{baseTag:e,bodyAttributes:n,encode:r=!0,htmlAttributes:s,noscriptTags:i,styleTags:a,title:c="",titleAttributes:u,prioritizeSeoTags:h}=t;let{linkTags:m,metaTags:f,scriptTags:g}=t,x={toComponent:()=>{},toString:()=>""};return h&&({priorityMethods:x,linkTags:m,metaTags:f,scriptTags:g}=vp(t)),{priority:x,base:wt("base",e,r),bodyAttributes:wt("bodyAttributes",n,r),htmlAttributes:wt("htmlAttributes",s,r),link:wt("link",m,r),meta:wt("meta",f,r),noscript:wt("noscript",i,r),script:wt("script",g,r),style:wt("style",a,r),title:wt("title",{title:c,titleAttributes:u},r)}},Bo=_p,Os=[],Mh=!!(typeof window<"u"&&window.document&&window.document.createElement),Uo=class{constructor(t,e){zt(this,"instances",[]);zt(this,"canUseDOM",Mh);zt(this,"context");zt(this,"value",{setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?Os:this.instances,add:t=>{(this.canUseDOM?Os:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?Os:this.instances).indexOf(t);(this.canUseDOM?Os:this.instances).splice(e,1)}}});this.context=t,this.canUseDOM=e||!1,e||(t.helmet=Bo({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Ep={},Lh=Bt.createContext(Ep),An,Fh=(An=class extends U.Component{constructor(n){super(n);zt(this,"helmetData");this.helmetData=new Uo(this.props.context||{},An.canUseDOM)}render(){return Bt.createElement(Lh.Provider,{value:this.helmetData.value},this.props.children)}},zt(An,"canUseDOM",Mh),An),qn=(t,e)=>{const n=document.head||document.querySelector("head"),r=n.querySelectorAll(`${t}[${Nt}]`),s=[].slice.call(r),i=[];let a;return e&&e.length&&e.forEach(c=>{const u=document.createElement(t);for(const h in c)if(Object.prototype.hasOwnProperty.call(c,h))if(h==="innerHTML")u.innerHTML=c.innerHTML;else if(h==="cssText")u.styleSheet?u.styleSheet.cssText=c.cssText:u.appendChild(document.createTextNode(c.cssText));else{const m=h,f=typeof c[m]>"u"?"":c[m];u.setAttribute(h,f)}u.setAttribute(Nt,"true"),s.some((h,m)=>(a=m,u.isEqualNode(h)))?s.splice(a,1):i.push(u)}),s.forEach(c=>{var u;return(u=c.parentNode)==null?void 0:u.removeChild(c)}),i.forEach(c=>n.appendChild(c)),{oldTags:s,newTags:i}},$o=(t,e)=>{const n=document.getElementsByTagName(t)[0];if(!n)return;const r=n.getAttribute(Nt),s=r?r.split(","):[],i=[...s],a=Object.keys(e);for(const c of a){const u=e[c]||"";n.getAttribute(c)!==u&&n.setAttribute(c,u),s.indexOf(c)===-1&&s.push(c);const h=i.indexOf(c);h!==-1&&i.splice(h,1)}for(let c=i.length-1;c>=0;c-=1)n.removeAttribute(i[c]);s.length===i.length?n.removeAttribute(Nt):n.getAttribute(Nt)!==a.join(",")&&n.setAttribute(Nt,a.join(","))},Np=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=Dh(t)),$o("title",e)},jc=(t,e)=>{const{baseTag:n,bodyAttributes:r,htmlAttributes:s,linkTags:i,metaTags:a,noscriptTags:c,onChangeClientState:u,scriptTags:h,styleTags:m,title:f,titleAttributes:g}=t;$o("body",r),$o("html",s),Np(f,g);const x={baseTag:qn("base",n),linkTags:qn("link",i),metaTags:qn("meta",a),noscriptTags:qn("noscript",c),scriptTags:qn("script",h),styleTags:qn("style",m)},_={},k={};Object.keys(x).forEach(P=>{const{newTags:C,oldTags:V}=x[P];C.length&&(_[P]=C),V.length&&(k[P]=x[P].oldTags)}),e&&e(),u(t,_,k)},Vr=null,Tp=t=>{Vr&&cancelAnimationFrame(Vr),t.defer?Vr=requestAnimationFrame(()=>{jc(t,()=>{Vr=null})}):(jc(t),Vr=null)},jp=Tp,Ic=class extends U.Component{constructor(){super(...arguments);zt(this,"rendered",!1)}shouldComponentUpdate(e){return!lp(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:n}=this.props.context;let r=null;const s=pp(e.get().map(i=>{const a={...i.props};return delete a.context,a}));Fh.canUseDOM?jp(s):Bo&&(r=Bo(s)),n(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},qo,Ip=(qo=class extends U.Component{shouldComponentUpdate(t){return!sp(Tc(this.props,"helmetData"),Tc(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,n,r){return{...e,[t.type]:[...e[t.type]||[],{...n,...this.mapNestedChildrenToProps(t,r)}]}}mapObjectTypeChildren(t,e,n,r){switch(t.type){case"title":return{...e,[t.type]:r,titleAttributes:{...n}};case"body":return{...e,bodyAttributes:{...n}};case"html":return{...e,htmlAttributes:{...n}};default:return{...e,[t.type]:{...n}}}}mapArrayTypeChildrenToProps(t,e){let n={...e};return Object.keys(t).forEach(r=>{n={...n,[r]:t[r]}}),n}warnOnInvalidChildren(t,e){return Ec(Nc.some(n=>t.type===n),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${Nc.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),Ec(!e||typeof e=="string"||Array.isArray(e)&&!e.some(n=>typeof n!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let n={};return Bt.Children.forEach(t,r=>{if(!r||!r.props)return;const{children:s,...i}=r.props,a=Object.keys(i).reduce((u,h)=>(u[cp[h]||h]=i[h],u),{});let{type:c}=r;switch(typeof c=="symbol"?c=c.toString():this.warnOnInvalidChildren(r,s),c){case"Symbol(react.fragment)":e=this.mapChildrenToProps(s,e);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(r,n,a,s);break;default:e=this.mapObjectTypeChildren(r,e,a,s);break}}),this.mapArrayTypeChildrenToProps(n,e)}render(){const{children:t,...e}=this.props;let n={...e},{helmetData:r}=e;if(t&&(n=this.mapChildrenToProps(t,n)),r&&!(r instanceof Uo)){const s=r;r=new Uo(s.context,!0),delete n.helmetData}return r?Bt.createElement(Ic,{...n,context:r.value}):Bt.createElement(Lh.Consumer,null,s=>Bt.createElement(Ic,{...n,context:s}))}},zt(qo,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),qo);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ap={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kp=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),te=(t,e)=>{const n=U.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:c="",children:u,...h},m)=>U.createElement("svg",{ref:m,...Ap,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${kp(t)}`,c].join(" "),...h},[...e.map(([f,g])=>U.createElement(f,g)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=te("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=te("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=te("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=te("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=te("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kc=te("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=te("CircleDollarSign",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dp=te("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=te("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=te("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=te("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=te("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=te("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=te("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=te("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=te("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qp=te("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=te("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=te("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bh=te("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=te("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=te("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=te("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=te("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=te("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=te("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=te("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=te("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=te("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=te("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ie=({children:t,className:e=""})=>o.jsx("div",{className:`container mx-auto px-4 md:px-6 lg:px-8 ${e}`,children:t}),Wp=(t,e={})=>{if(t.startsWith("http"))return t;if(t.startsWith("/src/assets/")){const r=t.replace("/src/assets/","/assets/");return""+t.substring(1),r}return t.startsWith("/")?t:`/${t}`},Yp=(t,e={sizes:[640,750,828,1080,1200,1920,2048,3840]})=>t.startsWith("http")?"":`${t} 1x, ${t} 2x`,Xp=(t="#f3f4f6")=>{const e=`<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100%" height="100%" fill="${t}"/></svg>`;return`data:image/svg+xml;base64,${btoa(e)}`},Oe=({src:t,alt:e,className:n="",style:r={},width:s,height:i,quality:a=75,sizes:c="100vw",loading:u="lazy",onLoad:h,placeholder:m,format:f="webp"})=>{const[g,x]=U.useState(!1),[_,k]=U.useState(m||Xp()),[P,C]=U.useState(!1),[V,M]=U.useState(!1);U.useEffect(()=>{if(!V){const O=new Image,I=Wp(t,{width:s,height:i,quality:a,format:f});O.src=I,O.onload=()=>{k(I),x(!0),h&&h()},O.onerror=()=>{if(t.startsWith("/src/assets/")){M(!0);const y="/"+t.substring(1),b=new Image;b.src=y,b.onload=()=>{k(y),x(!0),h&&h()},b.onerror=()=>{C(!0),k(t)}}else C(!0),k(t)}}return()=>{M(!1)}},[t]);const $=P?"":Yp(t,{sizes:[640,750,828,1080,1200,1920,2048],quality:a,format:f}),ee={...r,transition:"opacity 0.5s ease",opacity:g?1:.3};return o.jsx("img",{src:_,alt:e,className:`${n}`,style:ee,width:s,height:i,loading:u,sizes:c,srcSet:$,onLoad:()=>x(!0),onError:()=>{if(t.startsWith("/src/assets/")&&!P&&!V){M(!0);const O="/"+t.substring(1);k(O)}else C(!0),k(t)}})},Jp=({scrolled:t})=>{const[e,n]=U.useState(!1),r=()=>{n(!e)},s=[{title:"ホーム",path:"/"},{title:"料金",path:"/pricing"},{title:"インストラクター",path:"/instructors"},{title:"アクセス",path:"/contact"},{title:"よくある質問",path:"/faq"},{title:"ギャラリー",path:"/gallery"},{title:"ブログ",path:"/blog"}],i=t||e;return o.jsxs("header",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${i?"bg-turquoise-100 shadow-md py-3":"bg-transparent py-5"}`,children:[o.jsx(ie,{children:o.jsxs("div",{className:"flex items-center justify-between h-16 md:h-20 relative",children:[o.jsx("div",{className:"relative z-10",style:{width:"130px",height:"20px"},children:o.jsx(we,{to:"/",className:"block",children:o.jsx("div",{className:"absolute top-1/2 transform -translate-y-1/2",style:{height:i?"60px":"80px",marginTop:i?"0px":"5px"},children:o.jsx(Oe,{src:"/src/assets/logo.png",alt:"Softis Logo",className:"h-full w-auto transition-all duration-500 opacity-90",width:250,height:250,loading:"eager",quality:100})})})}),o.jsx("nav",{className:"hidden md:flex items-center space-x-8 ml-auto",children:s.map(a=>o.jsx(vc,{to:a.path,className:({isActive:c})=>`font-medium transition-colors relative ${i?c?"text-turquoise-500":"text-neutral-700 hover:text-turquoise-500":c?"text-white":"text-white/90 hover:text-white"}`,children:({isActive:c})=>o.jsxs(o.Fragment,{children:[a.title,c&&o.jsx(Q.span,{layoutId:"activeNavIndicator",className:`absolute -bottom-1 left-0 right-0 h-0.5 ${i?"bg-turquoise-500":"bg-turquoise-100"}`,transition:{type:"spring",stiffness:380,damping:30}})]})},a.path))}),o.jsx("button",{onClick:r,className:"md:hidden p-2","aria-label":"Toggle Menu",children:e?o.jsx(Ca,{className:i?"text-primary-500":"text-white",size:24}):o.jsx($p,{className:i?"text-primary-500":"text-white",size:24})})]})}),o.jsx(nn,{children:e&&o.jsx(Q.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"md:hidden bg-turquoise-300",children:o.jsx(ie,{children:o.jsx("div",{className:"py-4 space-y-4",children:s.map(a=>o.jsx(vc,{to:a.path,onClick:()=>n(!1),className:({isActive:c})=>`block py-2 font-medium ${c?"text-primary-500":"text-neutral-700"}`,children:a.title},a.path))})})})})]})},Zp=()=>{const t=new Date().getFullYear();return o.jsx("footer",{className:"bg-turquoise-700 text-white pt-16 pb-8",children:o.jsxs(ie,{children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12",children:[o.jsxs("div",{className:"md:col-span-1",children:[o.jsxs(we,{to:"/",className:"flex items-center mb-4",children:[o.jsx("img",{src:"/src/assets/logo.png",alt:"softis",className:"h-8 w-auto mr-2 filter brightness-0 invert"}),o.jsx("span",{className:"font-serif font-bold text-xl",children:"Softis"})]}),o.jsx("p",{className:"text-neutral-300 mb-6",children:"理学療法士が導く豊田市のパーソナルピラティススタジオ"}),o.jsx("div",{className:"flex space-x-4",children:o.jsxs("a",{href:"https://www.instagram.com/softis__pilates/?igsh=bTZ5d2Z2NzgwZGQw",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-gold-400 transition-colors flex items-center",children:[o.jsx(qp,{size:20,className:"mr-2"}),o.jsx("span",{children:"@softis__pilates"})]})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"クイックリンク"}),o.jsxs("ul",{className:"space-y-2",children:[o.jsx("li",{children:o.jsx(we,{to:"/",className:"text-neutral-300 hover:text-white transition-colors",children:"ホーム"})}),o.jsx("li",{children:o.jsx(we,{to:"/instructors",className:"text-neutral-300 hover:text-white transition-colors",children:"インストラクター"})}),o.jsx("li",{children:o.jsx(we,{to:"/pricing",className:"text-neutral-300 hover:text-white transition-colors",children:"料金"})}),o.jsx("li",{children:o.jsx(we,{to:"/contact",className:"text-neutral-300 hover:text-white transition-colors",children:"アクセス"})}),o.jsx("li",{children:o.jsx(we,{to:"/gallery",className:"text-neutral-300 hover:text-white transition-colors",children:"ギャラリー"})}),o.jsx("li",{children:o.jsx(we,{to:"/faq",className:"text-neutral-300 hover:text-white transition-colors",children:"よくある質問"})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"アクセス"}),o.jsxs("div",{className:"flex",children:[o.jsx(Bh,{className:"mr-2 flex-shrink-0 text-turquoise-400",size:20}),o.jsx("span",{className:"text-neutral-300",children:"愛知県豊田市若宮町1-26 セントラルビル2階"})]}),o.jsx("p",{className:"text-neutral-300 mt-4",children:"名鉄豊田線 豊田市駅より徒歩1分"})]})]}),o.jsx("hr",{className:"border-primary-700 mb-8"}),o.jsx("div",{className:"text-center",children:o.jsxs("p",{className:"text-neutral-400 text-sm",children:["© ",t," Softis. All rights reserved."]})})]})})},eg=()=>{const{pathname:t}=Sh(),[e,n]=U.useState(!1);return U.useEffect(()=>{const r=()=>{const s=window.scrollY>50;s!==e&&n(s)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[e]),U.useEffect(()=>{window.scrollTo(0,0)},[t]),o.jsxs("div",{className:"flex flex-col min-h-screen font-sans bg-turquoise-100",children:[o.jsx(Jp,{scrolled:e}),o.jsx("main",{className:"flex-grow",children:o.jsx(nn,{mode:"wait",children:o.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:o.jsx(Yf,{})},t)})}),o.jsx(Zp,{})]})},gn=({title:t,description:e,keywords:n,ogImage:r="/images/softis-og-image.jpg",ogType:s="website",canonical:i,language:a="ja",structuredData:c})=>{const u="Softis - ピラティススタジオ",h=`${t} | ${u}`;return o.jsxs(Ip,{children:[o.jsx("html",{lang:a}),o.jsx("title",{children:h}),o.jsx("meta",{name:"description",content:e}),n&&o.jsx("meta",{name:"keywords",content:n}),o.jsx("meta",{property:"og:title",content:h}),o.jsx("meta",{property:"og:description",content:e}),o.jsx("meta",{property:"og:image",content:r}),o.jsx("meta",{property:"og:type",content:s}),o.jsx("meta",{property:"og:site_name",content:u}),o.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),o.jsx("meta",{name:"twitter:title",content:h}),o.jsx("meta",{name:"twitter:description",content:e}),o.jsx("meta",{name:"twitter:image",content:r}),i&&o.jsx("link",{rel:"canonical",href:i}),c&&o.jsx("script",{type:"application/ld+json",children:JSON.stringify(c)})]})},Pe=({children:t,variant:e="primary",size:n="md",className:r="",onClick:s,type:i="button"})=>{const a="inline-flex items-center justify-center rounded-md font-medium transition duration-200 ease-in-out",c={primary:"bg-turquoise-500 text-white hover:bg-turquoise-600 focus:ring-2 focus:ring-turquoise-300",secondary:"bg-turquoise-400 text-white hover:bg-turquoise-600 focus:ring-2 focus:ring-turquoise-300",outline:"bg-transparent border border-turquoise-500 text-turquoise-500 hover:bg-turquoise-100",gold:"bg-turquoise-400 text-primary-900 hover:bg-turquoise-500 focus:ring-2 focus:ring-gold-300"},u={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2",lg:"px-6 py-3 text-lg"};return o.jsx("button",{type:i,className:`${a} ${c[e]} ${u[n]} ${r}`,onClick:s,children:t})},tg=({titles:t=[],subtitles:e=[],title:n,subtitle:r,ctaText:s,promoText:i,imageUrl:a,images:c=[],onCtaClick:u})=>{const[h,m]=U.useState(0),[f,g]=U.useState(0),[x,_]=U.useState({}),k=c.length>0?c:a?[a]:[],P=t.length>0?t:n?[n]:[""],C=e.length>0?e:r?[r]:[""];U.useEffect(()=>{if(k.length<=1&&P.length<=1)return;const M=setInterval(()=>{m($=>($+1)%k.length),g($=>($+1)%Math.max(P.length,C.length))},8e3);return()=>clearInterval(M)},[k.length,P.length,C.length]);const V=M=>{_($=>({...$,[M]:!0}))};return o.jsxs("div",{className:"relative h-screen min-h-[600px] flex items-center overflow-hidden",children:[o.jsx(nn,{mode:"sync",children:o.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.8},className:"absolute inset-0 z-0",children:[o.jsxs("div",{className:"absolute inset-0",children:[o.jsx("div",{className:"absolute inset-0 bg-turquoise-100",style:{opacity:x[h]?0:1,transition:"opacity 0.5s ease"}}),o.jsx(Oe,{src:k[h],alt:`Background image ${h+1}`,className:"w-full h-full object-cover",style:{objectPosition:"center"},loading:h===0?"eager":"lazy",quality:85,onLoad:()=>V(h)})]}),o.jsx("div",{className:"absolute inset-0 bg-turquoise-900 bg-opacity-40"})]},h)}),i&&o.jsx(Q.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.7,delay:.4},className:"absolute bottom-24 left-6 z-30 max-w-xs",children:o.jsx("div",{className:"bg-black/40 backdrop-blur-sm text-white px-4 py-2 rounded-lg border border-white/20 text-xs md:text-sm shadow-lg",children:i})}),k.length>1&&o.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 z-20 flex space-x-2",children:k.map((M,$)=>o.jsx("button",{onClick:()=>{m($),g($%Math.max(P.length,C.length))},className:`w-2 h-2 rounded-full transition-all duration-300 ${$===h?"bg-turquoise-500 w-8":"bg-white/50 hover:bg-white/75"}`,"aria-label":`Go to slide ${$+1}`},$))}),o.jsx(ie,{className:"relative z-10",children:o.jsxs("div",{className:"max-w-3xl",children:[o.jsx(nn,{mode:"wait",children:o.jsx(Q.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.7},className:"text-4xl md:text-5xl lg:text-6xl font-serif font-bold text-white leading-tight mb-6",children:P[f%P.length]},`title-${f}`)}),o.jsx(nn,{mode:"wait",children:o.jsx(Q.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.7},className:"text-xl md:text-2xl text-white opacity-90 mb-8",children:C[f%C.length]},`subtitle-${f}`)}),o.jsx(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7,delay:.6},children:o.jsx(Pe,{variant:"primary",size:"lg",onClick:u,children:s})})]})}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-gradient-to-t from-white/10 to-transparent"})]})},_e=({children:t,className:e="",id:n})=>o.jsx(Q.section,{id:n,initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.6},className:`py-16 md:py-24 ${e}`,children:t}),ng=()=>{const t=pn(),e=["/src/assets/IMG/img.png","/src/assets/IMG/IMG_1601.jpeg"],n=[`黒でなく白メインで使って欲しい
フリー素材の画像はなるべく使わないで欲しい`,`豊田市パーソナルピラティススタジオ
`],r=["","完全パーソナルレッスンをご提供。"],s={"@context":"https://schema.org","@type":"LocalBusiness",name:"Softis ピラティススタジオ",description:"豊田市駅徒歩1分の好立地にある、理学療法士が運営するパーソナルピラティススタジオ。姿勢改善、ボディメイク、健康促進をサポートします。",image:"/src/assets/IMG/img.png",address:{"@type":"PostalAddress",streetAddress:"豊田市",addressLocality:"愛知県",postalCode:"",addressCountry:"JP"},geo:{"@type":"GeoCoordinates"},url:"https://softis.jp",telephone:"",openingHoursSpecification:{"@type":"OpeningHoursSpecification",dayOfWeek:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],opens:"10:00",closes:"20:00"},priceRange:"¥¥",servesCuisine:"ピラティス, フィットネス, リハビリテーション"};return o.jsxs(o.Fragment,{children:[o.jsx(gn,{title:"豊田市のパーソナルピラティススタジオ | 理学療法士が指導 | Softis",description:"豊田市駅徒歩1分の好立地！理学療法士資格を持つインストラクターによる完全パーソナルピラティスレッスンで、姿勢改善・ボディメイク・健康促進をサポートします。初心者も安心の丁寧な指導と多数のピラティスマシンで効果的なトレーニングを。",keywords:"豊田市, ピラティス, パーソナルトレーニング, 理学療法士, 姿勢改善, ボディメイク, 健康促進, ピラティスマシン, リフォーマー, 駅近, 豊田市駅",structuredData:s}),o.jsx(tg,{titles:n,subtitles:r,ctaText:`！オープニングキャンペーン！
入会金 5500→0円
初回体験　5000→3000円`,images:e,onCtaClick:()=>window.open("https://lin.ee/Rvbat7l","_blank")}),o.jsx(_e,{className:"bg-turquoise-100",children:o.jsxs(ie,{children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-serif font-bold text-black mb-4",children:"Softisとは？"}),o.jsxs("div",{className:"max-w-3xl mx-auto p-8 bg-gradient-to-br from-turquoise-50 via-pink-50 to-white/90 border border-turquoise-100 rounded-xl shadow-lg",children:[o.jsx("h3",{className:"text-xl font-bold text-turquoise-600 mb-4",children:"理学療法士が導くパーソナルピラティス"}),o.jsx("div",{className:"flex items-center justify-center mb-4",children:o.jsx("span",{className:"inline-block w-12 h-1 bg-gradient-to-r from-turquoise-300 to-pink-200 rounded-full"})}),o.jsx("p",{className:"text-gray-800 text-lg leading-relaxed mb-6",children:"豊田市駅徒歩1分の好立地にオープンするスタジオです。理学療法士資格を所有したピラティスインストラクターによるパーソナルレッスンが受けられます。"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-turquoise-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),o.jsx("span",{className:"text-gray-700",children:"専門的な指導"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-turquoise-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),o.jsx("span",{className:"text-gray-700",children:"駅から徒歩1分"})]})]})]})]}),o.jsx("div",{className:"mb-12",children:o.jsx("div",{className:"text-center max-w-3xl mx-auto",children:o.jsxs("div",{className:"mb-8 bg-gradient-to-br from-turquoise-50 via-pink-50 to-white/90 border border-turquoise-100 rounded-xl shadow-lg p-8",children:[o.jsx("h3",{className:"text-xl font-bold text-turquoise-600 mb-4",children:"当スタジオの特徴"}),o.jsx("div",{className:"flex items-center justify-center mb-6",children:o.jsx("span",{className:"inline-block w-12 h-1 bg-gradient-to-r from-turquoise-300 to-pink-200 rounded-full"})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"flex items-start p-3 bg-white/80 rounded-lg shadow-sm",children:[o.jsx("span",{className:"flex-shrink-0 flex items-center justify-center w-8 h-8 bg-turquoise-100 text-turquoise-600 rounded-full mr-3 font-bold",children:"1"}),o.jsx("p",{className:"text-gray-800 text-left",children:"理学療法士資格所有インストラクターによる専門的なレッスン"})]}),o.jsxs("div",{className:"flex items-start p-3 bg-white/80 rounded-lg shadow-sm",children:[o.jsx("span",{className:"flex-shrink-0 flex items-center justify-center w-8 h-8 bg-turquoise-100 text-turquoise-600 rounded-full mr-3 font-bold",children:"2"}),o.jsx("p",{className:"text-gray-800 text-left",children:"パーソナルレッスンで初心者や運動が苦手な方でも安心"})]}),o.jsxs("div",{className:"flex items-start p-3 bg-white/80 rounded-lg shadow-sm",children:[o.jsx("span",{className:"flex-shrink-0 flex items-center justify-center w-8 h-8 bg-turquoise-100 text-turquoise-600 rounded-full mr-3 font-bold",children:"3"}),o.jsx("p",{className:"text-gray-800 text-left",children:"ピラティスマシン多数設置"})]}),o.jsxs("div",{className:"flex items-start p-3 bg-white/80 rounded-lg shadow-sm",children:[o.jsx("span",{className:"flex-shrink-0 flex items-center justify-center w-8 h-8 bg-turquoise-100 text-turquoise-600 rounded-full mr-3 font-bold",children:"4"}),o.jsx("p",{className:"text-gray-800 text-left",children:"続けやすさは通いやすさ！抜群の駅近の好立地かつ無料駐車場完備"})]})]})]})})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[o.jsx("div",{className:"bg-turquoise-100 rounded-xl shadow-lg overflow-hidden h-full hover:shadow-xl transition-shadow duration-300",children:o.jsx("div",{className:"aspect-[4/5] overflow-hidden",children:o.jsx(Oe,{src:"/src/assets/home2/1.png",alt:"白 ブルー シンプル 水彩 ミニマル information Instagramの投稿のコピー - ",className:"w-full h-full object-cover object-center",quality:55,loading:"lazy",format:"webp",sizes:"(max-width: 768px) 100vw, 50vw",width:600,height:750})})}),o.jsx("div",{className:"bg-turquoise-100 rounded-xl shadow-lg overflow-hidden h-full hover:shadow-xl transition-shadow duration-300",children:o.jsx("div",{className:"aspect-[4/5] overflow-hidden",children:o.jsx(Oe,{src:"/src/assets/home2/2.png",alt:"白 ブルー シンプル 水彩 ミニマル information Instagramの投稿のコピー - 2(2)",className:"w-full h-full object-cover object-center",quality:55,loading:"lazy",format:"webp",sizes:"(max-width: 768px) 100vw, 50vw",width:600,height:750})})})]})]})}),o.jsxs(_e,{className:"bg-white relative",children:[o.jsxs("div",{className:"absolute inset-0 z-0 overflow-hidden",children:[o.jsx(Oe,{src:"/src/assets/IMG/IMG_2364.jpeg",alt:"Studio background",className:"w-full h-full object-cover",loading:"lazy",quality:90,format:"webp"}),o.jsx("div",{className:"absolute inset-0 bg-turquoise-900 bg-opacity-70 z-0"})]}),o.jsx(ie,{className:"relative z-10",children:o.jsxs("div",{className:"max-w-3xl",children:[o.jsx(Q.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-4xl md:text-5xl font-serif font-bold mb-4 text-white",children:"スタジオについて"}),o.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"space-y-4",children:[o.jsx("p",{className:"text-xl text-white/90",children:"Softisでは、質の高いピラティス指導と最新のマシンで、あなたのカラダをサポートします。"}),o.jsx("p",{className:"text-xl text-white/90",children:"ピラティスリフォーマー、バレル、チェア、タワー、スパインコレクターなど多種に渡るマシンを取り揃えております。そのためお一人お一人に合わせたいろいろなエクササイズが可能となります。マシンの使い方はインストラクターから都度説明がありますのでご安心ください。"}),o.jsxs("div",{className:"mt-8 bg-white/10 p-6 rounded-lg backdrop-blur-sm",children:[o.jsx("h3",{className:"text-2xl font-serif font-bold text-white mb-4",children:"なぜSoftisを選ぶべきか"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"h-6 w-6 bg-turquoise-200 rounded-full flex items-center justify-center text-turquoise-700 font-bold mr-3 flex-shrink-0 mt-0.5",children:"1"}),o.jsxs("p",{className:"text-white/90",children:[o.jsx("strong",{className:"text-white",children:"専門知識を持つインストラクター："})," 理学療法士の資格を持つインストラクターがあなたの体の状態を理解し、最適なエクササイズを提案します。"]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"h-6 w-6 bg-turquoise-200 rounded-full flex items-center justify-center text-turquoise-700 font-bold mr-3 flex-shrink-0 mt-0.5",children:"2"}),o.jsxs("p",{className:"text-white/90",children:[o.jsx("strong",{className:"text-white",children:"パーソナライズされたアプローチ："})," お一人お一人の体の状態、目標、ライフスタイルに合わせたカスタムプログラムを提供しています。"]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"h-6 w-6 bg-turquoise-200 rounded-full flex items-center justify-center text-turquoise-700 font-bold mr-3 flex-shrink-0 mt-0.5",children:"3"}),o.jsxs("p",{className:"text-white/90",children:[o.jsx("strong",{className:"text-white",children:"豊富な設備："})," 最新のピラティス機器を完備し、多様なエクササイズが可能です。初心者から上級者まで対応可能です。"]})]})]})]}),o.jsxs("div",{className:"mt-8 bg-white/10 p-6 rounded-lg backdrop-blur-sm",children:[o.jsx("h3",{className:"text-2xl font-serif font-bold text-white mb-4",children:"スタジオの特徴"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("h4",{className:"text-white font-bold mb-2",children:"駅近の好立地"}),o.jsx("p",{className:"text-white/90 bg-white/20 p-3 rounded-lg flex-grow",children:"名鉄豊田線 豊田市駅から徒歩1分の便利なロケーション。忙しい日常の中でもピラティスを継続しやすい環境です。"})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("h4",{className:"text-white font-bold mb-2",children:"完全パーソナル制"}),o.jsx("p",{className:"text-white/90 bg-white/20 p-3 rounded-lg flex-grow",children:"マンツーマンでのレッスンで、あなただけの時間と空間を確保。周りを気にせず集中できます。"})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("h4",{className:"text-white font-bold mb-2",children:"清潔な環境"}),o.jsx("p",{className:"text-white/90 bg-white/20 p-3 rounded-lg flex-grow",children:"衛生管理を徹底し、いつでも清潔な空間でトレーニングできます。"})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("h4",{className:"text-white font-bold mb-2",children:"健康と美容の両立"}),o.jsx("p",{className:"text-white/90 bg-white/20 p-3 rounded-lg flex-grow",children:"内側からのボディメイクで、健康と美しさの両方を実現します。"})]})]})]}),o.jsx("p",{className:"text-white text-lg font-bold mt-4",children:"Coming Soon…"})]})]})})]}),o.jsx(_e,{id:"flow",children:o.jsxs(ie,{children:[o.jsxs("div",{className:"text-center mb-16 max-w-3xl mx-auto",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-serif font-bold text-black mb-4",children:"ご利用方法"}),o.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-turquoise-300 to-pink-200 rounded-full mx-auto mb-8"})]}),o.jsxs("div",{className:"max-w-2xl mx-auto bg-gradient-to-br from-turquoise-50 via-pink-50 to-white/90 border border-turquoise-100 rounded-xl shadow-lg p-8",children:[o.jsxs("div",{className:"flex flex-col space-y-8",children:[o.jsxs("div",{className:"flex items-start",children:[o.jsx("div",{className:"w-12 h-12 bg-turquoise-500 rounded-full flex items-center justify-center flex-shrink-0 mr-6 shadow-md",children:o.jsx("span",{className:"text-white text-xl font-bold",children:"①"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold mb-2 text-turquoise-600",children:"LINE登録"}),o.jsx("p",{className:"text-gray-800 bg-white/80 p-3 rounded-lg shadow-sm",children:"店舗公式LINEをご登録し初回体験申し込み"})]})]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("div",{className:"w-12 h-12 bg-turquoise-500 rounded-full flex items-center justify-center flex-shrink-0 mr-6 shadow-md",children:o.jsx("span",{className:"text-white text-xl font-bold",children:"②"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold mb-2 text-turquoise-600",children:"初回体験レッスン"}),o.jsx("p",{className:"text-gray-800 bg-white/80 p-3 rounded-lg shadow-sm",children:"来店し初回体験レッスンを受ける"})]})]})]}),o.jsxs("div",{className:"mt-8 text-center",children:[o.jsx("p",{className:"text-gray-800 mb-6 bg-white/80 p-3 rounded-lg shadow-sm",children:"初回体験レッスンを受ける"}),o.jsx(Pe,{variant:"primary",size:"lg",onClick:()=>window.open("https://lin.ee/Rvbat7l","_blank"),className:"shadow-md hover:shadow-lg transform transition hover:-translate-y-1",children:"LINEで予約する"})]})]})]})}),o.jsx(_e,{className:"bg-turquoise-50",children:o.jsxs(ie,{children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-serif font-bold text-turquoise-700 mb-4",children:"充実したマシン設備"}),o.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-turquoise-300 to-pink-200 rounded-full mx-auto mb-6"}),o.jsx("p",{className:"text-gray-800 text-lg bg-white/80 p-3 rounded-lg shadow-sm max-w-2xl mx-auto",children:"Softisでは最新のピラティスマシンを取り揃え、あなたの体に合わせたエクササイズをご提供します"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[o.jsxs(Q.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"bg-gradient-to-br from-turquoise-50 via-pink-50 to-white/90 border border-turquoise-100 rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[o.jsx("div",{className:"h-64 overflow-hidden",children:o.jsx(Oe,{src:"/src/assets/machine/IMG_6780.jpeg",alt:"ピラティスリフォーマー",className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105",loading:"lazy",quality:85,format:"webp",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"})}),o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-turquoise-700 mb-2",children:"リフォーマー"}),o.jsx("p",{className:"text-gray-800 bg-white/80 p-3 rounded-lg shadow-sm",children:"ピラティスの代表的なマシン。スプリングの抵抗を利用して、全身の筋肉をバランスよく鍛えることができます。"})]})]}),o.jsxs(Q.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.2},className:"bg-gradient-to-br from-turquoise-50 via-pink-50 to-white/90 border border-turquoise-100 rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[o.jsx("div",{className:"h-64 overflow-hidden",children:o.jsx(Oe,{src:"/src/assets/machine/IMG_1119.jpeg",alt:"ピラティスバレル",className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105",loading:"lazy",quality:85,format:"webp",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"})}),o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-turquoise-700 mb-2",children:"バレル"}),o.jsx("p",{className:"text-gray-800 bg-white/80 p-3 rounded-lg shadow-sm",children:"背骨の柔軟性を高め、姿勢改善に特に効果的なマシン。自然な脊柱のカーブをサポートします。"})]})]}),o.jsxs(Q.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.4},className:"bg-gradient-to-br from-turquoise-50 via-pink-50 to-white/90 border border-turquoise-100 rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[o.jsx("div",{className:"h-64 overflow-hidden",children:o.jsx(Oe,{src:"/src/assets/machine/IMG_8645.jpeg",alt:"ピラティスチェア",className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105",loading:"lazy",quality:85,format:"webp",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"})}),o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-turquoise-700 mb-2",children:"チェア"}),o.jsx("p",{className:"text-gray-800 bg-white/80 p-3 rounded-lg shadow-sm",children:"体幹の安定性と上半身・下半身の筋力強化に効果的。バランス能力も向上させます。"})]})]}),o.jsxs(Q.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.6},className:"bg-gradient-to-br from-turquoise-50 via-pink-50 to-white/90 border border-turquoise-100 rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[o.jsx("div",{className:"h-64 overflow-hidden",children:o.jsx(Oe,{src:"/src/assets/machine/img.png",alt:"ピラティス専用マシン",className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105",loading:"lazy",quality:85,format:"webp",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"})}),o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-turquoise-700 mb-2",children:"専用マシン 1"}),o.jsx("p",{className:"text-gray-800 bg-white/80 p-3 rounded-lg shadow-sm",children:"ピラティスの動きを特化させた専用マシン。身体の様々な部位に効率よくアプローチします。"})]})]}),o.jsxs(Q.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.8},className:"bg-gradient-to-br from-turquoise-50 via-pink-50 to-white/90 border border-turquoise-100 rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[o.jsx("div",{className:"h-64 overflow-hidden",children:o.jsx(Oe,{src:"/src/assets/machine/img_1.png",alt:"ピラティス専用マシン",className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105",loading:"lazy",quality:85,format:"webp",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"})}),o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-turquoise-700 mb-2",children:"専用マシン 2"}),o.jsx("p",{className:"text-gray-800 bg-white/80 p-3 rounded-lg shadow-sm",children:"身体の深層部の筋肉に効果的にアプローチできるように設計された高性能マシン。"})]})]}),o.jsxs(Q.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:1},className:"bg-gradient-to-br from-turquoise-50 via-pink-50 to-white/90 border border-turquoise-100 rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[o.jsx("div",{className:"h-64 overflow-hidden",children:o.jsx(Oe,{src:"/src/assets/machine/img_2.png",alt:"ピラティス専用マシン",className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105",loading:"lazy",quality:85,format:"webp",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"})}),o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-turquoise-700 mb-2",children:"専用マシン 3"}),o.jsx("p",{className:"text-gray-800 bg-white/80 p-3 rounded-lg shadow-sm",children:"プロフェッショナル仕様の最新ピラティスマシン。快適性と効果を両立します。"})]})]}),o.jsxs(Q.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:1.2},className:"bg-gradient-to-br from-turquoise-50 via-pink-50 to-white/90 border border-turquoise-100 rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-1 md:col-start-2 lg:col-start-auto",children:[o.jsx("div",{className:"h-64 overflow-hidden",children:o.jsx(Oe,{src:"/src/assets/machine/img_3.png",alt:"ピラティス専用マシン",className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105",loading:"lazy",quality:85,format:"webp",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"})}),o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-turquoise-700 mb-2",children:"専用マシン 4"}),o.jsx("p",{className:"text-gray-800 bg-white/80 p-3 rounded-lg shadow-sm",children:"あらゆる体型、レベルに対応できる調整可能な設計。あなたに合わせたトレーニングが可能です。"})]})]})]}),o.jsx("div",{className:"mt-12 text-center",children:o.jsx(Pe,{variant:"primary",size:"lg",onClick:()=>t("/gallery"),className:"shadow-md hover:shadow-lg transform transition hover:-translate-y-1",children:"もっと見る"})})]})})]})},yo=({title:t,description:e,price:n,features:r,icon:s,color:i="turquoise",ctaText:a,popular:c=!1})=>{const u={turquoise:"bg-gradient-to-br from-turquoise-50 via-turquoise-100/30 to-white",gold:"bg-gradient-to-br from-gold-50 via-gold-100/30 to-white",pink:"bg-gradient-to-br from-pink-50 via-pink-100/30 to-white"};return o.jsxs(Q.div,{className:`rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-shadow duration-300 h-full flex flex-col ${c?"border-2 border-gold-500 relative":"border border-neutral-200"}`,whileHover:{y:-5},children:[c&&o.jsx("div",{className:"absolute top-4 right-4 bg-gold-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-md",children:"おすすめ"}),o.jsxs("div",{className:`${u[i]} p-8 flex flex-col items-center`,children:[o.jsx("div",{className:`w-20 h-20 ${c?"bg-gold-100":"bg-turquoise-100"} rounded-full flex items-center justify-center shadow-inner mb-4`,children:o.jsx(s,{className:`h-10 w-10 ${c?"text-gold-500":"text-turquoise-500"}`})}),o.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2 text-center",children:t}),o.jsx("p",{className:"text-gray-600 mb-4 text-center",children:e}),o.jsx("div",{className:`text-center mb-4 ${c?"text-gold-500":"text-turquoise-500"}`,children:o.jsx("span",{className:"text-3xl font-bold",children:n})})]}),o.jsxs("div",{className:"bg-white p-6 flex flex-col flex-grow",children:[o.jsx("ul",{className:"mb-6 flex-grow space-y-3",children:r.map((h,m)=>o.jsxs("li",{className:"flex items-start text-gray-700",children:[o.jsx(Qs,{className:`h-5 w-5 mr-2 mt-0.5 flex-shrink-0 ${c?"text-gold-500":"text-turquoise-500"}`}),o.jsx("span",{children:h})]},m))}),o.jsx(Pe,{variant:c?"gold":"primary",className:"w-full",children:a})]})]})},rg=()=>o.jsxs("div",{className:"min-h-screen",children:[o.jsxs("div",{className:"relative pt-32 pb-16 text-white",children:[o.jsx("div",{className:"absolute inset-0 z-0 overflow-hidden bg-gradient-to-r from-turquoise-700 to-turquoise-500",children:o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute transform rotate-45 -translate-x-1/4 -translate-y-1/4 -left-1/4 -top-1/4 w-1/2 h-1/2 bg-white/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute transform -rotate-12 translate-x-1/4 translate-y-1/4 right-1/4 bottom-1/4 w-1/2 h-1/2 bg-white/20 rounded-full blur-3xl"})]})}),o.jsx(ie,{className:"relative z-10",children:o.jsxs("div",{className:"max-w-3xl",children:[o.jsx(Q.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-4xl md:text-5xl font-serif font-bold mb-4",children:"料金案内"}),o.jsx(Q.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"text-xl text-white/90",children:"あなたのニーズに合わせたさまざまなオプションをご用意しています"})]})})]}),o.jsx(_e,{children:o.jsxs(ie,{children:[o.jsxs("div",{className:"mb-16 text-center max-w-3xl mx-auto",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-serif font-bold text-turquoise-700 mb-4",children:"料金表"}),o.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-turquoise-300 to-pink-200 rounded-full mx-auto mb-6"}),o.jsx("p",{className:"text-gray-800 text-lg p-3 bg-white/80 rounded-lg shadow-sm max-w-2xl mx-auto",children:"オープニングキャンペーン料金　先着20名様"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-16",children:[o.jsx(yo,{title:"初回体験",description:"特別価格でトレーニングを体験できます。",price:"3000円",features:["通常価格: 5000円","専門的なフィットネス評価","個別プログラム","栄養アドバイス","先着20名様限定"],icon:Lp,color:"turquoise",ctaText:"予約する",popular:!0}),o.jsx(yo,{title:"5回券",description:"フレキシブルな利用が可能なお得なチケット。",price:"39000円",features:["通常価格: 42000円","1回あたり 7800円","有効期限: 3ヶ月","現金・クレジットカード払い可能","パーソナルフォロー"],icon:Ti,color:"pink",ctaText:"選択する"}),o.jsx(yo,{title:"10回券",description:"定期的なトレーニングと持続的な結果を望む方に最適。",price:"80000円",features:["1回あたり 8000円","有効期限: 5ヶ月","現金または銀行振込のみ","オーダーメイドプログラム","詳細な進捗管理"],icon:Sp,color:"turquoise",ctaText:"選択する"})]})]})}),o.jsx(_e,{className:"bg-turquoise-50",children:o.jsxs(ie,{children:[o.jsxs("div",{className:"mb-16 text-center max-w-3xl mx-auto",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-serif font-bold text-turquoise-700 mb-4",children:"料金詳細"}),o.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-turquoise-300 to-pink-200 rounded-full mx-auto mb-6"}),o.jsx("p",{className:"text-gray-800 text-lg p-3 bg-white/80 rounded-lg shadow-sm max-w-2xl mx-auto",children:"オープニングキャンペーン：先着20名様限定の特別オファー！"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"flex flex-col md:flex-row bg-gradient-to-br from-turquoise-50 via-pink-50 to-white/90 border border-turquoise-100 rounded-xl shadow-lg p-6",children:[o.jsx("div",{className:"flex-shrink-0 w-16 h-16 md:w-20 md:h-20 bg-turquoise-100 rounded-full flex items-center justify-center mx-auto md:mx-0 md:mr-6 mb-4 md:mb-0 shadow-inner",children:o.jsx(or,{className:"h-8 w-8 text-turquoise-600"})}),o.jsxs("div",{className:"flex-grow",children:[o.jsx("h3",{className:"text-xl font-bold text-turquoise-700 mb-3 text-center md:text-left",children:"入会・管理金"}),o.jsxs("p",{className:"text-gray-800 mb-4 p-3 bg-white/80 rounded-lg",children:[o.jsx("span",{className:"line-through text-gray-500",children:"5500円"}),o.jsx("span",{className:"text-turquoise-700 font-bold text-xl ml-3",children:"0円"}),o.jsx("br",{}),"オープニングキャンペーンとして、先着20名様は入会金無料！"]})]})]}),o.jsxs("div",{className:"flex flex-col md:flex-row bg-gradient-to-br from-turquoise-50 via-pink-50 to-white/90 border border-turquoise-100 rounded-xl shadow-lg p-6",children:[o.jsx("div",{className:"flex-shrink-0 w-16 h-16 md:w-20 md:h-20 bg-gold-100 rounded-full flex items-center justify-center mx-auto md:mx-0 md:mr-6 mb-4 md:mb-0 shadow-inner",children:o.jsx(Vp,{className:"h-8 w-8 text-gold-500"})}),o.jsxs("div",{className:"flex-grow",children:[o.jsx("h3",{className:"text-xl font-bold text-turquoise-700 mb-3 text-center md:text-left",children:"単発"}),o.jsxs("p",{className:"text-gray-800 mb-4 p-3 bg-white/80 rounded-lg",children:[o.jsx("span",{className:"text-turquoise-700 font-bold text-xl",children:"9000円"})," / 1回",o.jsx("br",{}),"現金またはクレジットカードでのお支払いが可能です。"]})]})]})]})]})}),o.jsx(_e,{children:o.jsxs(ie,{children:[o.jsxs("div",{className:"mb-12 text-center max-w-3xl mx-auto",children:[o.jsx("h2",{className:"text-3xl md:text-4xl font-serif font-bold text-turquoise-700 mb-4",children:"お支払い・キャンセルについて"}),o.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-turquoise-300 to-pink-200 rounded-full mx-auto mb-6"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-turquoise-50 via-pink-50 to-white/90 border border-turquoise-100 rounded-xl shadow-lg p-6 mb-8",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(Sc,{className:"h-6 w-6 text-turquoise-500 mr-3"}),o.jsx("h3",{className:"text-xl font-bold text-turquoise-700",children:"お支払い方法"})]}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex items-start p-3 bg-white/80 rounded-lg",children:[o.jsx(Xr,{className:"h-5 w-5 text-turquoise-500 mr-3 mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-gray-700",children:"※回数券は有効期限がございます。5回券→3ヶ月 10回券→5ヶ月"})]}),o.jsxs("li",{className:"flex items-start p-3 bg-white/80 rounded-lg",children:[o.jsx(Sc,{className:"h-5 w-5 text-turquoise-500 mr-3 mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-gray-700",children:"※体験料金、入会金、単発券、5回券は以下のお支払い方法から選択できます。現金、クレジットカード"})]}),o.jsxs("li",{className:"flex items-start p-3 bg-white/80 rounded-lg",children:[o.jsx(Rp,{className:"h-5 w-5 text-turquoise-500 mr-3 mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-gray-700",children:"※ 10回券は現金払いもしくは銀行振り込み（手数料はお客様負担となります）でのみお支払いが可能です。"})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-turquoise-50 via-pink-50 to-white/90 border border-turquoise-100 rounded-xl shadow-lg p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(Dp,{className:"h-6 w-6 text-turquoise-500 mr-3"}),o.jsx("h3",{className:"text-xl font-bold text-turquoise-700",children:"キャンセルポリシー"})]}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex items-start p-3 bg-white/80 rounded-lg",children:[o.jsx(Qs,{className:"h-5 w-5 text-turquoise-500 mr-3 mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-gray-700",children:"・レッスンの変更やキャンセルはレッスン前日の午前9時までに予約サイトから操作をしてください。"})]}),o.jsxs("li",{className:"flex items-start p-3 bg-white/80 rounded-lg",children:[o.jsx(Qs,{className:"h-5 w-5 text-turquoise-500 mr-3 mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-gray-700",children:"それ以降のキャンセルは公式LINEにご連絡ください。"})]}),o.jsxs("li",{className:"flex items-start p-3 bg-white/80 rounded-lg",children:[o.jsx(Qs,{className:"h-5 w-5 text-turquoise-500 mr-3 mt-0.5 flex-shrink-0"}),o.jsx("span",{className:"text-gray-700",children:"その場合レッスン料100%の金額もしくは回数券1回消費の対応をさせていただきますのでご了承をお願いいたします。（例外もありますのでご相談ください）。"})]})]})]})]})})]}),sg=()=>o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative pt-32 pb-16 text-white",children:[o.jsxs("div",{className:"absolute inset-0 z-0 overflow-hidden",children:[o.jsx(Oe,{src:"/src/assets/IMG/IMG_2593.jpeg",alt:"インストラクター背景",className:"w-full h-full object-cover",loading:"eager",quality:90,format:"webp"}),o.jsx("div",{className:"absolute inset-0 bg-turquoise-900 bg-opacity-70 z-0"})]}),o.jsx(ie,{className:"relative z-10",children:o.jsxs("div",{className:"max-w-3xl",children:[o.jsx(Q.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-4xl md:text-5xl font-serif font-bold mb-4",children:"インストラクター"}),o.jsx(Q.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"text-xl text-white/90",children:"Softisのインストラクターは、専門的な知識と豊富な経験であなたの健康をサポートします。"})]})})]}),o.jsx(_e,{children:o.jsx(ie,{children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-start",children:[o.jsxs("div",{className:"bg-gradient-to-br from-turquoise-50 via-pink-50 to-white/90 border border-turquoise-100 rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[o.jsx("div",{className:"h-96 overflow-hidden",children:o.jsx(Oe,{src:"/src/assets/IMG/IMG_1118.jpeg",alt:"秋間まゆ",className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105",loading:"eager",quality:90,format:"webp",sizes:"(max-width: 768px) 100vw, 50vw"})}),o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"text-2xl font-bold text-turquoise-700 mb-2",children:"秋間 まゆ"}),o.jsx("p",{className:"text-turquoise-600 mb-4 text-lg",children:"オーナー・ピラティスインストラクター"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-white/80 p-4 rounded-lg shadow-sm",children:[o.jsx("h4",{className:"font-bold text-turquoise-700 mb-2 text-lg",children:"ご挨拶"}),o.jsxs("p",{className:"text-gray-800 leading-relaxed",children:["初めまして、Softisオーナーの秋間まゆです。",o.jsx("br",{}),"元理学療法士として病院勤務経験があり、健康な身体づくりの重要性を実感しました。ピラティスを通じて、日常の身体のケアと自分自身の身体を愛する大切さをお伝えします。"]})]}),o.jsxs("div",{className:"bg-white/80 p-4 rounded-lg shadow-sm",children:[o.jsx("h4",{className:"font-bold text-turquoise-700 mb-2 text-lg",children:"資格"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsx("li",{children:"理学療法士（日本病院認定機構病院勤務経験）"}),o.jsx("li",{children:"BESJピラティス認定インストラクター"}),o.jsx("li",{children:"PACピラティス認定インストラクター"}),o.jsx("li",{children:"ピラティス機能解剖®️資格"}),o.jsx("li",{children:"フードマイスター資格"})]})]}),o.jsxs("div",{className:"bg-white/80 p-4 rounded-lg shadow-sm",children:[o.jsx("h4",{className:"font-bold text-turquoise-700 mb-2 text-lg",children:"メッセージ"}),o.jsxs("p",{className:"text-gray-800 leading-relaxed",children:["ピラティスは単なるエクササイズではなく、自分自身と向き合う時間です。",o.jsx("br",{}),"身体が硬い方、痛みがある方、姿勢が気になる方も大丈夫。一人ひとりの身体に合わせたプログラムで、無理なく変化を実感していただけます。あなたの「できた！」を一緒に喜びましょう！"]})]})]}),o.jsxs("div",{className:"mt-6 flex flex-wrap gap-2",children:[o.jsx("span",{className:"bg-turquoise-100 text-turquoise-700 text-sm px-3 py-1 rounded-full",children:"ピラティス"}),o.jsx("span",{className:"bg-turquoise-100 text-turquoise-700 text-sm px-3 py-1 rounded-full",children:"姿勢改善"}),o.jsx("span",{className:"bg-turquoise-100 text-turquoise-700 text-sm px-3 py-1 rounded-full",children:"痛み予防"}),o.jsx("span",{className:"bg-turquoise-100 text-turquoise-700 text-sm px-3 py-1 rounded-full",children:"身体の機能改善"})]})]})]}),o.jsxs("div",{className:"sticky top-8 bg-gradient-to-br from-turquoise-50 via-pink-50 to-white/90 border border-turquoise-100 rounded-xl shadow-lg p-6",children:[o.jsx("h2",{className:"text-3xl font-serif font-bold text-turquoise-700 mb-6",children:"指導理念"}),o.jsx("div",{className:"w-20 h-1 bg-gradient-to-r from-turquoise-300 to-pink-200 rounded-full mb-6"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white/80 p-4 rounded-lg shadow-sm",children:[o.jsx("h3",{className:"text-xl font-bold text-turquoise-700 mb-3",children:"3つの約束"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-turquoise-500 text-2xl mr-2",children:"●"}),o.jsxs("span",{className:"flex-1 text-gray-800",children:["安全第一の個別指導",o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"理学療法士の知識を活かした安全なプログラム"})]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-turquoise-500 text-2xl mr-2",children:"●"}),o.jsxs("span",{className:"flex-1 text-gray-800",children:["身体と心のバランス",o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"マインドフルネスを重視した総合アプローチ"})]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-turquoise-500 text-2xl mr-2",children:"●"}),o.jsxs("span",{className:"flex-1 text-gray-800",children:["継続可能な習慣形成",o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"日常生活に取り入れやすいエクササイズ"})]})]})]})]}),o.jsxs("div",{className:"bg-white/80 p-4 rounded-lg shadow-sm",children:[o.jsx("h3",{className:"text-xl font-bold text-turquoise-700 mb-3",children:"対応可能なケース"}),o.jsxs("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[o.jsxs("li",{className:"flex items-center",children:[o.jsx("span",{className:"text-turquoise-500 mr-2",children:"✓"}),o.jsx("span",{className:"text-gray-800",children:"慢性的な肩こり・腰痛"})]}),o.jsxs("li",{className:"flex items-center",children:[o.jsx("span",{className:"text-turquoise-500 mr-2",children:"✓"}),o.jsx("span",{className:"text-gray-800",children:"産前産後の身体ケア"})]}),o.jsxs("li",{className:"flex items-center",children:[o.jsx("span",{className:"text-turquoise-500 mr-2",children:"✓"}),o.jsx("span",{className:"text-gray-800",children:"猫背・反り腰改善"})]}),o.jsxs("li",{className:"flex items-center",children:[o.jsx("span",{className:"text-turquoise-500 mr-2",children:"✓"}),o.jsx("span",{className:"text-gray-800",children:"スポーツパフォーマンス向上"})]}),o.jsxs("li",{className:"flex items-center",children:[o.jsx("span",{className:"text-turquoise-500 mr-2",children:"✓"}),o.jsx("span",{className:"text-gray-800",children:"ストレス緩和"})]}),o.jsxs("li",{className:"flex items-center",children:[o.jsx("span",{className:"text-turquoise-500 mr-2",children:"✓"}),o.jsx("span",{className:"text-gray-800",children:"身体の可動域改善"})]})]})]}),o.jsx("div",{className:"bg-white/80 p-4 rounded-lg shadow-sm",children:o.jsxs("blockquote",{className:"text-center italic text-gray-700",children:["「身体の声に耳を傾けることから、本当の健康は始まります。",o.jsx("br",{}),"あなたの『理想の身体』へ一緒に歩んでいきましょう」"]})})]})]})]})})})]}),ig=()=>{const t=n=>{n.preventDefault(),alert("お問い合わせを受け付けました。近日中にご連絡いたします。")},e={"@context":"https://schema.org","@type":"LocalBusiness",name:"Softis ピラティススタジオ",address:{"@type":"PostalAddress",streetAddress:"愛知県豊田市若宮町1-26 セントラルビル2階",addressLocality:"豊田市",addressRegion:"愛知県",postalCode:"",addressCountry:"JP"},geo:{"@type":"GeoCoordinates",latitude:"",longitude:""},url:"https://softis.jp/contact",contactPoint:{"@type":"ContactPoint",contactType:"予約・お問い合わせ",availableLanguage:["Japanese"]}};return o.jsxs(o.Fragment,{children:[o.jsx(gn,{title:"アクセス・お問い合わせ | 豊田市駅徒歩1分のピラティススタジオ",description:"豊田市駅徒歩1分のSoftisピラティススタジオへのアクセス方法・お問い合わせ。愛知県豊田市若宮町1-26 セントラルビル2階。無料駐車場完備、名鉄豊田線豊田市駅から徒歩1分の好立地です。",keywords:"アクセス, 豊田市駅, 徒歩1分, ピラティススタジオ, お問い合わせ, 愛知県豊田市, 無料駐車場, 名鉄豊田線",structuredData:e}),o.jsxs("div",{className:"relative pt-32 pb-16 text-white",children:[o.jsxs("div",{className:"absolute inset-0 z-0 overflow-hidden",children:[o.jsx(Oe,{src:"/src/assets/IMG/IMG_2364.jpeg",alt:"Contact background",className:"w-full h-full object-cover",loading:"eager",quality:90,format:"webp"}),o.jsx("div",{className:"absolute inset-0 bg-turquoise-900 bg-opacity-70 z-0"})]}),o.jsx(ie,{className:"relative z-10",children:o.jsxs("div",{className:"max-w-3xl",children:[o.jsx(Q.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-4xl md:text-5xl font-serif font-bold mb-4",children:"アクセス"}),o.jsx(Q.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"text-xl text-white/90",children:"名鉄豊田線 豊田市駅から徒歩1分"})]})})]}),o.jsx(_e,{children:o.jsx(ie,{children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[o.jsxs("div",{className:"bg-gradient-to-br from-turquoise-50 via-pink-50 to-white/90 border border-turquoise-100 rounded-xl shadow-lg p-8 hover:shadow-xl transition-all duration-300",children:[o.jsx("h2",{className:"text-2xl md:text-3xl font-serif font-bold text-turquoise-700 mb-6",children:"アクセス情報"}),o.jsx("div",{className:"w-20 h-1 bg-gradient-to-r from-turquoise-300 to-pink-200 rounded-full mb-8"}),o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"flex",children:[o.jsx("div",{className:"flex-shrink-0 w-14 h-14 bg-turquoise-100 rounded-lg flex items-center justify-center mr-6 shadow-sm",children:o.jsx(Bh,{className:"text-turquoise-500",size:24})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-turquoise-700 mb-2",children:"住所"}),o.jsxs("p",{className:"text-gray-800 bg-white/80 p-3 rounded-lg shadow-sm",children:["愛知県豊田市若宮町1-26",o.jsx("br",{}),"セントラルビル2階",o.jsx("br",{}),"一階がminiminiさんの黄色いビルです"]})]})]}),o.jsxs("div",{className:"flex",children:[o.jsx("div",{className:"flex-shrink-0 w-14 h-14 bg-turquoise-100 rounded-lg flex items-center justify-center mr-6 shadow-sm",children:o.jsx(Xr,{className:"text-turquoise-500",size:24})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-turquoise-700 mb-2",children:"アクセス詳細"}),o.jsxs("p",{className:"text-gray-800 bg-white/80 p-3 rounded-lg shadow-sm mb-2",children:["セントラルビルを目印にお越しください",o.jsx("br",{}),"ビルの左の階段から2階にお上がりください"]})]})]})]}),o.jsxs("div",{className:"mt-10",children:[o.jsx("h3",{className:"text-xl font-bold text-turquoise-700 mb-4",children:"交通アクセス"}),o.jsx("div",{className:"bg-white/80 p-4 rounded-lg shadow-sm",children:o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-turquoise-500 mr-2 font-bold",children:"•"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-turquoise-600",children:"名鉄豊田線"}),o.jsx("p",{className:"text-gray-700",children:"豊田市駅より徒歩1分"})]})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("span",{className:"text-turquoise-500 mr-2 font-bold",children:"•"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-turquoise-600",children:"愛知環状鉄道"}),o.jsx("p",{className:"text-gray-700",children:"新豊田駅より徒歩4分"})]})]})]})})]})]}),o.jsxs("div",{className:"flex flex-col gap-8",children:[o.jsx("div",{className:"h-96 bg-neutral-200 rounded-xl overflow-hidden shadow-lg transition-shadow hover:shadow-xl",children:o.jsx("iframe",{loading:"lazy",src:"https://maps.google.com/maps?q=%E6%84%9B%E7%9F%A5%E7%9C%8C%E8%B1%8A%E7%94%B0%E5%B8%82%E8%8B%A5%E5%AE%AE%E7%94%BA1-26%20%E3%82%BB%E3%83%B3%E3%83%88%E3%83%A9%E3%83%AB%E3%83%93%E3%83%AB2%E9%9A%8E&t=m&z=20&output=embed&iwloc=near",title:"愛知県豊田市若宮町1-26 セントラルビル2階","aria-label":"愛知県豊田市若宮町1-26 セントラルビル2階",className:"w-full h-full border-0",allowFullScreen:!0})}),o.jsx("div",{className:"rounded-xl overflow-hidden shadow-lg transition-shadow hover:shadow-xl",children:o.jsx(Oe,{src:"/src/assets/studio/Softis.png",alt:"Studio Softis",className:"w-full h-auto",quality:85,format:"webp"})}),o.jsxs("div",{className:"bg-gradient-to-br from-turquoise-50 via-pink-50 to-white/90 border border-turquoise-100 rounded-xl shadow-lg p-6 hover:shadow-xl transition-all duration-300",children:[o.jsx("h3",{className:"text-xl font-bold text-turquoise-700 mb-4",children:"駐車場情報"}),o.jsx("div",{className:"w-16 h-1 bg-gradient-to-r from-turquoise-300 to-pink-200 rounded-full mb-6"}),o.jsx("p",{className:"text-gray-800 bg-white/80 p-3 rounded-lg shadow-sm",children:"駐車場は1番左の4Fと書かれている場所以外にお止めください"})]})]})]})})}),o.jsx(_e,{className:"bg-turquoise-100",children:o.jsx(ie,{children:o.jsxs("div",{className:"max-w-3xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl font-serif font-bold text-turquoise-700 mb-4",children:"お問い合わせ"}),o.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-turquoise-300 to-pink-200 rounded-full mx-auto mb-6"}),o.jsx("p",{className:"text-gray-800 text-lg bg-white/80 p-3 rounded-lg shadow-sm max-w-2xl mx-auto",children:"ご質問、ご意見、お問い合わせなどがございましたら、下記のフォームよりお気軽にご連絡ください。 24時間以内に担当者より返信いたします。"})]}),o.jsx("div",{className:"bg-gradient-to-br from-turquoise-50 via-pink-50 to-white/90 border border-turquoise-100 rounded-xl shadow-lg p-8",children:o.jsxs("form",{onSubmit:t,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"name",className:"block text-neutral-700 text-sm font-medium mb-1",children:["お名前 ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"name",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-turquoise-300 shadow-sm",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"email",className:"block text-neutral-700 text-sm font-medium mb-1",children:["メールアドレス ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"email",id:"email",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-turquoise-300 shadow-sm",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"phone",className:"block text-neutral-700 text-sm font-medium mb-1",children:"電話番号"}),o.jsx("input",{type:"tel",id:"phone",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-turquoise-300 shadow-sm"})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"subject",className:"block text-neutral-700 text-sm font-medium mb-1",children:["件名 ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"subject",className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-turquoise-300 shadow-sm",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"message",className:"block text-neutral-700 text-sm font-medium mb-1",children:["メッセージ ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("textarea",{id:"message",rows:6,className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-turquoise-300 shadow-sm",required:!0})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"privacy",className:"mr-2",required:!0}),o.jsxs("label",{htmlFor:"privacy",className:"text-sm text-neutral-700",children:[o.jsx("span",{className:"text-red-500",children:"*"})," プライバシーポリシーに同意します"]})]}),o.jsx("div",{className:"text-center",children:o.jsxs(Pe,{variant:"primary",size:"lg",type:"submit",className:"shadow-md hover:shadow-lg transform transition hover:-translate-y-1",children:["送信する ",o.jsx(ka,{className:"ml-2 h-4 w-4"})]})})]})})]})})})]})},og=()=>{};var Cc={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},ag=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Hh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,c=a?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,m=i>>2,f=(i&3)<<4|c>>4;let g=(c&15)<<2|h>>6,x=h&63;u||(x=64,a||(g=64)),r.push(n[m],n[f],n[g],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($h(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ag(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||h==null||f==null)throw new lg;const g=i<<2|c>>4;if(r.push(g),h!==64){const x=c<<4&240|h>>2;if(r.push(x),f!==64){const _=h<<6&192|f;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lg extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cg=function(t){const e=$h(t);return Hh.encodeByteArray(e,!0)},ai=function(t){return cg(t).replace(/\./g,"")},ug=function(t){try{return Hh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg=()=>hg().__FIREBASE_DEFAULTS__,mg=()=>{if(typeof process>"u"||typeof Cc>"u")return;const t=Cc.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fg=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ug(t[1]);return e&&JSON.parse(e)},Pa=()=>{try{return og()||dg()||mg()||fg()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},pg=t=>{var e,n;return(n=(e=Pa())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},gg=t=>{const e=pg(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Gh=()=>{var t;return(t=Pa())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ra(t){return t.endsWith(".cloudworkstations.dev")}async function yg(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ai(JSON.stringify(n)),ai(JSON.stringify(a)),""].join(".")}const Br={};function bg(){const t={prod:[],emulator:[]};for(const e of Object.keys(Br))Br[e]?t.emulator.push(e):t.prod.push(e);return t}function vg(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Pc=!1;function Qh(t,e){if(typeof window>"u"||typeof document>"u"||!Ra(window.location.host)||Br[t]===e||Br[t]||Pc)return;Br[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=bg().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,x){g.setAttribute("width","24"),g.setAttribute("id",x),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Pc=!0,a()},g}function m(g,x){g.setAttribute("id",x),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function f(){const g=vg(r),x=n("text"),_=document.getElementById(x)||document.createElement("span"),k=n("learnmore"),P=document.getElementById(k)||document.createElement("a"),C=n("preprendIcon"),V=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const M=g.element;c(M),m(P,k);const $=h();u(V,C),M.append(V,_,P,$),document.body.appendChild(M)}i?(_.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Eg(){var t;const e=(t=Pa())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ng(){return!Eg()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Tg(){try{return typeof indexedDB=="object"}catch{return!1}}function jg(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="FirebaseError";class ar extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Ig,Object.setPrototypeOf(this,ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kh.prototype.create)}}class Kh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?Ag(i,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new ar(s,c,r)}}function Ag(t,e){return t.replace(kg,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const kg=/\{\$([^}]+)}/g;function li(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(Rc(i)&&Rc(a)){if(!li(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Rc(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(t){return t&&t._delegate?t._delegate:t}class Jr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new xg;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Pg(e))try{this.getOrInitializeService({instanceIdentifier:Tn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Tn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Tn){return this.instances.has(e)}getOptions(e=Tn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Cg(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Tn){return this.component?this.component.multipleInstances?e:Tn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Cg(t){return t===Tn?void 0:t}function Pg(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Sg(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const Dg={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},Vg=ue.INFO,Og={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},Mg=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Og[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wh{constructor(e){this.name=e,this._logLevel=Vg,this._logHandler=Mg,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Dg[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const Lg=(t,e)=>e.some(n=>t instanceof n);let Dc,Vc;function Fg(){return Dc||(Dc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qg(){return Vc||(Vc=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yh=new WeakMap,Go=new WeakMap,Xh=new WeakMap,wo=new WeakMap,Da=new WeakMap;function zg(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(rn(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Yh.set(n,t)}).catch(()=>{}),Da.set(e,t),e}function Bg(t){if(Go.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Go.set(t,e)}let Qo={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Go.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Xh.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return rn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ug(t){Qo=t(Qo)}function $g(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(bo(this),e,...n);return Xh.set(r,e.sort?e.sort():[e]),rn(r)}:qg().includes(t)?function(...e){return t.apply(bo(this),e),rn(Yh.get(this))}:function(...e){return rn(t.apply(bo(this),e))}}function Hg(t){return typeof t=="function"?$g(t):(t instanceof IDBTransaction&&Bg(t),Lg(t,Fg())?new Proxy(t,Qo):t)}function rn(t){if(t instanceof IDBRequest)return zg(t);if(wo.has(t))return wo.get(t);const e=Hg(t);return e!==t&&(wo.set(t,e),Da.set(e,t)),e}const bo=t=>Da.get(t);function Gg(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),c=rn(a);return r&&a.addEventListener("upgradeneeded",u=>{r(rn(a.result),u.oldVersion,u.newVersion,rn(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const Qg=["get","getKey","getAll","getAllKeys","count"],Kg=["put","add","delete","clear"],vo=new Map;function Oc(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vo.get(e))return vo.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Kg.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Qg.includes(n)))return;const i=async function(a,...c){const u=this.transaction(a,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),s&&u.done]))[0]};return vo.set(e,i),i}Ug(t=>({...t,get:(e,n,r)=>Oc(e,n)||t.get(e,n,r),has:(e,n)=>!!Oc(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Yg(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Yg(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ko="@firebase/app",Mc="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ht=new Wh("@firebase/app"),Xg="@firebase/app-compat",Jg="@firebase/analytics-compat",Zg="@firebase/analytics",ex="@firebase/app-check-compat",tx="@firebase/app-check",nx="@firebase/auth",rx="@firebase/auth-compat",sx="@firebase/database",ix="@firebase/data-connect",ox="@firebase/database-compat",ax="@firebase/functions",lx="@firebase/functions-compat",cx="@firebase/installations",ux="@firebase/installations-compat",hx="@firebase/messaging",dx="@firebase/messaging-compat",mx="@firebase/performance",fx="@firebase/performance-compat",px="@firebase/remote-config",gx="@firebase/remote-config-compat",xx="@firebase/storage",yx="@firebase/storage-compat",wx="@firebase/firestore",bx="@firebase/vertexai",vx="@firebase/firestore-compat",_x="firebase",Ex="11.7.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo="[DEFAULT]",Nx={[Ko]:"fire-core",[Xg]:"fire-core-compat",[Zg]:"fire-analytics",[Jg]:"fire-analytics-compat",[tx]:"fire-app-check",[ex]:"fire-app-check-compat",[nx]:"fire-auth",[rx]:"fire-auth-compat",[sx]:"fire-rtdb",[ix]:"fire-data-connect",[ox]:"fire-rtdb-compat",[ax]:"fire-fn",[lx]:"fire-fn-compat",[cx]:"fire-iid",[ux]:"fire-iid-compat",[hx]:"fire-fcm",[dx]:"fire-fcm-compat",[mx]:"fire-perf",[fx]:"fire-perf-compat",[px]:"fire-rc",[gx]:"fire-rc-compat",[xx]:"fire-gcs",[yx]:"fire-gcs-compat",[wx]:"fire-fst",[vx]:"fire-fst-compat",[bx]:"fire-vertex","fire-js":"fire-js",[_x]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=new Map,Tx=new Map,Yo=new Map;function Lc(t,e){try{t.container.addComponent(e)}catch(n){Ht.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ui(t){const e=t.name;if(Yo.has(e))return Ht.debug(`There were multiple attempts to register component ${e}.`),!1;Yo.set(e,t);for(const n of ci.values())Lc(n,t);for(const n of Tx.values())Lc(n,t);return!0}function jx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ix(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sn=new Kh("app","Firebase",Ax);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=Ex;function Jh(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Wo,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw sn.create("bad-app-name",{appName:String(s)});if(n||(n=Gh()),!n)throw sn.create("no-options");const i=ci.get(s);if(i){if(li(n,i.options)&&li(r,i.config))return i;throw sn.create("duplicate-app",{appName:s})}const a=new Rg(s);for(const u of Yo.values())a.addComponent(u);const c=new kx(n,r,a);return ci.set(s,c),c}function Cx(t=Wo){const e=ci.get(t);if(!e&&t===Wo&&Gh())return Jh();if(!e)throw sn.create("no-app",{appName:t});return e}function Wn(t,e,n){var r;let s=(r=Nx[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ht.warn(c.join(" "));return}ui(new Jr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="firebase-heartbeat-database",Rx=1,Zr="firebase-heartbeat-store";let _o=null;function Zh(){return _o||(_o=Gg(Px,Rx,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zr)}catch(n){console.warn(n)}}}}).catch(t=>{throw sn.create("idb-open",{originalErrorMessage:t.message})})),_o}async function Dx(t){try{const n=(await Zh()).transaction(Zr),r=await n.objectStore(Zr).get(ed(t));return await n.done,r}catch(e){if(e instanceof ar)Ht.warn(e.message);else{const n=sn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ht.warn(n.message)}}}async function Fc(t,e){try{const r=(await Zh()).transaction(Zr,"readwrite");await r.objectStore(Zr).put(e,ed(t)),await r.done}catch(n){if(n instanceof ar)Ht.warn(n.message);else{const r=sn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ht.warn(r.message)}}}function ed(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=1024,Ox=30;class Mx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Fx(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=qc();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>Ox){const a=qx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ht.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qc(),{heartbeatsToSend:r,unsentEntries:s}=Lx(this._heartbeatsCache.heartbeats),i=ai(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ht.warn(n),""}}}function qc(){return new Date().toISOString().substring(0,10)}function Lx(t,e=Vx){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),zc(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),zc(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Fx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Tg()?jg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Dx(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Fc(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Fc(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function zc(t){return ai(JSON.stringify({version:2,heartbeats:t})).length}function qx(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(t){ui(new Jr("platform-logger",e=>new Wg(e),"PRIVATE")),ui(new Jr("heartbeat",e=>new Mx(e),"PRIVATE")),Wn(Ko,Mc,t),Wn(Ko,Mc,"esm2017"),Wn("fire-js","")}zx("");var Bx="firebase",Ux="11.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wn(Bx,Ux,"app");var Bc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var on,td;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,y){function b(){}b.prototype=y.prototype,I.D=y.prototype,I.prototype=new b,I.prototype.constructor=I,I.C=function(v,N,T){for(var E=Array(arguments.length-2),re=2;re<arguments.length;re++)E[re-2]=arguments[re];return y.prototype[N].apply(v,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,y,b){b||(b=0);var v=Array(16);if(typeof y=="string")for(var N=0;16>N;++N)v[N]=y.charCodeAt(b++)|y.charCodeAt(b++)<<8|y.charCodeAt(b++)<<16|y.charCodeAt(b++)<<24;else for(N=0;16>N;++N)v[N]=y[b++]|y[b++]<<8|y[b++]<<16|y[b++]<<24;y=I.g[0],b=I.g[1],N=I.g[2];var T=I.g[3],E=y+(T^b&(N^T))+v[0]+3614090360&4294967295;y=b+(E<<7&4294967295|E>>>25),E=T+(N^y&(b^N))+v[1]+3905402710&4294967295,T=y+(E<<12&4294967295|E>>>20),E=N+(b^T&(y^b))+v[2]+606105819&4294967295,N=T+(E<<17&4294967295|E>>>15),E=b+(y^N&(T^y))+v[3]+3250441966&4294967295,b=N+(E<<22&4294967295|E>>>10),E=y+(T^b&(N^T))+v[4]+4118548399&4294967295,y=b+(E<<7&4294967295|E>>>25),E=T+(N^y&(b^N))+v[5]+1200080426&4294967295,T=y+(E<<12&4294967295|E>>>20),E=N+(b^T&(y^b))+v[6]+2821735955&4294967295,N=T+(E<<17&4294967295|E>>>15),E=b+(y^N&(T^y))+v[7]+4249261313&4294967295,b=N+(E<<22&4294967295|E>>>10),E=y+(T^b&(N^T))+v[8]+1770035416&4294967295,y=b+(E<<7&4294967295|E>>>25),E=T+(N^y&(b^N))+v[9]+2336552879&4294967295,T=y+(E<<12&4294967295|E>>>20),E=N+(b^T&(y^b))+v[10]+4294925233&4294967295,N=T+(E<<17&4294967295|E>>>15),E=b+(y^N&(T^y))+v[11]+2304563134&4294967295,b=N+(E<<22&4294967295|E>>>10),E=y+(T^b&(N^T))+v[12]+1804603682&4294967295,y=b+(E<<7&4294967295|E>>>25),E=T+(N^y&(b^N))+v[13]+4254626195&4294967295,T=y+(E<<12&4294967295|E>>>20),E=N+(b^T&(y^b))+v[14]+2792965006&4294967295,N=T+(E<<17&4294967295|E>>>15),E=b+(y^N&(T^y))+v[15]+1236535329&4294967295,b=N+(E<<22&4294967295|E>>>10),E=y+(N^T&(b^N))+v[1]+4129170786&4294967295,y=b+(E<<5&4294967295|E>>>27),E=T+(b^N&(y^b))+v[6]+3225465664&4294967295,T=y+(E<<9&4294967295|E>>>23),E=N+(y^b&(T^y))+v[11]+643717713&4294967295,N=T+(E<<14&4294967295|E>>>18),E=b+(T^y&(N^T))+v[0]+3921069994&4294967295,b=N+(E<<20&4294967295|E>>>12),E=y+(N^T&(b^N))+v[5]+3593408605&4294967295,y=b+(E<<5&4294967295|E>>>27),E=T+(b^N&(y^b))+v[10]+38016083&4294967295,T=y+(E<<9&4294967295|E>>>23),E=N+(y^b&(T^y))+v[15]+3634488961&4294967295,N=T+(E<<14&4294967295|E>>>18),E=b+(T^y&(N^T))+v[4]+3889429448&4294967295,b=N+(E<<20&4294967295|E>>>12),E=y+(N^T&(b^N))+v[9]+568446438&4294967295,y=b+(E<<5&4294967295|E>>>27),E=T+(b^N&(y^b))+v[14]+3275163606&4294967295,T=y+(E<<9&4294967295|E>>>23),E=N+(y^b&(T^y))+v[3]+4107603335&4294967295,N=T+(E<<14&4294967295|E>>>18),E=b+(T^y&(N^T))+v[8]+1163531501&4294967295,b=N+(E<<20&4294967295|E>>>12),E=y+(N^T&(b^N))+v[13]+2850285829&4294967295,y=b+(E<<5&4294967295|E>>>27),E=T+(b^N&(y^b))+v[2]+4243563512&4294967295,T=y+(E<<9&4294967295|E>>>23),E=N+(y^b&(T^y))+v[7]+1735328473&4294967295,N=T+(E<<14&4294967295|E>>>18),E=b+(T^y&(N^T))+v[12]+2368359562&4294967295,b=N+(E<<20&4294967295|E>>>12),E=y+(b^N^T)+v[5]+4294588738&4294967295,y=b+(E<<4&4294967295|E>>>28),E=T+(y^b^N)+v[8]+2272392833&4294967295,T=y+(E<<11&4294967295|E>>>21),E=N+(T^y^b)+v[11]+1839030562&4294967295,N=T+(E<<16&4294967295|E>>>16),E=b+(N^T^y)+v[14]+4259657740&4294967295,b=N+(E<<23&4294967295|E>>>9),E=y+(b^N^T)+v[1]+2763975236&4294967295,y=b+(E<<4&4294967295|E>>>28),E=T+(y^b^N)+v[4]+1272893353&4294967295,T=y+(E<<11&4294967295|E>>>21),E=N+(T^y^b)+v[7]+4139469664&4294967295,N=T+(E<<16&4294967295|E>>>16),E=b+(N^T^y)+v[10]+3200236656&4294967295,b=N+(E<<23&4294967295|E>>>9),E=y+(b^N^T)+v[13]+681279174&4294967295,y=b+(E<<4&4294967295|E>>>28),E=T+(y^b^N)+v[0]+3936430074&4294967295,T=y+(E<<11&4294967295|E>>>21),E=N+(T^y^b)+v[3]+3572445317&4294967295,N=T+(E<<16&4294967295|E>>>16),E=b+(N^T^y)+v[6]+76029189&4294967295,b=N+(E<<23&4294967295|E>>>9),E=y+(b^N^T)+v[9]+3654602809&4294967295,y=b+(E<<4&4294967295|E>>>28),E=T+(y^b^N)+v[12]+3873151461&4294967295,T=y+(E<<11&4294967295|E>>>21),E=N+(T^y^b)+v[15]+530742520&4294967295,N=T+(E<<16&4294967295|E>>>16),E=b+(N^T^y)+v[2]+3299628645&4294967295,b=N+(E<<23&4294967295|E>>>9),E=y+(N^(b|~T))+v[0]+4096336452&4294967295,y=b+(E<<6&4294967295|E>>>26),E=T+(b^(y|~N))+v[7]+1126891415&4294967295,T=y+(E<<10&4294967295|E>>>22),E=N+(y^(T|~b))+v[14]+2878612391&4294967295,N=T+(E<<15&4294967295|E>>>17),E=b+(T^(N|~y))+v[5]+4237533241&4294967295,b=N+(E<<21&4294967295|E>>>11),E=y+(N^(b|~T))+v[12]+1700485571&4294967295,y=b+(E<<6&4294967295|E>>>26),E=T+(b^(y|~N))+v[3]+2399980690&4294967295,T=y+(E<<10&4294967295|E>>>22),E=N+(y^(T|~b))+v[10]+4293915773&4294967295,N=T+(E<<15&4294967295|E>>>17),E=b+(T^(N|~y))+v[1]+2240044497&4294967295,b=N+(E<<21&4294967295|E>>>11),E=y+(N^(b|~T))+v[8]+1873313359&4294967295,y=b+(E<<6&4294967295|E>>>26),E=T+(b^(y|~N))+v[15]+4264355552&4294967295,T=y+(E<<10&4294967295|E>>>22),E=N+(y^(T|~b))+v[6]+2734768916&4294967295,N=T+(E<<15&4294967295|E>>>17),E=b+(T^(N|~y))+v[13]+1309151649&4294967295,b=N+(E<<21&4294967295|E>>>11),E=y+(N^(b|~T))+v[4]+4149444226&4294967295,y=b+(E<<6&4294967295|E>>>26),E=T+(b^(y|~N))+v[11]+3174756917&4294967295,T=y+(E<<10&4294967295|E>>>22),E=N+(y^(T|~b))+v[2]+718787259&4294967295,N=T+(E<<15&4294967295|E>>>17),E=b+(T^(N|~y))+v[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(N+(E<<21&4294967295|E>>>11))&4294967295,I.g[2]=I.g[2]+N&4294967295,I.g[3]=I.g[3]+T&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var b=y-this.blockSize,v=this.B,N=this.h,T=0;T<y;){if(N==0)for(;T<=b;)s(this,I,T),T+=this.blockSize;if(typeof I=="string"){for(;T<y;)if(v[N++]=I.charCodeAt(T++),N==this.blockSize){s(this,v),N=0;break}}else for(;T<y;)if(v[N++]=I[T++],N==this.blockSize){s(this,v),N=0;break}}this.h=N,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var b=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=b&255,b/=256;for(this.u(I),I=Array(16),y=b=0;4>y;++y)for(var v=0;32>v;v+=8)I[b++]=this.g[y]>>>v&255;return I};function i(I,y){var b=c;return Object.prototype.hasOwnProperty.call(b,I)?b[I]:b[I]=y(I)}function a(I,y){this.h=y;for(var b=[],v=!0,N=I.length-1;0<=N;N--){var T=I[N]|0;v&&T==y||(b[N]=T,v=!1)}this.g=b}var c={};function u(I){return-128<=I&&128>I?i(I,function(y){return new a([y|0],0>y?-1:0)}):new a([I|0],0>I?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return P(h(-I));for(var y=[],b=1,v=0;I>=b;v++)y[v]=I/b|0,b*=4294967296;return new a(y,0)}function m(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return P(m(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=h(Math.pow(y,8)),v=f,N=0;N<I.length;N+=8){var T=Math.min(8,I.length-N),E=parseInt(I.substring(N,N+T),y);8>T?(T=h(Math.pow(y,T)),v=v.j(T).add(h(E))):(v=v.j(b),v=v.add(h(E)))}return v}var f=u(0),g=u(1),x=u(16777216);t=a.prototype,t.m=function(){if(k(this))return-P(this).m();for(var I=0,y=1,b=0;b<this.g.length;b++){var v=this.i(b);I+=(0<=v?v:4294967296+v)*y,y*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(k(this))return"-"+P(this).toString(I);for(var y=h(Math.pow(I,6)),b=this,v="";;){var N=$(b,y).g;b=C(b,N.j(y));var T=((0<b.g.length?b.g[0]:b.h)>>>0).toString(I);if(b=N,_(b))return T+v;for(;6>T.length;)T="0"+T;v=T+v}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function k(I){return I.h==-1}t.l=function(I){return I=C(this,I),k(I)?-1:_(I)?0:1};function P(I){for(var y=I.g.length,b=[],v=0;v<y;v++)b[v]=~I.g[v];return new a(b,~I.h).add(g)}t.abs=function(){return k(this)?P(this):this},t.add=function(I){for(var y=Math.max(this.g.length,I.g.length),b=[],v=0,N=0;N<=y;N++){var T=v+(this.i(N)&65535)+(I.i(N)&65535),E=(T>>>16)+(this.i(N)>>>16)+(I.i(N)>>>16);v=E>>>16,T&=65535,E&=65535,b[N]=E<<16|T}return new a(b,b[b.length-1]&-2147483648?-1:0)};function C(I,y){return I.add(P(y))}t.j=function(I){if(_(this)||_(I))return f;if(k(this))return k(I)?P(this).j(P(I)):P(P(this).j(I));if(k(I))return P(this.j(P(I)));if(0>this.l(x)&&0>I.l(x))return h(this.m()*I.m());for(var y=this.g.length+I.g.length,b=[],v=0;v<2*y;v++)b[v]=0;for(v=0;v<this.g.length;v++)for(var N=0;N<I.g.length;N++){var T=this.i(v)>>>16,E=this.i(v)&65535,re=I.i(N)>>>16,ne=I.i(N)&65535;b[2*v+2*N]+=E*ne,V(b,2*v+2*N),b[2*v+2*N+1]+=T*ne,V(b,2*v+2*N+1),b[2*v+2*N+1]+=E*re,V(b,2*v+2*N+1),b[2*v+2*N+2]+=T*re,V(b,2*v+2*N+2)}for(v=0;v<y;v++)b[v]=b[2*v+1]<<16|b[2*v];for(v=y;v<2*y;v++)b[v]=0;return new a(b,0)};function V(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function M(I,y){this.g=I,this.h=y}function $(I,y){if(_(y))throw Error("division by zero");if(_(I))return new M(f,f);if(k(I))return y=$(P(I),y),new M(P(y.g),P(y.h));if(k(y))return y=$(I,P(y)),new M(P(y.g),y.h);if(30<I.g.length){if(k(I)||k(y))throw Error("slowDivide_ only works with positive integers.");for(var b=g,v=y;0>=v.l(I);)b=ee(b),v=ee(v);var N=O(b,1),T=O(v,1);for(v=O(v,2),b=O(b,2);!_(v);){var E=T.add(v);0>=E.l(I)&&(N=N.add(b),T=E),v=O(v,1),b=O(b,1)}return y=C(I,N.j(y)),new M(N,y)}for(N=f;0<=I.l(y);){for(b=Math.max(1,Math.floor(I.m()/y.m())),v=Math.ceil(Math.log(b)/Math.LN2),v=48>=v?1:Math.pow(2,v-48),T=h(b),E=T.j(y);k(E)||0<E.l(I);)b-=v,T=h(b),E=T.j(y);_(T)&&(T=g),N=N.add(T),I=C(I,E)}return new M(N,I)}t.A=function(I){return $(this,I).h},t.and=function(I){for(var y=Math.max(this.g.length,I.g.length),b=[],v=0;v<y;v++)b[v]=this.i(v)&I.i(v);return new a(b,this.h&I.h)},t.or=function(I){for(var y=Math.max(this.g.length,I.g.length),b=[],v=0;v<y;v++)b[v]=this.i(v)|I.i(v);return new a(b,this.h|I.h)},t.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),b=[],v=0;v<y;v++)b[v]=this.i(v)^I.i(v);return new a(b,this.h^I.h)};function ee(I){for(var y=I.g.length+1,b=[],v=0;v<y;v++)b[v]=I.i(v)<<1|I.i(v-1)>>>31;return new a(b,I.h)}function O(I,y){var b=y>>5;y%=32;for(var v=I.g.length-b,N=[],T=0;T<v;T++)N[T]=0<y?I.i(T+b)>>>y|I.i(T+b+1)<<32-y:I.i(T+b);return new a(N,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,td=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=m,on=a}).apply(typeof Bc<"u"?Bc:typeof self<"u"?self:typeof window<"u"?window:{});var Ms=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nd,Lr,rd,Ws,Xo,sd,id,od;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,p){return l==Array.prototype||l==Object.prototype||(l[d]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ms=="object"&&Ms];for(var d=0;d<l.length;++d){var p=l[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(l,d){if(d)e:{var p=r;l=l.split(".");for(var w=0;w<l.length-1;w++){var S=l[w];if(!(S in p))break e;p=p[S]}l=l[l.length-1],w=p[l],d=d(w),d!=w&&d!=null&&e(p,l,{configurable:!0,writable:!0,value:d})}}function i(l,d){l instanceof String&&(l+="");var p=0,w=!1,S={next:function(){if(!w&&p<l.length){var R=p++;return{value:d(R,l[R]),done:!1}}return w=!0,{done:!0,value:void 0}}};return S[Symbol.iterator]=function(){return S},S}s("Array.prototype.values",function(l){return l||function(){return i(this,function(d,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function h(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function m(l,d,p){return l.call.apply(l.bind,arguments)}function f(l,d,p){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var S=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(S,w),l.apply(d,S)}}return function(){return l.apply(d,arguments)}}function g(l,d,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:f,g.apply(null,arguments)}function x(l,d){var p=Array.prototype.slice.call(arguments,1);return function(){var w=p.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function _(l,d){function p(){}p.prototype=d.prototype,l.aa=d.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(w,S,R){for(var B=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)B[pe-2]=arguments[pe];return d.prototype[S].apply(w,B)}}function k(l){const d=l.length;if(0<d){const p=Array(d);for(let w=0;w<d;w++)p[w]=l[w];return p}return[]}function P(l,d){for(let p=1;p<arguments.length;p++){const w=arguments[p];if(u(w)){const S=l.length||0,R=w.length||0;l.length=S+R;for(let B=0;B<R;B++)l[S+B]=w[B]}else l.push(w)}}class C{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function V(l){return/^[\s\xa0]*$/.test(l)}function M(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function $(l){return $[" "](l),l}$[" "]=function(){};var ee=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function O(l,d,p){for(const w in l)d.call(p,l[w],w,l)}function I(l,d){for(const p in l)d.call(void 0,l[p],p,l)}function y(l){const d={};for(const p in l)d[p]=l[p];return d}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function v(l,d){let p,w;for(let S=1;S<arguments.length;S++){w=arguments[S];for(p in w)l[p]=w[p];for(let R=0;R<b.length;R++)p=b[R],Object.prototype.hasOwnProperty.call(w,p)&&(l[p]=w[p])}}function N(l){var d=1;l=l.split(":");const p=[];for(;0<d&&l.length;)p.push(l.shift()),d--;return l.length&&p.push(l.join(":")),p}function T(l){c.setTimeout(()=>{throw l},0)}function E(){var l=at;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class re{constructor(){this.h=this.g=null}add(d,p){const w=ne.get();w.set(d,p),this.h?this.h.next=w:this.g=w,this.h=w}}var ne=new C(()=>new Ne,l=>l.reset());class Ne{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let be,Le=!1,at=new re,A=()=>{const l=c.Promise.resolve(void 0);be=()=>{l.then(lt)}};var lt=()=>{for(var l;l=E();){try{l.h.call(l.g)}catch(p){T(p)}var d=ne;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}Le=!1};function Ve(){this.s=this.s,this.C=this.C}Ve.prototype.s=!1,Ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var ct=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};c.addEventListener("test",p,d),c.removeEventListener("test",p,d)}catch{}return l}();function ut(l,d){if(j.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(ee){e:{try{$(d.nodeName);var S=!0;break e}catch{}S=!1}S||(d=null)}}else p=="mouseover"?d=l.fromElement:p=="mouseout"&&(d=l.toElement);this.relatedTarget=d,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Se[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&ut.aa.h.call(this)}}_(ut,j);var Se={2:"touch",3:"pen",4:"mouse"};ut.prototype.h=function(){ut.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var jt="closure_listenable_"+(1e6*Math.random()|0),It=0;function Kt(l,d,p,w,S){this.listener=l,this.proxy=null,this.src=d,this.type=p,this.capture=!!w,this.ha=S,this.key=++It,this.da=this.fa=!1}function _t(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Mt(l){this.src=l,this.g={},this.h=0}Mt.prototype.add=function(l,d,p,w,S){var R=l.toString();l=this.g[R],l||(l=this.g[R]=[],this.h++);var B=gr(l,d,w,S);return-1<B?(d=l[B],p||(d.fa=!1)):(d=new Kt(d,this.src,R,!!w,S),d.fa=p,l.push(d)),d};function pr(l,d){var p=d.type;if(p in l.g){var w=l.g[p],S=Array.prototype.indexOf.call(w,d,void 0),R;(R=0<=S)&&Array.prototype.splice.call(w,S,1),R&&(_t(d),l.g[p].length==0&&(delete l.g[p],l.h--))}}function gr(l,d,p,w){for(var S=0;S<l.length;++S){var R=l[S];if(!R.da&&R.listener==d&&R.capture==!!p&&R.ha==w)return S}return-1}var xr="closure_lm_"+(1e6*Math.random()|0),Dn={};function yr(l,d,p,w,S){if(Array.isArray(d)){for(var R=0;R<d.length;R++)yr(l,d[R],p,w,S);return null}return p=bs(p),l&&l[jt]?l.K(d,p,h(w)?!!w.capture:!!w,S):ys(l,d,p,!1,w,S)}function ys(l,d,p,w,S,R){if(!d)throw Error("Invalid event type");var B=h(S)?!!S.capture:!!S,pe=br(l);if(pe||(l[xr]=pe=new Mt(l)),p=pe.add(d,p,w,B,R),p.proxy)return p;if(w=Ji(),p.proxy=w,w.src=l,w.listener=p,l.addEventListener)ct||(S=B),S===void 0&&(S=!1),l.addEventListener(d.toString(),w,S);else if(l.attachEvent)l.attachEvent(ws(d.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Ji(){function l(p){return d.call(l.src,l.listener,p)}const d=Zi;return l}function wr(l,d,p,w,S){if(Array.isArray(d))for(var R=0;R<d.length;R++)wr(l,d[R],p,w,S);else w=h(w)?!!w.capture:!!w,p=bs(p),l&&l[jt]?(l=l.i,d=String(d).toString(),d in l.g&&(R=l.g[d],p=gr(R,p,w,S),-1<p&&(_t(R[p]),Array.prototype.splice.call(R,p,1),R.length==0&&(delete l.g[d],l.h--)))):l&&(l=br(l))&&(d=l.g[d.toString()],l=-1,d&&(l=gr(d,p,w,S)),(p=-1<l?d[l]:null)&&Vn(p))}function Vn(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[jt])pr(d.i,l);else{var p=l.type,w=l.proxy;d.removeEventListener?d.removeEventListener(p,w,l.capture):d.detachEvent?d.detachEvent(ws(p),w):d.addListener&&d.removeListener&&d.removeListener(w),(p=br(d))?(pr(p,l),p.h==0&&(p.src=null,d[xr]=null)):_t(l)}}}function ws(l){return l in Dn?Dn[l]:Dn[l]="on"+l}function Zi(l,d){if(l.da)l=!0;else{d=new ut(d,this);var p=l.listener,w=l.ha||l.src;l.fa&&Vn(l),l=p.call(w,d)}return l}function br(l){return l=l[xr],l instanceof Mt?l:null}var vr="__closure_events_fn_"+(1e9*Math.random()>>>0);function bs(l){return typeof l=="function"?l:(l[vr]||(l[vr]=function(d){return l.handleEvent(d)}),l[vr])}function D(){Ve.call(this),this.i=new Mt(this),this.M=this,this.F=null}_(D,Ve),D.prototype[jt]=!0,D.prototype.removeEventListener=function(l,d,p,w){wr(this,l,d,p,w)};function q(l,d){var p,w=l.F;if(w)for(p=[];w;w=w.F)p.push(w);if(l=l.M,w=d.type||d,typeof d=="string")d=new j(d,l);else if(d instanceof j)d.target=d.target||l;else{var S=d;d=new j(w,l),v(d,S)}if(S=!0,p)for(var R=p.length-1;0<=R;R--){var B=d.g=p[R];S=Y(B,w,!0,d)&&S}if(B=d.g=l,S=Y(B,w,!0,d)&&S,S=Y(B,w,!1,d)&&S,p)for(R=0;R<p.length;R++)B=d.g=p[R],S=Y(B,w,!1,d)&&S}D.prototype.N=function(){if(D.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var p=l.g[d],w=0;w<p.length;w++)_t(p[w]);delete l.g[d],l.h--}}this.F=null},D.prototype.K=function(l,d,p,w){return this.i.add(String(l),d,!1,p,w)},D.prototype.L=function(l,d,p,w){return this.i.add(String(l),d,!0,p,w)};function Y(l,d,p,w){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var S=!0,R=0;R<d.length;++R){var B=d[R];if(B&&!B.da&&B.capture==p){var pe=B.listener,Fe=B.ha||B.src;B.fa&&pr(l.i,B),S=pe.call(Fe,w)!==!1&&S}}return S&&!w.defaultPrevented}function ae(l,d,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:c.setTimeout(l,d||0)}function me(l){l.g=ae(()=>{l.g=null,l.i&&(l.i=!1,me(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class ht extends Ve{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:me(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dt(l){Ve.call(this),this.h=l,this.g={}}_(dt,Ve);var yt=[];function Wt(l){O(l.g,function(d,p){this.g.hasOwnProperty(p)&&Vn(d)},l),l.g={}}dt.prototype.N=function(){dt.aa.N.call(this),Wt(this)},dt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lt=c.JSON.stringify,Xe=c.JSON.parse,Yt=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function mt(){}mt.prototype.h=null;function Sl(l){return l.h||(l.h=l.i())}function Cl(){}var _r={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function eo(){j.call(this,"d")}_(eo,j);function to(){j.call(this,"c")}_(to,j);var vn={},Pl=null;function vs(){return Pl=Pl||new D}vn.La="serverreachability";function Rl(l){j.call(this,vn.La,l)}_(Rl,j);function Er(l){const d=vs();q(d,new Rl(d))}vn.STAT_EVENT="statevent";function Dl(l,d){j.call(this,vn.STAT_EVENT,l),this.stat=d}_(Dl,j);function Je(l){const d=vs();q(d,new Dl(d,l))}vn.Ma="timingevent";function Vl(l,d){j.call(this,vn.Ma,l),this.size=d}_(Vl,j);function Nr(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},d)}function Tr(){this.g=!0}Tr.prototype.xa=function(){this.g=!1};function Nf(l,d,p,w,S,R){l.info(function(){if(l.g)if(R)for(var B="",pe=R.split("&"),Fe=0;Fe<pe.length;Fe++){var he=pe[Fe].split("=");if(1<he.length){var $e=he[0];he=he[1];var He=$e.split("_");B=2<=He.length&&He[1]=="type"?B+($e+"="+he+"&"):B+($e+"=redacted&")}}else B=null;else B=R;return"XMLHTTP REQ ("+w+") [attempt "+S+"]: "+d+`
`+p+`
`+B})}function Tf(l,d,p,w,S,R,B){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+S+"]: "+d+`
`+p+`
`+R+" "+B})}function On(l,d,p,w){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+If(l,p)+(w?" "+w:"")})}function jf(l,d){l.info(function(){return"TIMEOUT: "+d})}Tr.prototype.info=function(){};function If(l,d){if(!l.g)return d;if(!d)return null;try{var p=JSON.parse(d);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var w=p[l];if(!(2>w.length)){var S=w[1];if(Array.isArray(S)&&!(1>S.length)){var R=S[0];if(R!="noop"&&R!="stop"&&R!="close")for(var B=1;B<S.length;B++)S[B]=""}}}}return Lt(p)}catch{return d}}var _s={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ol={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},no;function Es(){}_(Es,mt),Es.prototype.g=function(){return new XMLHttpRequest},Es.prototype.i=function(){return{}},no=new Es;function Xt(l,d,p,w){this.j=l,this.i=d,this.l=p,this.R=w||1,this.U=new dt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ml}function Ml(){this.i=null,this.g="",this.h=!1}var Ll={},ro={};function so(l,d,p){l.L=1,l.v=Is(Ft(d)),l.m=p,l.P=!0,Fl(l,null)}function Fl(l,d){l.F=Date.now(),Ns(l),l.A=Ft(l.v);var p=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),Zl(p.i,"t",w),l.C=0,p=l.j.J,l.h=new Ml,l.g=xc(l.j,p?d:null,!l.m),0<l.O&&(l.M=new ht(g(l.Y,l,l.g),l.O)),d=l.U,p=l.g,w=l.ca;var S="readystatechange";Array.isArray(S)||(S&&(yt[0]=S.toString()),S=yt);for(var R=0;R<S.length;R++){var B=yr(p,S[R],w||d.handleEvent,!1,d.h||d);if(!B)break;d.g[B.key]=B}d=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),Er(),Nf(l.i,l.u,l.A,l.l,l.R,l.m)}Xt.prototype.ca=function(l){l=l.target;const d=this.M;d&&qt(l)==3?d.j():this.Y(l)},Xt.prototype.Y=function(l){try{if(l==this.g)e:{const He=qt(this.g);var d=this.g.Ba();const Fn=this.g.Z();if(!(3>He)&&(He!=3||this.g&&(this.h.h||this.g.oa()||oc(this.g)))){this.J||He!=4||d==7||(d==8||0>=Fn?Er(3):Er(2)),io(this);var p=this.g.Z();this.X=p;t:if(ql(this)){var w=oc(this.g);l="";var S=w.length,R=qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_n(this),jr(this);var B="";break t}this.h.i=new c.TextDecoder}for(d=0;d<S;d++)this.h.h=!0,l+=this.h.i.decode(w[d],{stream:!(R&&d==S-1)});w.length=0,this.h.g+=l,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=p==200,Tf(this.i,this.u,this.A,this.l,this.R,He,p),this.o){if(this.T&&!this.K){t:{if(this.g){var pe,Fe=this.g;if((pe=Fe.g?Fe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(pe)){var he=pe;break t}}he=null}if(p=he)On(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oo(this,p);else{this.o=!1,this.s=3,Je(12),_n(this),jr(this);break e}}if(this.P){p=!0;let Et;for(;!this.J&&this.C<B.length;)if(Et=Af(this,B),Et==ro){He==4&&(this.s=4,Je(14),p=!1),On(this.i,this.l,null,"[Incomplete Response]");break}else if(Et==Ll){this.s=4,Je(15),On(this.i,this.l,B,"[Invalid Chunk]"),p=!1;break}else On(this.i,this.l,Et,null),oo(this,Et);if(ql(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),He!=4||B.length!=0||this.h.h||(this.s=1,Je(16),p=!1),this.o=this.o&&p,!p)On(this.i,this.l,B,"[Invalid Chunked Response]"),_n(this),jr(this);else if(0<B.length&&!this.W){this.W=!0;var $e=this.j;$e.g==this&&$e.ba&&!$e.M&&($e.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),mo($e),$e.M=!0,Je(11))}}else On(this.i,this.l,B,null),oo(this,B);He==4&&_n(this),this.o&&!this.J&&(He==4?mc(this.j,this):(this.o=!1,Ns(this)))}else Hf(this.g),p==400&&0<B.indexOf("Unknown SID")?(this.s=3,Je(12)):(this.s=0,Je(13)),_n(this),jr(this)}}}catch{}finally{}};function ql(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Af(l,d){var p=l.C,w=d.indexOf(`
`,p);return w==-1?ro:(p=Number(d.substring(p,w)),isNaN(p)?Ll:(w+=1,w+p>d.length?ro:(d=d.slice(w,w+p),l.C=w+p,d)))}Xt.prototype.cancel=function(){this.J=!0,_n(this)};function Ns(l){l.S=Date.now()+l.I,zl(l,l.I)}function zl(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Nr(g(l.ba,l),d)}function io(l){l.B&&(c.clearTimeout(l.B),l.B=null)}Xt.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(jf(this.i,this.A),this.L!=2&&(Er(),Je(17)),_n(this),this.s=2,jr(this)):zl(this,this.S-l)};function jr(l){l.j.G==0||l.J||mc(l.j,l)}function _n(l){io(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,Wt(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function oo(l,d){try{var p=l.j;if(p.G!=0&&(p.g==l||ao(p.h,l))){if(!l.K&&ao(p.h,l)&&p.G==3){try{var w=p.Da.g.parse(d)}catch{w=null}if(Array.isArray(w)&&w.length==3){var S=w;if(S[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Rs(p),Cs(p);else break e;ho(p),Je(18)}}else p.za=S[1],0<p.za-p.T&&37500>S[2]&&p.F&&p.v==0&&!p.C&&(p.C=Nr(g(p.Za,p),6e3));if(1>=$l(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Nn(p,11)}else if((l.K||p.g==l)&&Rs(p),!V(d))for(S=p.Da.g.parse(d),d=0;d<S.length;d++){let he=S[d];if(p.T=he[0],he=he[1],p.G==2)if(he[0]=="c"){p.K=he[1],p.ia=he[2];const $e=he[3];$e!=null&&(p.la=$e,p.j.info("VER="+p.la));const He=he[4];He!=null&&(p.Aa=He,p.j.info("SVER="+p.Aa));const Fn=he[5];Fn!=null&&typeof Fn=="number"&&0<Fn&&(w=1.5*Fn,p.L=w,p.j.info("backChannelRequestTimeoutMs_="+w)),w=p;const Et=l.g;if(Et){const Vs=Et.g?Et.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vs){var R=w.h;R.g||Vs.indexOf("spdy")==-1&&Vs.indexOf("quic")==-1&&Vs.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(lo(R,R.h),R.h=null))}if(w.D){const fo=Et.g?Et.g.getResponseHeader("X-HTTP-Session-Id"):null;fo&&(w.ya=fo,ye(w.I,w.D,fo))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),w=p;var B=l;if(w.qa=gc(w,w.J?w.ia:null,w.W),B.K){Hl(w.h,B);var pe=B,Fe=w.L;Fe&&(pe.I=Fe),pe.B&&(io(pe),Ns(pe)),w.g=B}else hc(w);0<p.i.length&&Ps(p)}else he[0]!="stop"&&he[0]!="close"||Nn(p,7);else p.G==3&&(he[0]=="stop"||he[0]=="close"?he[0]=="stop"?Nn(p,7):uo(p):he[0]!="noop"&&p.l&&p.l.ta(he),p.v=0)}}Er(4)}catch{}}var kf=class{constructor(l,d){this.g=l,this.map=d}};function Bl(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ul(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function $l(l){return l.h?1:l.g?l.g.size:0}function ao(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function lo(l,d){l.g?l.g.add(d):l.h=d}function Hl(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}Bl.prototype.cancel=function(){if(this.i=Gl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Gl(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const p of l.g.values())d=d.concat(p.D);return d}return k(l.i)}function Sf(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var d=[],p=l.length,w=0;w<p;w++)d.push(l[w]);return d}d=[],p=0;for(w in l)d[p++]=l[w];return d}function Cf(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var d=[];l=l.length;for(var p=0;p<l;p++)d.push(p);return d}d=[],p=0;for(const w in l)d[p++]=w;return d}}}function Ql(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var p=Cf(l),w=Sf(l),S=w.length,R=0;R<S;R++)d.call(void 0,w[R],p&&p[R],l)}var Kl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pf(l,d){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var w=l[p].indexOf("="),S=null;if(0<=w){var R=l[p].substring(0,w);S=l[p].substring(w+1)}else R=l[p];d(R,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function En(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof En){this.h=l.h,Ts(this,l.j),this.o=l.o,this.g=l.g,js(this,l.s),this.l=l.l;var d=l.i,p=new kr;p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),Wl(this,p),this.m=l.m}else l&&(d=String(l).match(Kl))?(this.h=!1,Ts(this,d[1]||"",!0),this.o=Ir(d[2]||""),this.g=Ir(d[3]||"",!0),js(this,d[4]),this.l=Ir(d[5]||"",!0),Wl(this,d[6]||"",!0),this.m=Ir(d[7]||"")):(this.h=!1,this.i=new kr(null,this.h))}En.prototype.toString=function(){var l=[],d=this.j;d&&l.push(Ar(d,Yl,!0),":");var p=this.g;return(p||d=="file")&&(l.push("//"),(d=this.o)&&l.push(Ar(d,Yl,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Ar(p,p.charAt(0)=="/"?Vf:Df,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Ar(p,Mf)),l.join("")};function Ft(l){return new En(l)}function Ts(l,d,p){l.j=p?Ir(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function js(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function Wl(l,d,p){d instanceof kr?(l.i=d,Lf(l.i,l.h)):(p||(d=Ar(d,Of)),l.i=new kr(d,l.h))}function ye(l,d,p){l.i.set(d,p)}function Is(l){return ye(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ir(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ar(l,d,p){return typeof l=="string"?(l=encodeURI(l).replace(d,Rf),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Rf(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Yl=/[#\/\?@]/g,Df=/[#\?:]/g,Vf=/[#\?]/g,Of=/[#\?@]/g,Mf=/#/g;function kr(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function Jt(l){l.g||(l.g=new Map,l.h=0,l.i&&Pf(l.i,function(d,p){l.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}t=kr.prototype,t.add=function(l,d){Jt(this),this.i=null,l=Mn(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(d),this.h+=1,this};function Xl(l,d){Jt(l),d=Mn(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function Jl(l,d){return Jt(l),d=Mn(l,d),l.g.has(d)}t.forEach=function(l,d){Jt(this),this.g.forEach(function(p,w){p.forEach(function(S){l.call(d,S,w,this)},this)},this)},t.na=function(){Jt(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),p=[];for(let w=0;w<d.length;w++){const S=l[w];for(let R=0;R<S.length;R++)p.push(d[w])}return p},t.V=function(l){Jt(this);let d=[];if(typeof l=="string")Jl(this,l)&&(d=d.concat(this.g.get(Mn(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)d=d.concat(l[p])}return d},t.set=function(l,d){return Jt(this),this.i=null,l=Mn(this,l),Jl(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},t.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Zl(l,d,p){Xl(l,d),0<p.length&&(l.i=null,l.g.set(Mn(l,d),k(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var p=0;p<d.length;p++){var w=d[p];const R=encodeURIComponent(String(w)),B=this.V(w);for(w=0;w<B.length;w++){var S=R;B[w]!==""&&(S+="="+encodeURIComponent(String(B[w]))),l.push(S)}}return this.i=l.join("&")};function Mn(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function Lf(l,d){d&&!l.j&&(Jt(l),l.i=null,l.g.forEach(function(p,w){var S=w.toLowerCase();w!=S&&(Xl(this,w),Zl(this,S,p))},l)),l.j=d}function Ff(l,d){const p=new Tr;if(c.Image){const w=new Image;w.onload=x(Zt,p,"TestLoadImage: loaded",!0,d,w),w.onerror=x(Zt,p,"TestLoadImage: error",!1,d,w),w.onabort=x(Zt,p,"TestLoadImage: abort",!1,d,w),w.ontimeout=x(Zt,p,"TestLoadImage: timeout",!1,d,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else d(!1)}function qf(l,d){const p=new Tr,w=new AbortController,S=setTimeout(()=>{w.abort(),Zt(p,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:w.signal}).then(R=>{clearTimeout(S),R.ok?Zt(p,"TestPingServer: ok",!0,d):Zt(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(S),Zt(p,"TestPingServer: error",!1,d)})}function Zt(l,d,p,w,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),w(p)}catch{}}function zf(){this.g=new Yt}function Bf(l,d,p){const w=p||"";try{Ql(l,function(S,R){let B=S;h(S)&&(B=Lt(S)),d.push(w+R+"="+encodeURIComponent(B))})}catch(S){throw d.push(w+"type="+encodeURIComponent("_badmap")),S}}function As(l){this.l=l.Ub||null,this.j=l.eb||!1}_(As,mt),As.prototype.g=function(){return new ks(this.l,this.j)},As.prototype.i=function(l){return function(){return l}}({});function ks(l,d){D.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(ks,D),t=ks.prototype,t.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,Cr(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||c).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sr(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Cr(this)),this.g&&(this.readyState=3,Cr(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ec(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function ec(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?Sr(this):Cr(this),this.readyState==3&&ec(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Sr(this))},t.Qa=function(l){this.g&&(this.response=l,Sr(this))},t.ga=function(){this.g&&Sr(this)};function Sr(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Cr(l)}t.setRequestHeader=function(l,d){this.u.append(l,d)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=d.next();return l.join(`\r
`)};function Cr(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ks.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function tc(l){let d="";return O(l,function(p,w){d+=w,d+=":",d+=p,d+=`\r
`}),d}function co(l,d,p){e:{for(w in p){var w=!1;break e}w=!0}w||(p=tc(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):ye(l,d,p))}function Te(l){D.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Te,D);var Uf=/^https?$/i,$f=["POST","PUT"];t=Te.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,d,p,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():no.g(),this.v=this.o?Sl(this.o):Sl(no),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(R){nc(this,R);return}if(l=p||"",p=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var S in w)p.set(S,w[S]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const R of w.keys())p.set(R,w.get(R));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(p.keys()).find(R=>R.toLowerCase()=="content-type"),S=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call($f,d,void 0))||w||S||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[R,B]of p)this.g.setRequestHeader(R,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ic(this),this.u=!0,this.g.send(l),this.u=!1}catch(R){nc(this,R)}};function nc(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,rc(l),Ss(l)}function rc(l){l.A||(l.A=!0,q(l,"complete"),q(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,q(this,"complete"),q(this,"abort"),Ss(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ss(this,!0)),Te.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?sc(this):this.bb())},t.bb=function(){sc(this)};function sc(l){if(l.h&&typeof a<"u"&&(!l.v[1]||qt(l)!=4||l.Z()!=2)){if(l.u&&qt(l)==4)ae(l.Ea,0,l);else if(q(l,"readystatechange"),qt(l)==4){l.h=!1;try{const B=l.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var w;if(w=B===0){var S=String(l.D).match(Kl)[1]||null;!S&&c.self&&c.self.location&&(S=c.self.location.protocol.slice(0,-1)),w=!Uf.test(S?S.toLowerCase():"")}p=w}if(p)q(l,"complete"),q(l,"success");else{l.m=6;try{var R=2<qt(l)?l.g.statusText:""}catch{R=""}l.l=R+" ["+l.Z()+"]",rc(l)}}finally{Ss(l)}}}}function Ss(l,d){if(l.g){ic(l);const p=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||q(l,"ready");try{p.onreadystatechange=w}catch{}}}function ic(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function qt(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),Xe(d)}};function oc(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Hf(l){const d={};l=(l.g&&2<=qt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(V(l[w]))continue;var p=N(l[w]);const S=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const R=d[S]||[];d[S]=R,R.push(p)}I(d,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pr(l,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||d}function ac(l){this.Aa=0,this.i=[],this.j=new Tr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Pr("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Pr("baseRetryDelayMs",5e3,l),this.cb=Pr("retryDelaySeedMs",1e4,l),this.Wa=Pr("forwardChannelMaxRetries",2,l),this.wa=Pr("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Bl(l&&l.concurrentRequestLimit),this.Da=new zf,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ac.prototype,t.la=8,t.G=1,t.connect=function(l,d,p,w){Je(0),this.W=l,this.H=d||{},p&&w!==void 0&&(this.H.OSID=p,this.H.OAID=w),this.F=this.X,this.I=gc(this,null,this.W),Ps(this)};function uo(l){if(lc(l),l.G==3){var d=l.U++,p=Ft(l.I);if(ye(p,"SID",l.K),ye(p,"RID",d),ye(p,"TYPE","terminate"),Rr(l,p),d=new Xt(l,l.j,d),d.L=2,d.v=Is(Ft(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(d.v.toString(),"")}catch{}!p&&c.Image&&(new Image().src=d.v,p=!0),p||(d.g=xc(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ns(d)}pc(l)}function Cs(l){l.g&&(mo(l),l.g.cancel(),l.g=null)}function lc(l){Cs(l),l.u&&(c.clearTimeout(l.u),l.u=null),Rs(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function Ps(l){if(!Ul(l.h)&&!l.s){l.s=!0;var d=l.Ga;be||A(),Le||(be(),Le=!0),at.add(d,l),l.B=0}}function Gf(l,d){return $l(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Nr(g(l.Ga,l,d),fc(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const S=new Xt(this,this.j,l);let R=this.o;if(this.S&&(R?(R=y(R),v(R,this.S)):R=this.S),this.m!==null||this.O||(S.H=R,R=null),this.P)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var w=this.i[p];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(d+=w,4096<d){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=uc(this,S,d),p=Ft(this.I),ye(p,"RID",l),ye(p,"CVER",22),this.D&&ye(p,"X-HTTP-Session-Id",this.D),Rr(this,p),R&&(this.O?d="headers="+encodeURIComponent(String(tc(R)))+"&"+d:this.m&&co(p,this.m,R)),lo(this.h,S),this.Ua&&ye(p,"TYPE","init"),this.P?(ye(p,"$req",d),ye(p,"SID","null"),S.T=!0,so(S,p,null)):so(S,p,d),this.G=2}}else this.G==3&&(l?cc(this,l):this.i.length==0||Ul(this.h)||cc(this))};function cc(l,d){var p;d?p=d.l:p=l.U++;const w=Ft(l.I);ye(w,"SID",l.K),ye(w,"RID",p),ye(w,"AID",l.T),Rr(l,w),l.m&&l.o&&co(w,l.m,l.o),p=new Xt(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),d&&(l.i=d.D.concat(l.i)),d=uc(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),lo(l.h,p),so(p,w,d)}function Rr(l,d){l.H&&O(l.H,function(p,w){ye(d,w,p)}),l.l&&Ql({},function(p,w){ye(d,w,p)})}function uc(l,d,p){p=Math.min(l.i.length,p);var w=l.l?g(l.l.Na,l.l,l):null;e:{var S=l.i;let R=-1;for(;;){const B=["count="+p];R==-1?0<p?(R=S[0].g,B.push("ofs="+R)):R=0:B.push("ofs="+R);let pe=!0;for(let Fe=0;Fe<p;Fe++){let he=S[Fe].g;const $e=S[Fe].map;if(he-=R,0>he)R=Math.max(0,S[Fe].g-100),pe=!1;else try{Bf($e,B,"req"+he+"_")}catch{w&&w($e)}}if(pe){w=B.join("&");break e}}}return l=l.i.splice(0,p),d.D=l,w}function hc(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;be||A(),Le||(be(),Le=!0),at.add(d,l),l.v=0}}function ho(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Nr(g(l.Fa,l),fc(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,dc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Nr(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Je(10),Cs(this),dc(this))};function mo(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function dc(l){l.g=new Xt(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=Ft(l.qa);ye(d,"RID","rpc"),ye(d,"SID",l.K),ye(d,"AID",l.T),ye(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&ye(d,"TO",l.ja),ye(d,"TYPE","xmlhttp"),Rr(l,d),l.m&&l.o&&co(d,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=Is(Ft(d)),p.m=null,p.P=!0,Fl(p,l)}t.Za=function(){this.C!=null&&(this.C=null,Cs(this),ho(this),Je(19))};function Rs(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function mc(l,d){var p=null;if(l.g==d){Rs(l),mo(l),l.g=null;var w=2}else if(ao(l.h,d))p=d.D,Hl(l.h,d),w=1;else return;if(l.G!=0){if(d.o)if(w==1){p=d.m?d.m.length:0,d=Date.now()-d.F;var S=l.B;w=vs(),q(w,new Vl(w,p)),Ps(l)}else hc(l);else if(S=d.s,S==3||S==0&&0<d.X||!(w==1&&Gf(l,d)||w==2&&ho(l)))switch(p&&0<p.length&&(d=l.h,d.i=d.i.concat(p)),S){case 1:Nn(l,5);break;case 4:Nn(l,10);break;case 3:Nn(l,6);break;default:Nn(l,2)}}}function fc(l,d){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*d}function Nn(l,d){if(l.j.info("Error code "+d),d==2){var p=g(l.fb,l),w=l.Xa;const S=!w;w=new En(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ts(w,"https"),Is(w),S?Ff(w.toString(),p):qf(w.toString(),p)}else Je(2);l.G=0,l.l&&l.l.sa(d),pc(l),lc(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Je(2)):(this.j.info("Failed to ping google.com"),Je(1))};function pc(l){if(l.G=0,l.ka=[],l.l){const d=Gl(l.h);(d.length!=0||l.i.length!=0)&&(P(l.ka,d),P(l.ka,l.i),l.h.i.length=0,k(l.i),l.i.length=0),l.l.ra()}}function gc(l,d,p){var w=p instanceof En?Ft(p):new En(p);if(w.g!="")d&&(w.g=d+"."+w.g),js(w,w.s);else{var S=c.location;w=S.protocol,d=d?d+"."+S.hostname:S.hostname,S=+S.port;var R=new En(null);w&&Ts(R,w),d&&(R.g=d),S&&js(R,S),p&&(R.l=p),w=R}return p=l.D,d=l.ya,p&&d&&ye(w,p,d),ye(w,"VER",l.la),Rr(l,w),w}function xc(l,d,p){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new Te(new As({eb:p})):new Te(l.pa),d.Ha(l.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function yc(){}t=yc.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ds(){}Ds.prototype.g=function(l,d){return new ft(l,d)};function ft(l,d){D.call(this),this.g=new ac(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!V(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!V(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new Ln(this)}_(ft,D),ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ft.prototype.close=function(){uo(this.g)},ft.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=Lt(l),l=p);d.i.push(new kf(d.Ya++,l)),d.G==3&&Ps(d)},ft.prototype.N=function(){this.g.l=null,delete this.j,uo(this.g),delete this.g,ft.aa.N.call(this)};function wc(l){eo.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const p in d){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}_(wc,eo);function bc(){to.call(this),this.status=1}_(bc,to);function Ln(l){this.g=l}_(Ln,yc),Ln.prototype.ua=function(){q(this.g,"a")},Ln.prototype.ta=function(l){q(this.g,new wc(l))},Ln.prototype.sa=function(l){q(this.g,new bc)},Ln.prototype.ra=function(){q(this.g,"b")},Ds.prototype.createWebChannel=Ds.prototype.g,ft.prototype.send=ft.prototype.o,ft.prototype.open=ft.prototype.m,ft.prototype.close=ft.prototype.close,od=function(){return new Ds},id=function(){return vs()},sd=vn,Xo={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_s.NO_ERROR=0,_s.TIMEOUT=8,_s.HTTP_ERROR=6,Ws=_s,Ol.COMPLETE="complete",rd=Ol,Cl.EventType=_r,_r.OPEN="a",_r.CLOSE="b",_r.ERROR="c",_r.MESSAGE="d",D.prototype.listen=D.prototype.K,Lr=Cl,Te.prototype.listenOnce=Te.prototype.L,Te.prototype.getLastError=Te.prototype.Ka,Te.prototype.getLastErrorCode=Te.prototype.Ba,Te.prototype.getStatus=Te.prototype.Z,Te.prototype.getResponseJson=Te.prototype.Oa,Te.prototype.getResponseText=Te.prototype.oa,Te.prototype.send=Te.prototype.ea,Te.prototype.setWithCredentials=Te.prototype.Ha,nd=Te}).apply(typeof Ms<"u"?Ms:typeof self<"u"?self:typeof window<"u"?window:{});const Uc="@firebase/firestore",$c="4.7.14";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ke.UNAUTHENTICATED=new Ke(null),Ke.GOOGLE_CREDENTIALS=new Ke("google-credentials-uid"),Ke.FIRST_PARTY=new Ke("first-party-uid"),Ke.MOCK_USER=new Ke("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lr="11.7.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kn=new Wh("@firebase/firestore");function Bn(){return kn.logLevel}function H(t,...e){if(kn.logLevel<=ue.DEBUG){const n=e.map(Va);kn.debug(`Firestore (${lr}): ${t}`,...n)}}function Gt(t,...e){if(kn.logLevel<=ue.ERROR){const n=e.map(Va);kn.error(`Firestore (${lr}): ${t}`,...n)}}function Zn(t,...e){if(kn.logLevel<=ue.WARN){const n=e.map(Va);kn.warn(`Firestore (${lr}): ${t}`,...n)}}function Va(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,ad(t,r,n)}function ad(t,e,n){let r=`FIRESTORE (${lr}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Gt(r),new Error(r)}function fe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||ad(e,s,r)}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends ar{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $x{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ke.UNAUTHENTICATED))}shutdown(){}}class Hx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Gx{constructor(e){this.t=e,this.currentUser=Ke.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){fe(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new $t;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new $t,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new $t)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string",31837,{l:r}),new ld(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string",2055,{h:e}),new Ke(e)}}class Qx{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ke.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Kx{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Qx(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ke.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Hc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Wx{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ix(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){fe(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Hc(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Hc(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Yx(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function Jo(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return oe(r,s);{const i=cd(),a=Xx(i.encode(Gc(t,n)),i.encode(Gc(e,n)));return a!==0?a:oe(r,s)}}n+=r>65535?2:1}return oe(t.length,e.length)}function Gc(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Xx(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return oe(t[n],e[n]);return oe(t.length,e.length)}function er(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qc=-62135596800,Kc=1e6;class Re{static now(){return Re.fromMillis(Date.now())}static fromDate(e){return Re.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Kc);return new Re(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Qc)throw new G(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Kc}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Qc;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{static fromTimestamp(e){return new J(e)}static min(){return new J(new Re(0,0))}static max(){return new J(new Re(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc="__name__";class kt{constructor(e,n,r){n===void 0?n=0:n>e.length&&W(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&W(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return kt.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof kt?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=kt.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return oe(e.length,n.length)}static compareSegments(e,n){const r=kt.isNumericId(e),s=kt.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?kt.extractNumericId(e).compare(kt.extractNumericId(n)):Jo(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return on.fromString(e.substring(4,e.length-2))}}class ve extends kt{construct(e,n,r){return new ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ve(n)}static emptyPath(){return new ve([])}}const Jx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Be extends kt{construct(e,n,r){return new Be(e,n,r)}static isValidIdentifier(e){return Jx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Be.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Wc}static keyField(){return new Be([Wc])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new G(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(i(),s++)}if(i(),a)throw new G(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Be(n)}static emptyPath(){return new Be([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(ve.fromString(e))}static fromName(e){return new K(ve.fromString(e).popFirst(5))}static empty(){return new K(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new ve(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es=-1;function Zx(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=J.fromTimestamp(r===1e9?new Re(n+1,0):new Re(n,r));return new cn(s,K.empty(),e)}function ey(t){return new cn(t.readTime,t.key,es)}class cn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new cn(J.min(),K.empty(),es)}static max(){return new cn(J.max(),K.empty(),es)}}function ty(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ry{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cr(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==ny)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&W(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,a=!1;e.forEach(c=>{++s,c.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,a=new Array(i);let c=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(m=>{a[h]=m,++c,c===i&&r(a)},m=>s(m))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function sy(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ur(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Ii.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=-1;function Ai(t){return t==null}function hi(t){return t===0&&1/t==-1/0}function iy(t){return typeof t=="number"&&Number.isInteger(t)&&!hi(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd="";function oy(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Yc(e)),e=ay(t.get(n),e);return Yc(e)}function ay(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case hd:n+="";break;default:n+=i}}return n}function Yc(t){return t+hd+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function xn(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function dd(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e,n){this.comparator=e,this.root=n||ze.EMPTY}insert(e,n){return new Ee(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ze.BLACK,null,null))}remove(e){return new Ee(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ze.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ls(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ls(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ls(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ls(this.root,e,this.comparator,!0)}}class Ls{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ze{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ze.RED,this.left=s??ze.EMPTY,this.right=i??ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ze(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ze.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ze.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw W(43730,{key:this.key,value:this.value});if(this.right.isRed())throw W(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw W(27949);return e+(this.isRed()?0:1)}}ze.EMPTY=null,ze.RED=!0,ze.BLACK=!1;ze.EMPTY=new class{constructor(){this.size=0}get key(){throw W(57766)}get value(){throw W(16141)}get color(){throw W(16727)}get left(){throw W(29726)}get right(){throw W(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new ze(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.comparator=e,this.data=new Ee(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Jc(this.data.getIterator())}getIteratorFrom(e){return new Jc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof De)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new De(this.comparator);return n.data=e,n}}class Jc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.fields=e,e.sort(Be.comparator)}static empty(){return new gt([])}unionWith(e){let n=new De(Be.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new gt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return er(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new md("Invalid base64 string: "+i):i}}(e);return new Ue(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Ue(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ue.EMPTY_BYTE_STRING=new Ue("");const ly=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function un(t){if(fe(!!t,39018),typeof t=="string"){let e=0;const n=ly.exec(t);if(fe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(t.seconds),nanos:je(t.nanos)}}function je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function hn(t){return typeof t=="string"?Ue.fromBase64String(t):Ue.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd="server_timestamp",pd="__type__",gd="__previous_value__",xd="__local_write_time__";function Ma(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[pd])===null||n===void 0?void 0:n.stringValue)===fd}function ki(t){const e=t.mapValue.fields[gd];return Ma(e)?ki(e):e}function ts(t){const e=un(t.mapValue.fields[xd].timestampValue);return new Re(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,n,r,s,i,a,c,u,h,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=m}}const di="(default)";class ns{constructor(e,n){this.projectId=e,this.database=n||di}static empty(){return new ns("","")}get isDefaultDatabase(){return this.database===di}isEqual(e){return e instanceof ns&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd="__type__",wd="__max__",Fs={mapValue:{fields:{__type__:{stringValue:wd}}}},bd="__vector__",mi="value";function dn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ma(t)?4:hy(t)?9007199254740991:uy(t)?10:11:W(28295,{value:t})}function Dt(t,e){if(t===e)return!0;const n=dn(t);if(n!==dn(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ts(t).isEqual(ts(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=un(s.timestampValue),c=un(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return hn(s.bytesValue).isEqual(hn(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return je(s.geoPointValue.latitude)===je(i.geoPointValue.latitude)&&je(s.geoPointValue.longitude)===je(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return je(s.integerValue)===je(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=je(s.doubleValue),c=je(i.doubleValue);return a===c?hi(a)===hi(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return er(t.arrayValue.values||[],e.arrayValue.values||[],Dt);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},c=i.mapValue.fields||{};if(Xc(a)!==Xc(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!Dt(a[u],c[u])))return!1;return!0}(t,e);default:return W(52216,{left:t})}}function rs(t,e){return(t.values||[]).find(n=>Dt(n,e))!==void 0}function tr(t,e){if(t===e)return 0;const n=dn(t),r=dn(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(i,a){const c=je(i.integerValue||i.doubleValue),u=je(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Zc(t.timestampValue,e.timestampValue);case 4:return Zc(ts(t),ts(e));case 5:return Jo(t.stringValue,e.stringValue);case 6:return function(i,a){const c=hn(i),u=hn(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),u=a.split("/");for(let h=0;h<c.length&&h<u.length;h++){const m=oe(c[h],u[h]);if(m!==0)return m}return oe(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const c=oe(je(i.latitude),je(a.latitude));return c!==0?c:oe(je(i.longitude),je(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return eu(t.arrayValue,e.arrayValue);case 10:return function(i,a){var c,u,h,m;const f=i.fields||{},g=a.fields||{},x=(c=f[mi])===null||c===void 0?void 0:c.arrayValue,_=(u=g[mi])===null||u===void 0?void 0:u.arrayValue,k=oe(((h=x==null?void 0:x.values)===null||h===void 0?void 0:h.length)||0,((m=_==null?void 0:_.values)===null||m===void 0?void 0:m.length)||0);return k!==0?k:eu(x,_)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Fs.mapValue&&a===Fs.mapValue)return 0;if(i===Fs.mapValue)return 1;if(a===Fs.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),h=a.fields||{},m=Object.keys(h);u.sort(),m.sort();for(let f=0;f<u.length&&f<m.length;++f){const g=Jo(u[f],m[f]);if(g!==0)return g;const x=tr(c[u[f]],h[m[f]]);if(x!==0)return x}return oe(u.length,m.length)}(t.mapValue,e.mapValue);default:throw W(23264,{Pe:n})}}function Zc(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);const n=un(t),r=un(e),s=oe(n.seconds,r.seconds);return s!==0?s:oe(n.nanos,r.nanos)}function eu(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=tr(n[s],r[s]);if(i)return i}return oe(n.length,r.length)}function nr(t){return Zo(t)}function Zo(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=un(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return hn(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Zo(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Zo(n.fields[a])}`;return s+"}"}(t.mapValue):W(61005,{value:t})}function Ys(t){switch(dn(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ki(t);return e?16+Ys(e):16;case 5:return 2*t.stringValue.length;case 6:return hn(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Ys(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return xn(r.fields,(i,a)=>{s+=i.length+Ys(a)}),s}(t.mapValue);default:throw W(13486,{value:t})}}function ea(t){return!!t&&"integerValue"in t}function La(t){return!!t&&"arrayValue"in t}function tu(t){return!!t&&"nullValue"in t}function nu(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xs(t){return!!t&&"mapValue"in t}function uy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[yd])===null||n===void 0?void 0:n.stringValue)===bd}function Ur(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return xn(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ur(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ur(t.arrayValue.values[n]);return e}return Object.assign({},t)}function hy(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===wd}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.value=e}static empty(){return new rt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Xs(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ur(n)}setAll(e){let n=Be.emptyPath(),r={},s=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}a?r[c.lastSegment()]=Ur(a):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Xs(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Dt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Xs(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){xn(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new rt(Ur(this.value))}}function vd(t){const e=[];return xn(t.fields,(n,r)=>{const s=new Be([n]);if(Xs(r)){const i=vd(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new gt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n,r,s,i,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new We(e,0,J.min(),J.min(),J.min(),rt.empty(),0)}static newFoundDocument(e,n,r,s){return new We(e,1,n,J.min(),r,s,0)}static newNoDocument(e,n){return new We(e,2,n,J.min(),J.min(),rt.empty(),0)}static newUnknownDocument(e,n){return new We(e,3,n,J.min(),J.min(),rt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof We&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new We(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,n){this.position=e,this.inclusive=n}}function ru(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=K.comparator(K.fromName(a.referenceValue),n.key):r=tr(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function su(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Dt(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n="asc"){this.field=e,this.dir=n}}function dy(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{}class Ce extends _d{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new fy(e,n,r):n==="array-contains"?new xy(e,r):n==="in"?new yy(e,r):n==="not-in"?new wy(e,r):n==="array-contains-any"?new by(e,r):new Ce(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new py(e,r):new gy(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(tr(n,this.value)):n!==null&&dn(this.value)===dn(n)&&this.matchesComparison(tr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return W(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vt extends _d{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Vt(e,n)}matches(e){return Ed(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Ed(t){return t.op==="and"}function Nd(t){return my(t)&&Ed(t)}function my(t){for(const e of t.filters)if(e instanceof Vt)return!1;return!0}function ta(t){if(t instanceof Ce)return t.field.canonicalString()+t.op.toString()+nr(t.value);if(Nd(t))return t.filters.map(e=>ta(e)).join(",");{const e=t.filters.map(n=>ta(n)).join(",");return`${t.op}(${e})`}}function Td(t,e){return t instanceof Ce?function(r,s){return s instanceof Ce&&r.op===s.op&&r.field.isEqual(s.field)&&Dt(r.value,s.value)}(t,e):t instanceof Vt?function(r,s){return s instanceof Vt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,c)=>i&&Td(a,s.filters[c]),!0):!1}(t,e):void W(19439)}function jd(t){return t instanceof Ce?function(n){return`${n.field.canonicalString()} ${n.op} ${nr(n.value)}`}(t):t instanceof Vt?function(n){return n.op.toString()+" {"+n.getFilters().map(jd).join(" ,")+"}"}(t):"Filter"}class fy extends Ce{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class py extends Ce{constructor(e,n){super(e,"in",n),this.keys=Id("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class gy extends Ce{constructor(e,n){super(e,"not-in",n),this.keys=Id("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Id(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class xy extends Ce{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return La(n)&&rs(n.arrayValue,this.value)}}class yy extends Ce{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&rs(this.value.arrayValue,n)}}class wy extends Ce{constructor(e,n){super(e,"not-in",n)}matches(e){if(rs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!rs(this.value.arrayValue,n)}}class by extends Ce{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!La(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>rs(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,n=null,r=[],s=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=c,this.Ie=null}}function iu(t,e=null,n=[],r=[],s=null,i=null,a=null){return new vy(t,e,n,r,s,i,a)}function Fa(t){const e=Z(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ta(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ai(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>nr(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>nr(r)).join(",")),e.Ie=n}return e.Ie}function qa(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!dy(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Td(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!su(t.startAt,e.startAt)&&su(t.endAt,e.endAt)}function na(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n=null,r=[],s=[],i=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function _y(t,e,n,r,s,i,a,c){return new Si(t,e,n,r,s,i,a,c)}function za(t){return new Si(t)}function ou(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ey(t){return t.collectionGroup!==null}function $r(t){const e=Z(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new De(Be.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new pi(i,r))}),n.has(Be.keyField().canonicalString())||e.Ee.push(new pi(Be.keyField(),r))}return e.Ee}function Ct(t){const e=Z(t);return e.de||(e.de=Ny(e,$r(t))),e.de}function Ny(t,e){if(t.limitType==="F")return iu(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new pi(s.field,i)});const n=t.endAt?new fi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new fi(t.startAt.position,t.startAt.inclusive):null;return iu(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ra(t,e,n){return new Si(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ci(t,e){return qa(Ct(t),Ct(e))&&t.limitType===e.limitType}function Ad(t){return`${Fa(Ct(t))}|lt:${t.limitType}`}function Un(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>jd(s)).join(", ")}]`),Ai(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>nr(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>nr(s)).join(",")),`Target(${r})`}(Ct(t))}; limitType=${t.limitType})`}function Pi(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):K.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of $r(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,c,u){const h=ru(a,c,u);return a.inclusive?h<=0:h<0}(r.startAt,$r(r),s)||r.endAt&&!function(a,c,u){const h=ru(a,c,u);return a.inclusive?h>=0:h>0}(r.endAt,$r(r),s))}(t,e)}function Ty(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function kd(t){return(e,n)=>{let r=!1;for(const s of $r(t)){const i=jy(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function jy(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(i,a,c){const u=a.data.field(i),h=c.data.field(i);return u!==null&&h!==null?tr(u,h):W(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return W(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){xn(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return dd(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy=new Ee(K.comparator);function Qt(){return Iy}const Sd=new Ee(K.comparator);function Fr(...t){let e=Sd;for(const n of t)e=e.insert(n.key,n);return e}function Cd(t){let e=Sd;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function In(){return Hr()}function Pd(){return Hr()}function Hr(){return new Cn(t=>t.toString(),(t,e)=>t.isEqual(e))}const Ay=new Ee(K.comparator),ky=new De(K.comparator);function le(...t){let e=ky;for(const n of t)e=e.add(n);return e}const Sy=new De(oe);function Cy(){return Sy}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hi(e)?"-0":e}}function Rd(t){return{integerValue:""+t}}function Py(t,e){return iy(e)?Rd(e):Ba(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(){this._=void 0}}function Ry(t,e,n){return t instanceof gi?function(s,i){const a={fields:{[pd]:{stringValue:fd},[xd]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ma(i)&&(i=ki(i)),i&&(a.fields[gd]=i),{mapValue:a}}(n,e):t instanceof ss?Vd(t,e):t instanceof is?Od(t,e):function(s,i){const a=Dd(s,i),c=au(a)+au(s.Re);return ea(a)&&ea(s.Re)?Rd(c):Ba(s.serializer,c)}(t,e)}function Dy(t,e,n){return t instanceof ss?Vd(t,e):t instanceof is?Od(t,e):n}function Dd(t,e){return t instanceof xi?function(r){return ea(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class gi extends Ri{}class ss extends Ri{constructor(e){super(),this.elements=e}}function Vd(t,e){const n=Md(e);for(const r of t.elements)n.some(s=>Dt(s,r))||n.push(r);return{arrayValue:{values:n}}}class is extends Ri{constructor(e){super(),this.elements=e}}function Od(t,e){let n=Md(e);for(const r of t.elements)n=n.filter(s=>!Dt(s,r));return{arrayValue:{values:n}}}class xi extends Ri{constructor(e,n){super(),this.serializer=e,this.Re=n}}function au(t){return je(t.integerValue||t.doubleValue)}function Md(t){return La(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Vy(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ss&&s instanceof ss||r instanceof is&&s instanceof is?er(r.elements,s.elements,Dt):r instanceof xi&&s instanceof xi?Dt(r.Re,s.Re):r instanceof gi&&s instanceof gi}(t.transform,e.transform)}class Oy{constructor(e,n){this.version=e,this.transformResults=n}}class Ze{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ze}static exists(e){return new Ze(void 0,e)}static updateTime(e){return new Ze(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Js(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Di{}function Ld(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Vi(t.key,Ze.none()):new ls(t.key,t.data,Ze.none());{const n=t.data,r=rt.empty();let s=new De(Be.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new yn(t.key,r,new gt(s.toArray()),Ze.none())}}function My(t,e,n){t instanceof ls?function(s,i,a){const c=s.value.clone(),u=cu(s.fieldTransforms,i,a.transformResults);c.setAll(u),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof yn?function(s,i,a){if(!Js(s.precondition,i))return void i.convertToUnknownDocument(a.version);const c=cu(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(Fd(s)),u.setAll(c),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Gr(t,e,n,r){return t instanceof ls?function(i,a,c,u){if(!Js(i.precondition,a))return c;const h=i.value.clone(),m=uu(i.fieldTransforms,u,a);return h.setAll(m),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof yn?function(i,a,c,u){if(!Js(i.precondition,a))return c;const h=uu(i.fieldTransforms,u,a),m=a.data;return m.setAll(Fd(i)),m.setAll(h),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,a,c){return Js(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function Ly(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Dd(r.transform,s||null);i!=null&&(n===null&&(n=rt.empty()),n.set(r.field,i))}return n||null}function lu(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&er(r,s,(i,a)=>Vy(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ls extends Di{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class yn extends Di{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Fd(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function cu(t,e,n){const r=new Map;fe(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,c=e.data.field(i.field);r.set(i.field,Dy(a,c,n[s]))}return r}function uu(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,Ry(i,a,e))}return r}class Vi extends Di{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fy extends Di{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&My(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Gr(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Gr(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Pd();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=n.has(s.key)?null:c;const u=Ld(a,c);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&er(this.mutations,e.mutations,(n,r)=>lu(n,r))&&er(this.baseMutations,e.baseMutations,(n,r)=>lu(n,r))}}class Ua{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){fe(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return Ay}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Ua(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ie,ce;function Uy(t){switch(t){case F.OK:return W(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return W(15467,{code:t})}}function qd(t){if(t===void 0)return Gt("GRPC error has no .code"),F.UNKNOWN;switch(t){case Ie.OK:return F.OK;case Ie.CANCELLED:return F.CANCELLED;case Ie.UNKNOWN:return F.UNKNOWN;case Ie.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Ie.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Ie.INTERNAL:return F.INTERNAL;case Ie.UNAVAILABLE:return F.UNAVAILABLE;case Ie.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Ie.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Ie.NOT_FOUND:return F.NOT_FOUND;case Ie.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Ie.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Ie.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Ie.ABORTED:return F.ABORTED;case Ie.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Ie.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Ie.DATA_LOSS:return F.DATA_LOSS;default:return W(39323,{code:t})}}(ce=Ie||(Ie={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y=new on([4294967295,4294967295],0);function hu(t){const e=cd().encode(t),n=new td;return n.update(e),new Uint8Array(n.digest())}function du(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new on([n,r],0),new on([s,i],0)]}class $a{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new qr(`Invalid padding: ${n}`);if(r<0)throw new qr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qr(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new qr(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=on.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(on.fromNumber(r)));return s.compare($y)===1&&(s=new on([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=hu(e),[r,s]=du(n);for(let i=0;i<this.hashCount;i++){const a=this.we(r,s,i);if(!this.be(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new $a(i,s,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.pe===0)return;const n=hu(e),[r,s]=du(n);for(let i=0;i<this.hashCount;i++){const a=this.we(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class qr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,cs.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Oi(J.min(),s,new Ee(oe),Qt(),le())}}class cs{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new cs(r,n,le(),le(),le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class zd{constructor(e,n){this.targetId=e,this.Ce=n}}class Bd{constructor(e,n,r=Ue.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class mu{constructor(){this.Fe=0,this.Me=fu(),this.xe=Ue.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=le(),n=le(),r=le();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:W(38017,{changeType:i})}}),new cs(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=fu()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,fe(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Hy{constructor(e){this.ze=e,this.je=new Map,this.He=Qt(),this.Je=qs(),this.Ye=qs(),this.Ze=new Ee(oe)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:W(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const i=s.target;if(na(i))if(r===0){const a=new K(i.path);this.tt(n,a,We.newNoDocument(a,J.min()))}else fe(r===1,20013,{expectedCount:r});else{const a=this.ut(n);if(a!==r){const c=this.ct(e),u=c?this.lt(c,e,a):1;if(u!==0){this.st(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,h)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,c;try{a=hn(r).toUint8Array()}catch(u){if(u instanceof md)return Zn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new $a(a,s,i)}catch(u){return Zn(u instanceof qr?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.pe===0?null:c}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.ze.Pt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.tt(n,i,null),s++)}),s}It(e){const n=new Map;this.je.forEach((i,a)=>{const c=this._t(a);if(c){if(i.current&&na(c.target)){const u=new K(c.target.path);this.Et(u).has(a)||this.dt(a,u)||this.tt(a,u,We.newNoDocument(u,e))}i.Le&&(n.set(a,i.qe()),i.Qe())}});let r=le();this.Ye.forEach((i,a)=>{let c=!0;a.forEachWhile(u=>{const h=this._t(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.He.forEach((i,a)=>a.setReadTime(e));const s=new Oi(e,n,this.Ze,this.He,r);return this.He=Qt(),this.Je=qs(),this.Ye=qs(),this.Ze=new Ee(oe),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new mu,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new De(oe),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new De(oe),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new mu),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function qs(){return new Ee(K.comparator)}function fu(){return new Ee(K.comparator)}const Gy={asc:"ASCENDING",desc:"DESCENDING"},Qy={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ky={and:"AND",or:"OR"};class Wy{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function sa(t,e){return t.useProto3Json||Ai(e)?e:{value:e}}function yi(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ud(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Yy(t,e){return yi(t,e.toTimestamp())}function Pt(t){return fe(!!t,49232),J.fromTimestamp(function(n){const r=un(n);return new Re(r.seconds,r.nanos)}(t))}function Ha(t,e){return ia(t,e).canonicalString()}function ia(t,e){const n=function(s){return new ve(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function $d(t){const e=ve.fromString(t);return fe(Wd(e),10190,{key:e.toString()}),e}function oa(t,e){return Ha(t.databaseId,e.path)}function Eo(t,e){const n=$d(e);if(n.get(1)!==t.databaseId.projectId)throw new G(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(Gd(n))}function Hd(t,e){return Ha(t.databaseId,e)}function Xy(t){const e=$d(t);return e.length===4?ve.emptyPath():Gd(e)}function aa(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Gd(t){return fe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function pu(t,e,n){return{name:oa(t,e),fields:n.value.mapValue.fields}}function Jy(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:W(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,m){return h.useProto3Json?(fe(m===void 0||typeof m=="string",58123),Ue.fromBase64String(m||"")):(fe(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Ue.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(h){const m=h.code===void 0?F.UNKNOWN:qd(h.code);return new G(m,h.message||"")}(a);n=new Bd(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Eo(t,r.document.name),i=Pt(r.document.updateTime),a=r.document.createTime?Pt(r.document.createTime):J.min(),c=new rt({mapValue:{fields:r.document.fields}}),u=We.newFoundDocument(s,i,a,c),h=r.targetIds||[],m=r.removedTargetIds||[];n=new Zs(h,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Eo(t,r.document),i=r.readTime?Pt(r.readTime):J.min(),a=We.newNoDocument(s,i),c=r.removedTargetIds||[];n=new Zs([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Eo(t,r.document),i=r.removedTargetIds||[];n=new Zs([],i,s,null)}else{if(!("filter"in e))return W(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new By(s,i),c=r.targetId;n=new zd(c,a)}}return n}function Zy(t,e){let n;if(e instanceof ls)n={update:pu(t,e.key,e.value)};else if(e instanceof Vi)n={delete:oa(t,e.key)};else if(e instanceof yn)n={update:pu(t,e.key,e.data),updateMask:l0(e.fieldMask)};else{if(!(e instanceof Fy))return W(16599,{ft:e.type});n={verify:oa(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof gi)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ss)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof is)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof xi)return{fieldPath:a.field.canonicalString(),increment:c.Re};throw W(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Yy(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:W(27497)}(t,e.precondition)),n}function e0(t,e){return t&&t.length>0?(fe(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?Pt(s.updateTime):Pt(i);return a.isEqual(J.min())&&(a=Pt(i)),new Oy(a,s.transformResults||[])}(n,e))):[]}function t0(t,e){return{documents:[Hd(t,e.path)]}}function n0(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Hd(t,s);const i=function(h){if(h.length!==0)return Kd(Vt.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(h){if(h.length!==0)return h.map(m=>function(g){return{field:$n(g.field),direction:i0(g.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=sa(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{gt:n,parent:s}}function r0(t){let e=Xy(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){fe(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(f){const g=Qd(f);return g instanceof Vt&&Nd(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(g=>function(_){return new pi(Hn(_.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(f){let g;return g=typeof f=="object"?f.value:f,Ai(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(f){const g=!!f.before,x=f.values||[];return new fi(x,g)}(n.startAt));let h=null;return n.endAt&&(h=function(f){const g=!f.before,x=f.values||[];return new fi(x,g)}(n.endAt)),_y(e,s,a,i,c,"F",u,h)}function s0(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Qd(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Hn(n.unaryFilter.field);return Ce.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Hn(n.unaryFilter.field);return Ce.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Hn(n.unaryFilter.field);return Ce.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Hn(n.unaryFilter.field);return Ce.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return W(61313);default:return W(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ce.create(Hn(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return W(58110);default:return W(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Vt.create(n.compositeFilter.filters.map(r=>Qd(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return W(1026)}}(n.compositeFilter.op))}(t):W(30097,{filter:t})}function i0(t){return Gy[t]}function o0(t){return Qy[t]}function a0(t){return Ky[t]}function $n(t){return{fieldPath:t.canonicalString()}}function Hn(t){return Be.fromServerFormat(t.fieldPath)}function Kd(t){return t instanceof Ce?function(n){if(n.op==="=="){if(nu(n.value))return{unaryFilter:{field:$n(n.field),op:"IS_NAN"}};if(tu(n.value))return{unaryFilter:{field:$n(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(nu(n.value))return{unaryFilter:{field:$n(n.field),op:"IS_NOT_NAN"}};if(tu(n.value))return{unaryFilter:{field:$n(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$n(n.field),op:o0(n.op),value:n.value}}}(t):t instanceof Vt?function(n){const r=n.getFilters().map(s=>Kd(s));return r.length===1?r[0]:{compositeFilter:{op:a0(n.op),filters:r}}}(t):W(54877,{filter:t})}function l0(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Wd(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n,r,s,i=J.min(),a=J.min(),c=Ue.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new tn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new tn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new tn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new tn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e){this.wt=e}}function u0(t){const e=r0({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ra(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(){this.yn=new d0}addToCollectionParentIndex(e,n){return this.yn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.yn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(cn.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(cn.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class d0{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new De(ve.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new De(ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Yd=41943040;class nt{static withCacheSize(e){return new nt(e,nt.DEFAULT_COLLECTION_PERCENTILE,nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nt.DEFAULT_COLLECTION_PERCENTILE=10,nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nt.DEFAULT=new nt(Yd,nt.DEFAULT_COLLECTION_PERCENTILE,nt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nt.DISABLED=new nt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new rr(0)}static ir(){return new rr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu="LruGarbageCollector",m0=1048576;function yu([t,e],[n,r]){const s=oe(t,n);return s===0?oe(e,r):s}class f0{constructor(e){this.cr=e,this.buffer=new De(yu),this.lr=0}hr(){return++this.lr}Pr(e){const n=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();yu(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class p0{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){H(xu,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ur(n)?H(xu,"Ignoring IndexedDB error during garbage collection: ",n):await cr(n)}await this.Ir(3e5)})}}class g0{constructor(e,n){this.Er=e,this.params=n}calculateTargetCount(e,n){return this.Er.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Ii.le);const r=new f0(n);return this.Er.forEachTarget(e,s=>r.Pr(s.sequenceNumber)).next(()=>this.Er.Ar(e,s=>r.Pr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Er.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Er.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(gu)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gu):this.Rr(e,n))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,n){let r,s,i,a,c,u,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,c=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(h=Date.now(),Bn()<=ue.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${s} in `+(c-a)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${f} documents in `+(h-u)+`ms
Total Duration: ${h-m}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function x0(t,e){return new g0(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(){this.changes=new Cn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,We.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Gr(r.mutation,s,gt.empty(),Re.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){const s=In();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=Fr();return i.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=In();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,s){let i=Qt();const a=Hr(),c=function(){return Hr()}();return n.forEach((u,h)=>{const m=r.get(h.key);s.has(h.key)&&(m===void 0||m.mutation instanceof yn)?i=i.insert(h.key,h):m!==void 0?(a.set(h.key,m.mutation.getFieldMask()),Gr(m.mutation,h,m.mutation.getFieldMask(),Re.now())):a.set(h.key,gt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,m)=>a.set(h,m)),n.forEach((h,m)=>{var f;return c.set(h,new w0(m,(f=a.get(h))!==null&&f!==void 0?f:null))}),c))}recalculateAndSaveOverlays(e,n){const r=Hr();let s=new Ee((a,c)=>a-c),i=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let m=r.get(u)||gt.empty();m=c.applyToLocalView(h,m),r.set(u,m);const f=(s.get(c.batchId)||le()).add(u);s=s.insert(c.batchId,f)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,m=u.value,f=Pd();m.forEach(g=>{if(!i.has(g)){const x=Ld(n.get(g),r.get(g));x!==null&&f.set(g,x),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,f))}return L.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return K.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ey(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(In());let c=es,u=i;return a.next(h=>L.forEach(h,(m,f)=>(c<f.largestBatchId&&(c=f.largestBatchId),i.get(m)?L.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{u=u.insert(m,g)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,le())).next(m=>({batchId:c,changes:Cd(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let s=Fr();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Fr();return this.indexManager.getCollectionParents(e,i).next(c=>L.forEach(c,u=>{const h=function(f,g){return new Si(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(m=>{m.forEach((f,g)=>{a=a.insert(f,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,h)=>{const m=h.getKey();a.get(m)===null&&(a=a.insert(m,We.newInvalidDocument(m)))});let c=Fr();return a.forEach((u,h)=>{const m=i.get(u);m!==void 0&&Gr(m.mutation,h,gt.empty(),Re.now()),Pi(n,h)&&(c=c.insert(u,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,n){return L.resolve(this.Fr.get(n))}saveBundleMetadata(e,n){return this.Fr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Pt(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Mr.get(n))}saveNamedQuery(e,n){return this.Mr.set(n.name,function(s){return{name:s.name,query:u0(s.bundledQuery),readTime:Pt(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.overlays=new Ee(K.comparator),this.Or=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=In();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Or.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Or.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=In(),i=n.length+1,a=new K(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ee((h,m)=>h-m);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let m=i.get(h.largestBatchId);m===null&&(m=In(),i=i.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const c=In(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,m)=>c.set(h,m)),!(c.size()>=s)););return L.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Or.get(s.largestBatchId).delete(r.key);this.Or.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new zy(n,r));let i=this.Or.get(n);i===void 0&&(i=le(),this.Or.set(n,i)),this.Or.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(){this.sessionToken=Ue.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this.Nr=new De(Me.Br),this.Lr=new De(Me.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,n){const r=new Me(e,n);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Qr(new Me(e,n))}$r(e,n){e.forEach(r=>this.removeReference(r,n))}Ur(e){const n=new K(new ve([])),r=new Me(n,e),s=new Me(n,e+1),i=[];return this.Lr.forEachInRange([r,s],a=>{this.Qr(a),i.push(a.key)}),i}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const n=new K(new ve([])),r=new Me(n,e),s=new Me(n,e+1);let i=le();return this.Lr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Me(e,0),r=this.Nr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Me{constructor(e,n){this.key=e,this.Gr=n}static Br(e,n){return K.comparator(e.key,n.key)||oe(e.Gr,n.Gr)}static kr(e,n){return oe(e.Gr,n.Gr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Jn=1,this.zr=new De(Me.Br)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new qy(i,n,r,s);this.mutationQueue.push(a);for(const c of s)this.zr=this.zr.add(new Me(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return L.resolve(a)}lookupMutationBatch(e,n){return L.resolve(this.jr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Hr(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Oa:this.Jn-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Me(n,0),s=new Me(n,Number.POSITIVE_INFINITY),i=[];return this.zr.forEachInRange([r,s],a=>{const c=this.jr(a.Gr);i.push(c)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new De(oe);return n.forEach(s=>{const i=new Me(s,0),a=new Me(s,Number.POSITIVE_INFINITY);this.zr.forEachInRange([i,a],c=>{r=r.add(c.Gr)})}),L.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;K.isDocumentKey(i)||(i=i.child(""));const a=new Me(new K(i),0);let c=new De(oe);return this.zr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(c=c.add(u.Gr)),!0)},a),L.resolve(this.Jr(c))}Jr(e){const n=[];return e.forEach(r=>{const s=this.jr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){fe(this.Yr(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return L.forEach(n.mutations,s=>{const i=new Me(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,n){const r=new Me(n,0),s=this.zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Yr(e,n){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const n=this.Hr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e){this.Zr=e,this.docs=function(){return new Ee(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Zr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():We.newInvalidDocument(n))}getEntries(e,n){let r=Qt();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():We.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Qt();const a=n.path,c=new K(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:m}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||ty(ey(m),r)<=0||(s.has(m.key)||Pi(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){W(9500)}Xr(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new j0(this)}getSize(e){return L.resolve(this.size)}}class j0 extends y0{constructor(e){super(),this.vr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.vr.addEntry(e,s)):this.vr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.vr.getEntry(e,n)}getAllFromCache(e,n){return this.vr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e){this.persistence=e,this.ei=new Cn(n=>Fa(n),qa),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.ti=0,this.ni=new Ga,this.targetCount=0,this.ri=rr.rr()}forEachTarget(e,n){return this.ei.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ti&&(this.ti=n),L.resolve()}ar(e){this.ei.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ri=new rr(n),this.highestTargetId=n),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,n){return this.ar(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.ar(n),L.resolve()}removeTargetData(e,n){return this.ei.delete(n.target),this.ni.Ur(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ei.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ei.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.ei.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.ni.qr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.ni.$r(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ni.Ur(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ni.Wr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.ni.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n){this.ii={},this.overlays={},this.si=new Ii(0),this.oi=!1,this.oi=!0,this._i=new E0,this.referenceDelegate=e(this),this.ai=new I0(this),this.indexManager=new h0,this.remoteDocumentCache=function(s){return new T0(s)}(r=>this.referenceDelegate.ui(r)),this.serializer=new c0(n),this.ci=new v0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _0,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ii[e.toKey()];return r||(r=new N0(n,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new A0(this.si.next());return this.referenceDelegate.li(),r(s).next(i=>this.referenceDelegate.hi(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Pi(e,n){return L.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,n)))}}class A0 extends ry{constructor(e){super(),this.currentSequenceNumber=e}}class Qa{constructor(e){this.persistence=e,this.Ti=new Ga,this.Ii=null}static Ei(e){return new Qa(e)}get di(){if(this.Ii)return this.Ii;throw W(60996)}addReference(e,n,r){return this.Ti.addReference(r,n),this.di.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ti.removeReference(r,n),this.di.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ti.Ur(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}li(){this.Ii=new Set}hi(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.di,r=>{const s=K.fromPath(r);return this.Ai(e,s).next(i=>{i||n.removeEntry(s,J.min())})}).next(()=>(this.Ii=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ai(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}ui(e){return 0}Ai(e,n){return L.or([()=>L.resolve(this.Ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Pi(e,n)])}}class wi{constructor(e,n){this.persistence=e,this.Ri=new Cn(r=>oy(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=x0(this,n)}static Ei(e,n){return new wi(e,n)}li(){}hi(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}Vr(e){let n=0;return this.Ar(e,r=>{n++}).next(()=>n)}Ar(e,n){return L.forEach(this.Ri,(r,s)=>this.gr(e,r,s).next(i=>i?L.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.Xr(e,a=>this.gr(e,a,n).next(c=>{c||(r++,i.removeEntry(a,J.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.Ri.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.Ri.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.Ri.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.Ri.set(n,e.currentSequenceNumber),L.resolve()}ui(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ys(e.data.value)),n}gr(e,n,r){return L.or([()=>this.persistence.Pi(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.Ri.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ls=r,this.hs=s}static Ps(e,n){let r=le(),s=le();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ka(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return Ng()?8:sy(_g())>0?6:4}()}initialize(e,n){this.As=e,this.indexManager=n,this.Ts=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Rs(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Vs(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new k0;return this.fs(e,n,a).next(c=>{if(i.result=c,this.Is)return this.gs(e,n,a,c.size)})}).next(()=>i.result)}gs(e,n,r,s){return r.documentReadCount<this.Es?(Bn()<=ue.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Un(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),L.resolve()):(Bn()<=ue.DEBUG&&H("QueryEngine","Query:",Un(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Bn()<=ue.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Un(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ct(n))):L.resolve())}Rs(e,n){if(ou(n))return L.resolve(null);let r=Ct(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ra(n,null,"F"),r=Ct(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=le(...i);return this.As.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ps(n,c);return this.ys(n,h,a,u.readTime)?this.Rs(e,ra(n,null,"F")):this.ws(e,h,n,u)}))})))}Vs(e,n,r,s){return ou(n)||s.isEqual(J.min())?L.resolve(null):this.As.getDocuments(e,r).next(i=>{const a=this.ps(n,i);return this.ys(n,a,r,s)?L.resolve(null):(Bn()<=ue.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Un(n)),this.ws(e,a,n,Zx(s,es)).next(c=>c))})}ps(e,n){let r=new De(kd(e));return n.forEach((s,i)=>{Pi(e,i)&&(r=r.add(i))}),r}ys(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}fs(e,n,r){return Bn()<=ue.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Un(n)),this.As.getDocumentsMatchingQuery(e,n,cn.min(),r)}ws(e,n,r,s){return this.As.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa="LocalStore",C0=3e8;class P0{constructor(e,n,r,s){this.persistence=e,this.bs=n,this.serializer=s,this.Ss=new Ee(oe),this.Ds=new Cn(i=>Fa(i),qa),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new b0(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ss))}}function R0(t,e,n,r){return new P0(t,e,n,r)}async function Jd(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Fs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],c=[];let u=le();for(const h of s){a.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}for(const h of i){c.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ms:h,removedBatchIds:a,addedBatchIds:c}))})})}function D0(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Cs.newChangeBuffer({trackRemovals:!0});return function(c,u,h,m){const f=h.batch,g=f.keys();let x=L.resolve();return g.forEach(_=>{x=x.next(()=>m.getEntry(u,_)).next(k=>{const P=h.docVersions.get(_);fe(P!==null,48541),k.version.compareTo(P)<0&&(f.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),m.addEntry(k)))})}),x.next(()=>c.mutationQueue.removeMutationBatch(u,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=le();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Zd(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.ai.getLastRemoteSnapshotVersion(n))}function V0(t,e){const n=Z(t),r=e.snapshotVersion;let s=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Cs.newChangeBuffer({trackRemovals:!0});s=n.Ss;const c=[];e.targetChanges.forEach((m,f)=>{const g=s.get(f);if(!g)return;c.push(n.ai.removeMatchingKeys(i,m.removedDocuments,f).next(()=>n.ai.addMatchingKeys(i,m.addedDocuments,f)));let x=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?x=x.withResumeToken(Ue.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):m.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(m.resumeToken,r)),s=s.insert(f,x),function(k,P,C){return k.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=C0?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(g,x,m)&&c.push(n.ai.updateTargetData(i,x))});let u=Qt(),h=le();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),c.push(O0(i,a,e.documentUpdates).next(m=>{u=m.xs,h=m.Os})),!r.isEqual(J.min())){const m=n.ai.getLastRemoteSnapshotVersion(i).next(f=>n.ai.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(m)}return L.waitFor(c).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.Ss=s,i))}function O0(t,e,n){let r=le(),s=le();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Qt();return n.forEach((c,u)=>{const h=i.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):H(Wa,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)}),{xs:a,Os:s}})}function M0(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Oa),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function L0(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.ai.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.ai.allocateTargetId(r).next(a=>(s=new tn(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.ai.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ss.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(r.targetId,r),n.Ds.set(e,r.targetId)),r})}async function la(t,e,n){const r=Z(t),s=r.Ss.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!ur(a))throw a;H(Wa,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(s.target)}function wu(t,e,n){const r=Z(t);let s=J.min(),i=le();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,m){const f=Z(u),g=f.Ds.get(m);return g!==void 0?L.resolve(f.Ss.get(g)):f.ai.getTargetData(h,m)}(r,a,Ct(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(a,c.targetId).next(u=>{i=u})}).next(()=>r.bs.getDocumentsMatchingQuery(a,e,n?s:J.min(),n?i:le())).next(c=>(F0(r,Ty(e),c),{documents:c,Ns:i})))}function F0(t,e,n){let r=t.vs.get(e)||J.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.vs.set(e,r)}class bu{constructor(){this.activeTargetIds=Cy()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class q0{constructor(){this.So=new bu,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,n,r){this.Do[e]=n}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new bu,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu="ConnectivityMonitor";class _u{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){H(vu,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){H(vu,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zs=null;function ca(){return zs===null?zs=function(){return 268435456+Math.round(2147483648*Math.random())}():zs++,"0x"+zs.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No="RestConnection",B0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class U0{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Lo=n+"://"+e.host,this.ko=`projects/${r}/databases/${s}`,this.qo=this.databaseId.database===di?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Qo(e,n,r,s,i){const a=ca(),c=this.$o(e,n.toUriEncodedString());H(No,`Sending RPC '${e}' ${a}:`,c,r);const u={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(u,s,i);const{host:h}=new URL(c),m=Ra(h);return this.Ko(e,c,u,r,m).then(f=>(H(No,`Received RPC '${e}' ${a}: `,f),f),f=>{throw Zn(No,`RPC '${e}' ${a} failed with error: `,f,"url: ",c,"request:",r),f})}Wo(e,n,r,s,i,a){return this.Qo(e,n,r,s,i)}Uo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+lr}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}$o(e,n){const r=B0[e];return`${this.Lo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qe="WebChannelConnection";class H0 extends U0{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,n,r,s,i){const a=ca();return new Promise((c,u)=>{const h=new nd;h.setWithCredentials(!0),h.listenOnce(rd.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Ws.NO_ERROR:const f=h.getResponseJson();H(Qe,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),c(f);break;case Ws.TIMEOUT:H(Qe,`RPC '${e}' ${a} timed out`),u(new G(F.DEADLINE_EXCEEDED,"Request time out"));break;case Ws.HTTP_ERROR:const g=h.getStatus();if(H(Qe,`RPC '${e}' ${a} failed with status:`,g,"response text:",h.getResponseText()),g>0){let x=h.getResponseJson();Array.isArray(x)&&(x=x[0]);const _=x==null?void 0:x.error;if(_&&_.status&&_.message){const k=function(C){const V=C.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(V)>=0?V:F.UNKNOWN}(_.status);u(new G(k,_.message))}else u(new G(F.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new G(F.UNAVAILABLE,"Connection failed."));break;default:W(9055,{s_:e,streamId:a,o_:h.getLastErrorCode(),__:h.getLastError()})}}finally{H(Qe,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(s);H(Qe,`RPC '${e}' ${a} sending request:`,s),h.send(n,"POST",m,r,15)})}a_(e,n,r){const s=ca(),i=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=od(),c=id(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Uo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const m=i.join("");H(Qe,`Creating RPC '${e}' stream ${s}: ${m}`,u);const f=a.createWebChannel(m,u);let g=!1,x=!1;const _=new $0({Go:P=>{x?H(Qe,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(g||(H(Qe,`Opening RPC '${e}' stream ${s} transport.`),f.open(),g=!0),H(Qe,`RPC '${e}' stream ${s} sending:`,P),f.send(P))},zo:()=>f.close()}),k=(P,C,V)=>{P.listen(C,M=>{try{V(M)}catch($){setTimeout(()=>{throw $},0)}})};return k(f,Lr.EventType.OPEN,()=>{x||(H(Qe,`RPC '${e}' stream ${s} transport opened.`),_.t_())}),k(f,Lr.EventType.CLOSE,()=>{x||(x=!0,H(Qe,`RPC '${e}' stream ${s} transport closed`),_.r_())}),k(f,Lr.EventType.ERROR,P=>{x||(x=!0,Zn(Qe,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),_.r_(new G(F.UNAVAILABLE,"The operation could not be completed")))}),k(f,Lr.EventType.MESSAGE,P=>{var C;if(!x){const V=P.data[0];fe(!!V,16349);const M=V,$=(M==null?void 0:M.error)||((C=M[0])===null||C===void 0?void 0:C.error);if($){H(Qe,`RPC '${e}' stream ${s} received error:`,$);const ee=$.status;let O=function(b){const v=Ie[b];if(v!==void 0)return qd(v)}(ee),I=$.message;O===void 0&&(O=F.INTERNAL,I="Unknown error status: "+ee+" with message "+$.message),x=!0,_.r_(new G(O,I)),f.close()}else H(Qe,`RPC '${e}' stream ${s} received:`,V),_.i_(V)}}),k(c,sd.STAT_EVENT,P=>{P.stat===Xo.PROXY?H(Qe,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===Xo.NOPROXY&&H(Qe,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.n_()},0),_}}function To(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(t){return new Wy(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,n,r=1e3,s=1.5,i=6e4){this.bi=e,this.timerId=n,this.u_=r,this.c_=s,this.l_=i,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const n=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.h_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,s,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu="PersistentStream";class tm{constructor(e,n,r,s,i,a,c,u){this.bi=e,this.R_=r,this.V_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new em(e,n)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,n){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Gt(n.toString()),Gt("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(n)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),n=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.m_===n&&this.B_(r,s)},r=>{e(()=>{const s=new G(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(s)})})}B_(e,n){const r=this.N_(this.m_);this.stream=this.k_(e,n),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(s=>{r(()=>this.L_(s))}),this.stream.onMessage(s=>{r(()=>++this.p_==1?this.q_(s):this.onNext(s))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return H(Eu,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return n=>{this.bi.enqueueAndForget(()=>this.m_===e?n():(H(Eu,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class G0 extends tm{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}k_(e,n){return this.connection.a_("Listen",e,n)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const n=Jy(this.serializer,e),r=function(i){if(!("targetChange"in i))return J.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?J.min():a.readTime?Pt(a.readTime):J.min()}(e);return this.listener.Q_(n,r)}U_(e){const n={};n.database=aa(this.serializer),n.addTarget=function(i,a){let c;const u=a.target;if(c=na(u)?{documents:t0(i,u)}:{query:n0(i,u).gt},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=Ud(i,a.resumeToken);const h=sa(i,a.expectedCount);h!==null&&(c.expectedCount=h)}else if(a.snapshotVersion.compareTo(J.min())>0){c.readTime=yi(i,a.snapshotVersion.toTimestamp());const h=sa(i,a.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);const r=s0(this.serializer,e);r&&(n.labels=r),this.F_(n)}K_(e){const n={};n.database=aa(this.serializer),n.removeTarget=e,this.F_(n)}}class Q0 extends tm{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,n){return this.connection.a_("Write",e,n)}q_(e){return fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const n=e0(e.writeResults,e.commitTime),r=Pt(e.commitTime);return this.listener.j_(r,n)}H_(){const e={};e.database=aa(this.serializer),this.F_(e)}G_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Zy(this.serializer,r))};this.F_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{}class W0 extends K0{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.J_=!1}Y_(){if(this.J_)throw new G(F.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,n,r,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Qo(e,ia(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(F.UNKNOWN,i.toString())})}Wo(e,n,r,s,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Wo(e,ia(n,r),s,a,c,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new G(F.UNKNOWN,a.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class Y0{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(Gt(n),this.ea=!1):H("OnlineStateTracker",n)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="RemoteStore";class X0{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=i,this.ca.vo(a=>{r.enqueueAndForget(async()=>{Pn(this)&&(H(Sn,"Restarting streams for network reachability change."),await async function(u){const h=Z(u);h.aa.add(4),await us(h),h.la.set("Unknown"),h.aa.delete(4),await Li(h)}(this))})}),this.la=new Y0(r,s)}}async function Li(t){if(Pn(t))for(const e of t.ua)await e(!0)}async function us(t){for(const e of t.ua)await e(!1)}function nm(t,e){const n=Z(t);n._a.has(e.targetId)||(n._a.set(e.targetId,e),Za(n)?Ja(n):hr(n).b_()&&Xa(n,e))}function Ya(t,e){const n=Z(t),r=hr(n);n._a.delete(e),r.b_()&&rm(n,e),n._a.size===0&&(r.b_()?r.v_():Pn(n)&&n.la.set("Unknown"))}function Xa(t,e){if(t.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}hr(t).U_(e)}function rm(t,e){t.ha.Ke(e),hr(t).K_(e)}function Ja(t){t.ha=new Hy({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t._a.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),hr(t).start(),t.la.ta()}function Za(t){return Pn(t)&&!hr(t).w_()&&t._a.size>0}function Pn(t){return Z(t).aa.size===0}function sm(t){t.ha=void 0}async function J0(t){t.la.set("Online")}async function Z0(t){t._a.forEach((e,n)=>{Xa(t,e)})}async function e1(t,e){sm(t),Za(t)?(t.la.ia(e),Ja(t)):t.la.set("Unknown")}async function t1(t,e,n){if(t.la.set("Online"),e instanceof Bd&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const c of i.targetIds)s._a.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s._a.delete(c),s.ha.removeTarget(c))}(t,e)}catch(r){H(Sn,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await bi(t,r)}else if(e instanceof Zs?t.ha.Xe(e):e instanceof zd?t.ha.ot(e):t.ha.nt(e),!n.isEqual(J.min()))try{const r=await Zd(t.localStore);n.compareTo(r)>=0&&await function(i,a){const c=i.ha.It(a);return c.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const m=i._a.get(h);m&&i._a.set(h,m.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,h)=>{const m=i._a.get(u);if(!m)return;i._a.set(u,m.withResumeToken(Ue.EMPTY_BYTE_STRING,m.snapshotVersion)),rm(i,u);const f=new tn(m.target,u,h,m.sequenceNumber);Xa(i,f)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){H(Sn,"Failed to raise snapshot:",r),await bi(t,r)}}async function bi(t,e,n){if(!ur(e))throw e;t.aa.add(1),await us(t),t.la.set("Offline"),n||(n=()=>Zd(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(Sn,"Retrying IndexedDB access"),await n(),t.aa.delete(1),await Li(t)})}function im(t,e){return e().catch(n=>bi(t,n,e))}async function Fi(t){const e=Z(t),n=mn(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:Oa;for(;n1(e);)try{const s=await M0(e.localStore,r);if(s===null){e.oa.length===0&&n.v_();break}r=s.batchId,r1(e,s)}catch(s){await bi(e,s)}om(e)&&am(e)}function n1(t){return Pn(t)&&t.oa.length<10}function r1(t,e){t.oa.push(e);const n=mn(t);n.b_()&&n.W_&&n.G_(e.mutations)}function om(t){return Pn(t)&&!mn(t).w_()&&t.oa.length>0}function am(t){mn(t).start()}async function s1(t){mn(t).H_()}async function i1(t){const e=mn(t);for(const n of t.oa)e.G_(n.mutations)}async function o1(t,e,n){const r=t.oa.shift(),s=Ua.from(r,e,n);await im(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Fi(t)}async function a1(t,e){e&&mn(t).W_&&await async function(r,s){if(function(a){return Uy(a)&&a!==F.ABORTED}(s.code)){const i=r.oa.shift();mn(r).D_(),await im(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Fi(r)}}(t,e),om(t)&&am(t)}async function Nu(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),H(Sn,"RemoteStore received new credentials");const r=Pn(n);n.aa.add(3),await us(n),r&&n.la.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.aa.delete(3),await Li(n)}async function l1(t,e){const n=Z(t);e?(n.aa.delete(2),await Li(n)):e||(n.aa.add(2),await us(n),n.la.set("Unknown"))}function hr(t){return t.Pa||(t.Pa=function(n,r,s){const i=Z(n);return i.Y_(),new G0(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{jo:J0.bind(null,t),Jo:Z0.bind(null,t),Zo:e1.bind(null,t),Q_:t1.bind(null,t)}),t.ua.push(async e=>{e?(t.Pa.D_(),Za(t)?Ja(t):t.la.set("Unknown")):(await t.Pa.stop(),sm(t))})),t.Pa}function mn(t){return t.Ta||(t.Ta=function(n,r,s){const i=Z(n);return i.Y_(),new Q0(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{jo:()=>Promise.resolve(),Jo:s1.bind(null,t),Zo:a1.bind(null,t),z_:i1.bind(null,t),j_:o1.bind(null,t)}),t.ua.push(async e=>{e?(t.Ta.D_(),await Fi(t)):(await t.Ta.stop(),t.oa.length>0&&(H(Sn,`Stopping write stream with ${t.oa.length} pending writes`),t.oa=[]))})),t.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new $t,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,c=new el(e,n,a,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tl(t,e){if(Gt("AsyncQueue",`${e}: ${t}`),ur(t))return new G(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{static emptySet(e){return new Yn(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=Fr(),this.sortedSet=new Ee(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Yn)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Yn;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(){this.Ia=new Ee(K.comparator)}track(e){const n=e.doc.key,r=this.Ia.get(n);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(n,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(n):e.type===1&&r.type===2?this.Ia=this.Ia.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(n,{type:2,doc:e.doc}):W(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(n,e)}da(){const e=[];return this.Ia.inorderTraversal((n,r)=>{e.push(r)}),e}}class sr{constructor(e,n,r,s,i,a,c,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new sr(e,n,Yn.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ci(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class u1{constructor(){this.queries=ju(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(n,r){const s=Z(n),i=s.queries;s.queries=ju(),i.forEach((a,c)=>{for(const u of c.Ra)u.onError(r)})})(this,new G(F.ABORTED,"Firestore shutting down"))}}function ju(){return new Cn(t=>Ad(t),Ci)}async function lm(t,e){const n=Z(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Va()&&e.ma()&&(r=2):(i=new c1,r=e.ma()?0:1);try{switch(r){case 0:i.Aa=await n.onListen(s,!0);break;case 1:i.Aa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const c=tl(a,`Initialization of query '${Un(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.Ra.push(e),e.ga(n.onlineState),i.Aa&&e.pa(i.Aa)&&nl(n)}async function cm(t,e){const n=Z(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Ra.indexOf(e);a>=0&&(i.Ra.splice(a,1),i.Ra.length===0?s=e.ma()?0:1:!i.Va()&&e.ma()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function h1(t,e){const n=Z(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const c of a.Ra)c.pa(s)&&(r=!0);a.Aa=s}}r&&nl(n)}function d1(t,e,n){const r=Z(t),s=r.queries.get(e);if(s)for(const i of s.Ra)i.onError(n);r.queries.delete(e)}function nl(t){t.fa.forEach(e=>{e.next()})}var ua,Iu;(Iu=ua||(ua={})).ya="default",Iu.Cache="cache";class um{constructor(e,n,r){this.query=e,this.wa=n,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new sr(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ba?this.Da(e)&&(this.wa.next(e),n=!0):this.va(e,this.onlineState)&&(this.Ca(e),n=!0),this.Sa=e,n}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let n=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),n=!0),n}va(e,n){if(!e.fromCache||!this.ma())return!0;const r=n!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const n=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ca(e){e=sr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==ua.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e){this.key=e}}class dm{constructor(e){this.key=e}}class m1{constructor(e,n){this.query=e,this.qa=n,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=le(),this.mutatedKeys=le(),this.Ua=kd(e),this.Ka=new Yn(this.Ua)}get Wa(){return this.qa}Ga(e,n){const r=n?n.za:new Tu,s=n?n.Ka:this.Ka;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,f)=>{const g=s.get(m),x=Pi(this.query,f)?f:null,_=!!g&&this.mutatedKeys.has(g.key),k=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let P=!1;g&&x?g.data.isEqual(x.data)?_!==k&&(r.track({type:3,doc:x}),P=!0):this.ja(g,x)||(r.track({type:2,doc:x}),P=!0,(u&&this.Ua(x,u)>0||h&&this.Ua(x,h)<0)&&(c=!0)):!g&&x?(r.track({type:0,doc:x}),P=!0):g&&!x&&(r.track({type:1,doc:g}),P=!0,(u||h)&&(c=!0)),P&&(x?(a=a.add(x),i=k?i.add(m):i.delete(m)):(a=a.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{Ka:a,za:r,ys:c,mutatedKeys:i}}ja(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const a=e.za.da();a.sort((m,f)=>function(x,_){const k=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W(20277,{Vt:P})}};return k(x)-k(_)}(m.type,f.type)||this.Ua(m.doc,f.doc)),this.Ha(r),s=s!=null&&s;const c=n&&!s?this.Ja():[],u=this.$a.size===0&&this.current&&!s?1:0,h=u!==this.Qa;return this.Qa=u,a.length!==0||h?{snapshot:new sr(this.query,e.Ka,i,a,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:c}:{Ya:c}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new Tu,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(n=>this.qa=this.qa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.qa=this.qa.delete(n)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=le(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const n=[];return e.forEach(r=>{this.$a.has(r)||n.push(new dm(r))}),this.$a.forEach(r=>{e.has(r)||n.push(new hm(r))}),n}Xa(e){this.qa=e.Ns,this.$a=le();const n=this.Ga(e.documents);return this.applyChanges(n,!0)}eu(){return sr.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const rl="SyncEngine";class f1{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class p1{constructor(e){this.key=e,this.tu=!1}}class g1{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.nu={},this.ru=new Cn(c=>Ad(c),Ci),this.iu=new Map,this.su=new Set,this.ou=new Ee(K.comparator),this._u=new Map,this.au=new Ga,this.uu={},this.cu=new Map,this.lu=rr.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function x1(t,e,n=!0){const r=ym(t);let s;const i=r.ru.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.eu()):s=await mm(r,e,n,!0),s}async function y1(t,e){const n=ym(t);await mm(n,e,!0,!1)}async function mm(t,e,n,r){const s=await L0(t.localStore,Ct(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await w1(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&nm(t.remoteStore,s),c}async function w1(t,e,n,r,s){t.Pu=(f,g,x)=>async function(k,P,C,V){let M=P.view.Ga(C);M.ys&&(M=await wu(k.localStore,P.query,!1).then(({documents:I})=>P.view.Ga(I,M)));const $=V&&V.targetChanges.get(P.targetId),ee=V&&V.targetMismatches.get(P.targetId)!=null,O=P.view.applyChanges(M,k.isPrimaryClient,$,ee);return ku(k,P.targetId,O.Ya),O.snapshot}(t,f,g,x);const i=await wu(t.localStore,e,!0),a=new m1(e,i.Ns),c=a.Ga(i.documents),u=cs.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=a.applyChanges(c,t.isPrimaryClient,u);ku(t,n,h.Ya);const m=new f1(e,n,a);return t.ru.set(e,m),t.iu.has(n)?t.iu.get(n).push(e):t.iu.set(n,[e]),h.snapshot}async function b1(t,e,n){const r=Z(t),s=r.ru.get(e),i=r.iu.get(s.targetId);if(i.length>1)return r.iu.set(s.targetId,i.filter(a=>!Ci(a,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await la(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ya(r.remoteStore,s.targetId),ha(r,s.targetId)}).catch(cr)):(ha(r,s.targetId),await la(r.localStore,s.targetId,!0))}async function v1(t,e){const n=Z(t),r=n.ru.get(e),s=n.iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ya(n.remoteStore,r.targetId))}async function _1(t,e,n){const r=k1(t);try{const s=await function(a,c){const u=Z(a),h=Re.now(),m=c.reduce((x,_)=>x.add(_.key),le());let f,g;return u.persistence.runTransaction("Locally write mutations","readwrite",x=>{let _=Qt(),k=le();return u.Cs.getEntries(x,m).next(P=>{_=P,_.forEach((C,V)=>{V.isValidDocument()||(k=k.add(C))})}).next(()=>u.localDocuments.getOverlayedDocuments(x,_)).next(P=>{f=P;const C=[];for(const V of c){const M=Ly(V,f.get(V.key).overlayedDocument);M!=null&&C.push(new yn(V.key,M,vd(M.value.mapValue),Ze.exists(!0)))}return u.mutationQueue.addMutationBatch(x,h,C,c)}).next(P=>{g=P;const C=P.applyToLocalDocumentSet(f,k);return u.documentOverlayCache.saveOverlays(x,P.batchId,C)})}).then(()=>({batchId:g.batchId,changes:Cd(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,c,u){let h=a.uu[a.currentUser.toKey()];h||(h=new Ee(oe)),h=h.insert(c,u),a.uu[a.currentUser.toKey()]=h}(r,s.batchId,n),await hs(r,s.changes),await Fi(r.remoteStore)}catch(s){const i=tl(s,"Failed to persist write");n.reject(i)}}async function fm(t,e){const n=Z(t);try{const r=await V0(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n._u.get(i);a&&(fe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.tu=!0:s.modifiedDocuments.size>0?fe(a.tu,14607):s.removedDocuments.size>0&&(fe(a.tu,42227),a.tu=!1))}),await hs(n,r,e)}catch(r){await cr(r)}}function Au(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ru.forEach((i,a)=>{const c=a.view.ga(e);c.snapshot&&s.push(c.snapshot)}),function(a,c){const u=Z(a);u.onlineState=c;let h=!1;u.queries.forEach((m,f)=>{for(const g of f.Ra)g.ga(c)&&(h=!0)}),h&&nl(u)}(r.eventManager,e),s.length&&r.nu.Q_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function E1(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r._u.get(e),i=s&&s.key;if(i){let a=new Ee(K.comparator);a=a.insert(i,We.newNoDocument(i,J.min()));const c=le().add(i),u=new Oi(J.min(),new Map,new Ee(oe),a,c);await fm(r,u),r.ou=r.ou.remove(i),r._u.delete(e),sl(r)}else await la(r.localStore,e,!1).then(()=>ha(r,e,n)).catch(cr)}async function N1(t,e){const n=Z(t),r=e.batch.batchId;try{const s=await D0(n.localStore,e);gm(n,r,null),pm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await hs(n,s)}catch(s){await cr(s)}}async function T1(t,e,n){const r=Z(t);try{const s=await function(a,c){const u=Z(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return u.mutationQueue.lookupMutationBatch(h,c).next(f=>(fe(f!==null,37113),m=f.keys(),u.mutationQueue.removeMutationBatch(h,f))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,m,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>u.localDocuments.getDocuments(h,m))})}(r.localStore,e);gm(r,e,n),pm(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await hs(r,s)}catch(s){await cr(s)}}function pm(t,e){(t.cu.get(e)||[]).forEach(n=>{n.resolve()}),t.cu.delete(e)}function gm(t,e,n){const r=Z(t);let s=r.uu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.uu[r.currentUser.toKey()]=s}}function ha(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.iu.get(e))t.ru.delete(r),n&&t.nu.Tu(r,n);t.iu.delete(e),t.isPrimaryClient&&t.au.Ur(e).forEach(r=>{t.au.containsKey(r)||xm(t,r)})}function xm(t,e){t.su.delete(e.path.canonicalString());const n=t.ou.get(e);n!==null&&(Ya(t.remoteStore,n),t.ou=t.ou.remove(e),t._u.delete(n),sl(t))}function ku(t,e,n){for(const r of n)r instanceof hm?(t.au.addReference(r.key,e),j1(t,r)):r instanceof dm?(H(rl,"Document no longer in limbo: "+r.key),t.au.removeReference(r.key,e),t.au.containsKey(r.key)||xm(t,r.key)):W(19791,{Iu:r})}function j1(t,e){const n=e.key,r=n.path.canonicalString();t.ou.get(n)||t.su.has(r)||(H(rl,"New document in limbo: "+n),t.su.add(r),sl(t))}function sl(t){for(;t.su.size>0&&t.ou.size<t.maxConcurrentLimboResolutions;){const e=t.su.values().next().value;t.su.delete(e);const n=new K(ve.fromString(e)),r=t.lu.next();t._u.set(r,new p1(n)),t.ou=t.ou.insert(n,r),nm(t.remoteStore,new tn(Ct(za(n.path)),r,"TargetPurposeLimboResolution",Ii.le))}}async function hs(t,e,n){const r=Z(t),s=[],i=[],a=[];r.ru.isEmpty()||(r.ru.forEach((c,u)=>{a.push(r.Pu(u,e,n).then(h=>{var m;if((h||n)&&r.isPrimaryClient){const f=h?!h.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(h){s.push(h);const f=Ka.Ps(u.targetId,h);i.push(f)}}))}),await Promise.all(a),r.nu.Q_(s),await async function(u,h){const m=Z(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>L.forEach(h,g=>L.forEach(g.ls,x=>m.persistence.referenceDelegate.addReference(f,g.targetId,x)).next(()=>L.forEach(g.hs,x=>m.persistence.referenceDelegate.removeReference(f,g.targetId,x)))))}catch(f){if(!ur(f))throw f;H(Wa,"Failed to update sequence numbers: "+f)}for(const f of h){const g=f.targetId;if(!f.fromCache){const x=m.Ss.get(g),_=x.snapshotVersion,k=x.withLastLimboFreeSnapshotVersion(_);m.Ss=m.Ss.insert(g,k)}}}(r.localStore,i))}async function I1(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){H(rl,"User change. New user:",e.toKey());const r=await Jd(n.localStore,e);n.currentUser=e,function(i,a){i.cu.forEach(c=>{c.forEach(u=>{u.reject(new G(F.CANCELLED,a))})}),i.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await hs(n,r.Ms)}}function A1(t,e){const n=Z(t),r=n._u.get(e);if(r&&r.tu)return le().add(r.key);{let s=le();const i=n.iu.get(e);if(!i)return s;for(const a of i){const c=n.ru.get(a);s=s.unionWith(c.view.Wa)}return s}}function ym(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=A1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=E1.bind(null,e),e.nu.Q_=h1.bind(null,e.eventManager),e.nu.Tu=d1.bind(null,e.eventManager),e}function k1(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=N1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=T1.bind(null,e),e}class vi{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mi(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,n){return null}fu(e,n){return null}Vu(e){return R0(this.persistence,new S0,e.initialUser,this.serializer)}Ru(e){return new Xd(Qa.Ei,this.serializer)}Au(e){return new q0}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vi.provider={build:()=>new vi};class S1 extends vi{constructor(e){super(),this.cacheSizeBytes=e}mu(e,n){fe(this.persistence.referenceDelegate instanceof wi,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new p0(r,e.asyncQueue,n)}Ru(e){const n=this.cacheSizeBytes!==void 0?nt.withCacheSize(this.cacheSizeBytes):nt.DEFAULT;return new Xd(r=>wi.Ei(r,n),this.serializer)}}class da{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Au(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=I1.bind(null,this.syncEngine),await l1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new u1}()}createDatastore(e){const n=Mi(e.databaseInfo.databaseId),r=function(i){return new H0(i)}(e.databaseInfo);return function(i,a,c,u){return new W0(i,a,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,c){return new X0(r,s,i,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Au(this.syncEngine,n,0),function(){return _u.C()?new _u:new z0}())}createSyncEngine(e,n){return function(s,i,a,c,u,h,m){const f=new g1(s,i,a,c,u,h);return m&&(f.hu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Z(s);H(Sn,"RemoteStore shutting down."),i.aa.add(5),await us(i),i.ca.shutdown(),i.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}da.provider={build:()=>new da};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):Gt("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="FirestoreClient";class C1{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ke.UNAUTHENTICATED,this.clientId=ud.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{H(fn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(H(fn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $t;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=tl(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function jo(t,e){t.asyncQueue.verifyOperationInProgress(),H(fn,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Jd(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Su(t,e){t.asyncQueue.verifyOperationInProgress();const n=await P1(t);H(fn,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Nu(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Nu(e.remoteStore,s)),t._onlineComponents=e}async function P1(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(fn,"Using user provided OfflineComponentProvider");try{await jo(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Zn("Error using user provided cache. Falling back to memory cache: "+n),await jo(t,new vi)}}else H(fn,"Using default OfflineComponentProvider"),await jo(t,new S1(void 0));return t._offlineComponents}async function bm(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(fn,"Using user provided OnlineComponentProvider"),await Su(t,t._uninitializedComponentsProvider._online)):(H(fn,"Using default OnlineComponentProvider"),await Su(t,new da))),t._onlineComponents}function R1(t){return bm(t).then(e=>e.syncEngine)}async function vm(t){const e=await bm(t),n=e.eventManager;return n.onListen=x1.bind(null,e.syncEngine),n.onUnlisten=b1.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=y1.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=v1.bind(null,e.syncEngine),n}function D1(t,e,n={}){const r=new $t;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,h){const m=new wm({next:g=>{m.yu(),a.enqueueAndForget(()=>cm(i,f));const x=g.docs.has(c);!x&&g.fromCache?h.reject(new G(F.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&g.fromCache&&u&&u.source==="server"?h.reject(new G(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),f=new um(za(c.path),m,{includeMetadataChanges:!0,Fa:!0});return lm(i,f)}(await vm(t),t.asyncQueue,e,n,r)),r.promise}function V1(t,e,n={}){const r=new $t;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,h){const m=new wm({next:g=>{m.yu(),a.enqueueAndForget(()=>cm(i,f)),g.fromCache&&u.source==="server"?h.reject(new G(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),f=new um(c,m,{includeMetadataChanges:!0,Fa:!0});return lm(i,f)}(await vm(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(t,e,n){if(!n)throw new G(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function O1(t,e,n,r){if(e===!0&&r===!0)throw new G(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Pu(t){if(!K.isDocumentKey(t))throw new G(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ru(t){if(K.isDocumentKey(t))throw new G(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function il(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":W(12329,{type:typeof t})}function vt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=il(t);throw new G(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="firestore.googleapis.com",Du=!0;class Vu{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Nm,this.ssl=Du}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Du;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Yd;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<m0)throw new G(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}O1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_m((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qi{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vu({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vu(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $x;switch(r.type){case"firstParty":return new Kx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,Qh("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Cu.get(n);r&&(H("ComponentProvider","Removing Datastore"),Cu.delete(n),r.terminate())}(this),Promise.resolve()}}function M1(t,e,n,r={}){var s;t=vt(t,qi);const i=Ra(e),a=t._getSettings(),c=Object.assign(Object.assign({},a),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;a.host!==Nm&&a.host!==u&&Zn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h=Object.assign(Object.assign({},a),{host:u,ssl:i,emulatorOptions:r});if(!li(h,c)&&(t._setSettings(h),i&&(yg(`https://${u}`),Qh("Firestore",!0)),r.mockUserToken)){let m,f;if(typeof r.mockUserToken=="string")m=r.mockUserToken,f=Ke.MOCK_USER;else{m=wg(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new G(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ke(g)}t._authCredentials=new Hx(new ld(m,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zi(this.firestore,e,this._query)}}class st{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new an(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new st(this.firestore,e,this._key)}}class an extends zi{constructor(e,n,r){super(e,n,za(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new st(this.firestore,null,new K(e))}withConverter(e){return new an(this.firestore,e,this._path)}}function Bi(t,e,...n){if(t=Rt(t),Em("collection","path",e),t instanceof qi){const r=ve.fromString(e,...n);return Ru(r),new an(t,null,r)}{if(!(t instanceof st||t instanceof an))throw new G(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return Ru(r),new an(t.firestore,null,r)}}function et(t,e,...n){if(t=Rt(t),arguments.length===1&&(e=ud.newId()),Em("doc","path",e),t instanceof qi){const r=ve.fromString(e,...n);return Pu(r),new st(t,null,new K(r))}{if(!(t instanceof st||t instanceof an))throw new G(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return Pu(r),new st(t.firestore,t instanceof an?t.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ou="AsyncQueue";class Mu{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new em(this,"async_queue_retry"),this.ju=()=>{const r=To();r&&H(Ou,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const n=To();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const n=To();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const n=new $t;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!ur(e))throw e;H(Ou,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const n=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,Gt("INTERNAL UNHANDLED ERROR: ",Lu(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=n,n}enqueueAfterDelay(e,n,r){this.Ju(),this.zu.indexOf(e)>-1&&(n=0);const s=el.createAndSchedule(this,e,n,r,i=>this.Xu(i));return this.Uu.push(s),s}Ju(){this.Ku&&W(47125,{ec:Lu(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const n of this.Uu)if(n.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Uu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const n=this.Uu.indexOf(e);this.Uu.splice(n,1)}}function Lu(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class wn extends qi{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Mu,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Mu(e),this._firestoreClient=void 0,await e}}}function L1(t,e){const n=typeof t=="object"?t:Cx(),r=typeof t=="string"?t:di,s=jx(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=gg("firestore");i&&M1(s,...i)}return s}function Ui(t){if(t._terminated)throw new G(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||F1(t),t._firestoreClient}function F1(t){var e,n,r;const s=t._freezeSettings(),i=function(c,u,h,m){return new cy(c,u,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,_m(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new C1(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ir(Ue.fromBase64String(e))}catch(n){throw new G(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ir(Ue.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Be(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1=/^__.*__$/;class z1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new yn(e,this.data,this.fieldMask,n,this.fieldTransforms):new ls(e,this.data,n,this.fieldTransforms)}}class Tm{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new yn(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function jm(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W(40011,{oc:t})}}class cl{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this._c(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new cl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ac({path:r,cc:!1});return s.lc(e),s}hc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ac({path:r,cc:!1});return s._c(),s}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return _i(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(jm(this.oc)&&q1.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class B1{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Mi(e)}dc(e,n,r,s=!1){return new cl({oc:e,methodName:n,Ec:r,path:Be.emptyPath(),cc:!1,Ic:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $i(t){const e=t._freezeSettings(),n=Mi(t._databaseId);return new B1(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ul(t,e,n,r,s,i={}){const a=t.dc(i.merge||i.mergeFields?2:0,e,n,s);hl("Data must be an object, but it was:",a,r);const c=km(r,a);let u,h;if(i.merge)u=new gt(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const m=[];for(const f of i.mergeFields){const g=ma(e,f,n);if(!a.contains(g))throw new G(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Cm(m,g)||m.push(g)}u=new gt(m),h=a.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,h=a.fieldTransforms;return new z1(new rt(c),u,h)}class Hi extends ol{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hi}}function Im(t,e,n,r){const s=t.dc(1,e,n);hl("Data must be an object, but it was:",s,r);const i=[],a=rt.empty();xn(r,(u,h)=>{const m=dl(e,u,n);h=Rt(h);const f=s.hc(m);if(h instanceof Hi)i.push(m);else{const g=Gi(h,f);g!=null&&(i.push(m),a.set(m,g))}});const c=new gt(i);return new Tm(a,c,s.fieldTransforms)}function Am(t,e,n,r,s,i){const a=t.dc(1,e,n),c=[ma(e,r,n)],u=[s];if(i.length%2!=0)throw new G(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(ma(e,i[g])),u.push(i[g+1]);const h=[],m=rt.empty();for(let g=c.length-1;g>=0;--g)if(!Cm(h,c[g])){const x=c[g];let _=u[g];_=Rt(_);const k=a.hc(x);if(_ instanceof Hi)h.push(x);else{const P=Gi(_,k);P!=null&&(h.push(x),m.set(x,P))}}const f=new gt(h);return new Tm(m,f,a.fieldTransforms)}function Gi(t,e){if(Sm(t=Rt(t)))return hl("Unsupported field value:",e,t),km(t,e);if(t instanceof ol)return function(r,s){if(!jm(s.oc))throw s.Tc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Tc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const c of r){let u=Gi(c,s.Pc(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Rt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Py(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Re.fromDate(r);return{timestampValue:yi(s.serializer,i)}}if(r instanceof Re){const i=new Re(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yi(s.serializer,i)}}if(r instanceof al)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ir)return{bytesValue:Ud(s.serializer,r._byteString)};if(r instanceof st){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Tc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ha(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ll)return function(a,c){return{mapValue:{fields:{[yd]:{stringValue:bd},[mi]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw c.Tc("VectorValues must only contain numeric values.");return Ba(c.serializer,h)})}}}}}}(r,s);throw s.Tc(`Unsupported field value: ${il(r)}`)}(t,e)}function km(t,e){const n={};return dd(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xn(t,(r,s)=>{const i=Gi(s,e.uc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Sm(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Re||t instanceof al||t instanceof ir||t instanceof st||t instanceof ol||t instanceof ll)}function hl(t,e,n){if(!Sm(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=il(n);throw r==="an object"?e.Tc(t+" a custom object"):e.Tc(t+" "+r)}}function ma(t,e,n){if((e=Rt(e))instanceof ds)return e._internalPath;if(typeof e=="string")return dl(t,e);throw _i("Field path arguments must be of type string or ",t,!1,void 0,n)}const U1=new RegExp("[~\\*/\\[\\]]");function dl(t,e,n){if(e.search(U1)>=0)throw _i(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ds(...e.split("."))._internalPath}catch{throw _i(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function _i(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new G(F.INVALID_ARGUMENT,c+t+u)}function Cm(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new st(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Rm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $1 extends Pm{data(){return super.data()}}function Rm(t,e){return typeof e=="string"?dl(t,e):e instanceof ds?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class G1{convertValue(e,n="none"){switch(dn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(hn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw W(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return xn(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[mi].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>je(a.doubleValue));return new ll(i)}convertGeoPoint(e){return new al(je(e.latitude),je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ki(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ts(e));default:return null}}convertTimestamp(e){const n=un(e);return new Re(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ve.fromString(e);fe(Wd(r),9688,{name:e});const s=new ns(r.get(1),r.get(3)),i=new K(r.popFirst(5));return s.isEqual(n)||Gt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dm extends Pm{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ei(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Rm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ei extends Dm{data(e={}){return super.data(e)}}class Q1{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new zr(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ei(this._firestore,this._userDataWriter,r.key,r,new zr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const u=new ei(s._firestore,s._userDataWriter,c.doc.key,c.doc,new zr(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new ei(s._firestore,s._userDataWriter,c.doc.key,c.doc,new zr(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,m=-1;return c.type!==0&&(h=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),m=a.indexOf(c.doc.key)),{type:K1(c.type),doc:u,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function K1(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(t){t=vt(t,st);const e=vt(t.firestore,wn);return D1(Ui(e),t._key).then(n=>Y1(e,t,n))}class Vm extends G1{constructor(e){super(),this.firestore=e}convertBytes(e){return new ir(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new st(this.firestore,null,n)}}function Om(t){t=vt(t,zi);const e=vt(t.firestore,wn),n=Ui(e),r=new Vm(e);return H1(t._query),V1(n,t._query).then(s=>new Q1(e,r,t,s))}function W1(t,e,n){t=vt(t,st);const r=vt(t.firestore,wn),s=ml(t.converter,e,n);return fs(r,[ul($i(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ze.none())])}function ms(t,e,n,...r){t=vt(t,st);const s=vt(t.firestore,wn),i=$i(s);let a;return a=typeof(e=Rt(e))=="string"||e instanceof ds?Am(i,"updateDoc",t._key,e,n,r):Im(i,"updateDoc",t._key,e),fs(s,[a.toMutation(t._key,Ze.exists(!0))])}function Mm(t){return fs(vt(t.firestore,wn),[new Vi(t._key,Ze.none())])}function Lm(t,e){const n=vt(t.firestore,wn),r=et(t),s=ml(t.converter,e);return fs(n,[ul($i(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Ze.exists(!1))]).then(()=>r)}function fs(t,e){return function(r,s){const i=new $t;return r.asyncQueue.enqueueAndForget(async()=>_1(await R1(r),s,i)),i.promise}(Ui(t),e)}function Y1(t,e,n){const r=n.docs.get(e._key),s=new Vm(t);return new Dm(t,s,e._key,r,new zr(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=$i(e)}set(e,n,r){this._verifyNotCommitted();const s=Io(e,this._firestore),i=ml(s.converter,n,r),a=ul(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(a.toMutation(s._key,Ze.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Io(e,this._firestore);let a;return a=typeof(n=Rt(n))=="string"||n instanceof ds?Am(this._dataReader,"WriteBatch.update",i._key,n,r,s):Im(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(a.toMutation(i._key,Ze.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Io(e,this._firestore);return this._mutations=this._mutations.concat(new Vi(n._key,Ze.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Io(t,e){if((t=Rt(t)).firestore!==e)throw new G(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(t){return Ui(t=vt(t,wn)),new X1(t,e=>fs(t,e))}(function(e,n=!0){(function(s){lr=s})(Sx),ui(new Jr("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),c=new wn(new Gx(r.getProvider("auth-internal")),new Wx(a,r.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new G(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ns(h.options.projectId,m)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Wn(Uc,$c,e),Wn(Uc,$c,"esm2017")})();const J1={apiKey:"AIzaSyDjbHcvCVl8kUKJgDdQtO-eyVoLYkTy1Bw",authDomain:"softis-a8ac1.firebaseapp.com",projectId:"softis-a8ac1",storageBucket:"softis-a8ac1.appspot.com",messagingSenderId:"686422979347",appId:"1:686422979347:web:28a018d0610f29ef6b0f0a"},Z1=Jh(J1),ke=L1(Z1),qe=[];for(let t=0;t<256;++t)qe.push((t+256).toString(16).slice(1));function ew(t,e=0){return(qe[t[e+0]]+qe[t[e+1]]+qe[t[e+2]]+qe[t[e+3]]+"-"+qe[t[e+4]]+qe[t[e+5]]+"-"+qe[t[e+6]]+qe[t[e+7]]+"-"+qe[t[e+8]]+qe[t[e+9]]+"-"+qe[t[e+10]]+qe[t[e+11]]+qe[t[e+12]]+qe[t[e+13]]+qe[t[e+14]]+qe[t[e+15]]).toLowerCase()}let Ao;const tw=new Uint8Array(16);function nw(){if(!Ao){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ao=crypto.getRandomValues.bind(crypto)}return Ao(tw)}const rw=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Fu={randomUUID:rw};function sw(t,e,n){var s;if(Fu.randomUUID&&!e&&!t)return Fu.randomUUID();t=t||{};const r=t.random??((s=t.rng)==null?void 0:s.call(t))??nw();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,ew(r)}const ps="questions",Tt="blog",Gn=async()=>{try{const t=Bi(ke,ps),e=await Om(t),n=[];return e.forEach(r=>{n.push({id:r.id,...r.data()})}),n}catch(t){return console.error("Erreur lors du chargement des questions:",t),[]}},iw=async(t,e,n)=>{try{const r={question:t,name:e,email:n,answer:null,date:new Date().toISOString(),status:"pending"};return{id:(await Lm(Bi(ke,ps),r)).id,...r}}catch(r){return console.error("Erreur lors de l'ajout d'une question:",r),null}},ow=async(t,e)=>{try{const n=et(ke,ps,t);if(!(await dr(n)).exists())return console.error(`Question avec ID ${t} n'existe pas`),!1;const s=new Date().toISOString();return await ms(n,{answer:e,status:"answered",answerDate:s}),!0}catch(n){return console.error("Erreur lors de la réponse à une question:",n),console.error("Détails:",JSON.stringify(n)),!1}},aw=async t=>{try{return await Mm(et(ke,ps,t)),!0}catch(e){return console.error("Erreur lors de la suppression d'une question:",e),!1}},lw=async t=>{try{const{id:e,...n}=t,r=et(ke,ps,e),s=await dr(r);return s.exists()?(n.status==="answered"&&s.data().status==="pending"&&(n.answerDate=new Date().toISOString()),await ms(r,n),!0):(console.error(`Question avec ID ${e} n'existe pas`),!1)}catch(e){return console.error("Erreur lors de la mise à jour d'une question:",e),console.error("Détails:",JSON.stringify(e)),!1}},fa=async()=>{try{const t=Bi(ke,Tt),e=await Om(t),n=[];return e.forEach(r=>{const s=r.data(),i={id:r.id,...s};Array.isArray(i.comments)||(i.comments=[]),i.comments.length>0&&(console.log(`Post ${i.id} has ${i.comments.length} comments:`,i.comments),console.log(`Approved comments: ${i.comments.filter(a=>a.status==="approved").length}`)),n.push(i)}),n}catch(t){return console.error("Erreur lors du chargement des articles de blog:",t),[]}},pa=async t=>{try{const e=await dr(et(ke,Tt,t));return e.exists()?{id:e.id,...e.data()}:null}catch(e){return console.error("Erreur lors du chargement d'un article de blog:",e),null}},cw=async(t,e,n,r,s,i)=>{try{const a={title:t,content:e,author:n,email:r,date:new Date().toISOString(),tags:s,imageUrl:i||null,comments:[],status:"published"};return{id:(await Lm(Bi(ke,Tt),a)).id,...a}}catch(a){return console.error("Erreur lors de l'ajout d'un article de blog:",a),null}},uw=async t=>{try{const{id:e,...n}=t;return await W1(et(ke,Tt,e),n),t}catch(e){return console.error("Erreur lors de la mise à jour d'un article de blog:",e),null}},hw=async t=>{try{return await Mm(et(ke,Tt,t)),!0}catch(e){return console.error("Erreur lors de la suppression d'un article de blog:",e),!1}},dw=async(t,e,n,r)=>{try{console.log(`Ajout d'un commentaire pour l'article ${t}`);const s=await dr(et(ke,Tt,t));if(!s.exists())return console.error(`Article avec ID ${t} non trouvé`),null;const i=s.data(),a={id:sw(),postId:t,author:e,email:n,content:r,date:new Date().toISOString(),status:"approved"},c=[...i.comments||[],a];return console.log("Commentaire créé:",a),console.log("Tentative de mise à jour avec les commentaires:",c),await ms(et(ke,Tt,t),{comments:c}),console.log(`Commentaire ajouté avec succès à l'article ${t}`),a}catch(s){return console.error("Erreur lors de l'ajout d'un commentaire:",s),console.error("Détails de l'erreur:",JSON.stringify(s)),null}},mw=async(t,e)=>{try{console.log(`Tentative d'approbation du commentaire ${e} pour l'article ${t}`);const n=await dr(et(ke,Tt,t));if(!n.exists())return console.error(`Article avec ID ${t} non trouvé`),!1;const r=n.data();if(!Array.isArray(r.comments))return console.error("Le champ comments n'est pas un tableau:",r.comments),!1;const s=r.comments.findIndex(a=>a.id===e);if(s===-1)return console.error(`Commentaire avec ID ${e} non trouvé dans l'article ${t}`),!1;console.log("Commentaire avant mise à jour:",r.comments[s]);const i=r.comments.map(a=>a.id===e?{...a,status:"approved"}:a);return console.log("Commentaires mis à jour:",i),await ms(et(ke,Tt,t),{comments:i}),console.log(`Commentaire ${e} approuvé avec succès`),!0}catch(n){return console.error("Erreur lors de l'approbation d'un commentaire:",n),console.error("Détails:",JSON.stringify(n)),!1}},fw=async(t,e)=>{try{const n=await dr(et(ke,Tt,t));if(!n.exists())return!1;const s=n.data().comments.filter(i=>i.id!==e);return await ms(et(ke,Tt,t),{comments:s}),!0}catch(n){return console.error("Erreur lors de la suppression d'un commentaire:",n),!1}},pw={Sparkles:Qp,HelpCircle:ln,Shirt:Gp,Clock:Xr,AlertCircle:qh,Calendar:Ti,Users:Kp,Dumbbell:Op,MessageCircle:Ut},gw=()=>{const[t,e]=U.useState(null),[n,r]=U.useState([]),[s,i]=U.useState([]),[a,c]=U.useState(!0);U.useEffect(()=>{(async()=>{try{c(!0);const g=await Gn(),x=g.filter(_=>_.id.startsWith("faq-")).map(_=>({id:_.id,question:_.question,answer:_.answer,icon:pw[_.id.includes("faq-")?"HelpCircle":"MessageCircle"]||ln}));r(x),i(g.filter(_=>_.status==="answered"&&!_.id.startsWith("faq-")))}catch(g){console.error("Erreur lors du chargement des questions:",g)}finally{c(!1)}})()},[]);const u=f=>{e(t===f?null:f)},m={"@context":"https://schema.org","@type":"FAQPage",mainEntity:[...n.map(f=>({"@type":"Question",name:f.question,acceptedAnswer:{"@type":"Answer",text:typeof f.answer=="string"?f.answer:"お問い合わせください"}})),...s.map(f=>({"@type":"Question",name:f.question,acceptedAnswer:{"@type":"Answer",text:f.answer||""}}))]};return o.jsxs(o.Fragment,{children:[o.jsx(gn,{title:"よくある質問 - ピラティススタジオSoftis",description:"Softisピラティススタジオに関するよくある質問をまとめました。レッスンの予約、持ち物、キャンセル方法などについてご案内します。",keywords:"ピラティス, よくある質問, FAQ, 初心者, 予約方法, キャンセル, 持ち物, Softis, ピラティススタジオ",structuredData:m}),o.jsxs("div",{className:"relative pt-32 pb-16 text-white",children:[o.jsx("div",{className:"absolute inset-0 z-0 overflow-hidden bg-gradient-to-r from-turquoise-700 to-turquoise-500",children:o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute transform rotate-45 -translate-x-1/4 -translate-y-1/4 -left-1/4 -top-1/4 w-1/2 h-1/2 bg-white/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute transform -rotate-12 translate-x-1/4 translate-y-1/4 right-1/4 bottom-1/4 w-1/2 h-1/2 bg-white/20 rounded-full blur-3xl"})]})}),o.jsx(ie,{className:"relative z-10",children:o.jsxs(Q.div,{className:"text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7},children:[o.jsx("h1",{className:"text-4xl md:text-5xl font-serif font-bold text-white mb-4",children:"よくある質問"}),o.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-turquoise-300 to-pink-200 rounded-full mx-auto mb-4"}),o.jsx("p",{className:"text-white text-xl max-w-3xl mx-auto",children:"Softisに関するご質問にお答えします"})]})})]}),o.jsx(_e,{className:"bg-turquoise-50",children:o.jsx(ie,{children:o.jsxs("div",{className:"max-w-3xl mx-auto",children:[a?o.jsxs("div",{className:"text-center p-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-turquoise-700 mx-auto"}),o.jsx("p",{className:"mt-4 text-gray-600",children:"FAQを読み込んでいます..."})]}):o.jsxs(o.Fragment,{children:[o.jsx("h2",{className:"text-2xl font-serif font-bold text-gray-800 mb-8 text-center",children:"スタッフからの回答"}),n.length>0?o.jsx("div",{className:"space-y-4",children:n.map((f,g)=>{const x=f.icon,_=t===g;return o.jsxs(Q.div,{className:`bg-gradient-to-br from-turquoise-50 via-pink-50 to-white/90 border ${_?"border-turquoise-300":"border-turquoise-100"} rounded-xl shadow-lg hover:shadow-xl transition-all duration-300`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:g*.1},whileHover:{scale:1.01},children:[o.jsx("button",{className:"w-full text-left p-6 focus:outline-none",onClick:()=>u(g),"aria-expanded":_,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`flex-shrink-0 w-12 h-12 ${_?"bg-turquoise-200":"bg-turquoise-100"} rounded-full flex items-center justify-center shadow-inner transition-colors duration-300`,children:o.jsx(x,{className:`h-6 w-6 ${_?"text-turquoise-600":"text-turquoise-500"} transition-colors duration-300`})}),o.jsx("h3",{className:`text-xl font-bold ${_?"text-turquoise-700":"text-turquoise-600"} transition-colors duration-300`,children:f.question})]}),o.jsx("div",{className:`flex-shrink-0 w-6 h-6 bg-${_?"turquoise":"gray"}-100 rounded-full flex items-center justify-center`,children:_?o.jsx(kc,{className:"h-4 w-4 text-turquoise-600"}):o.jsx(Ac,{className:"h-4 w-4 text-gray-600"})})]})}),o.jsx(nn,{children:_&&o.jsx(Q.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"px-6 pb-6 pt-0",children:o.jsx("div",{className:"text-gray-800 bg-white/80 p-4 rounded-lg shadow-sm leading-relaxed border-l-4 border-turquoise-300",children:f.answer})})})]},g)})}):o.jsxs("div",{className:"text-center p-8 bg-white/80 rounded-lg shadow-sm mb-12",children:[o.jsx(ln,{className:"h-12 w-12 text-turquoise-400 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"FAQデータがありません。"})]}),s.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("h2",{className:"text-2xl font-serif font-bold text-gray-800 mb-8 text-center mt-16",children:"お客様からよくある質問"}),o.jsx("div",{className:"space-y-4",children:s.map((f,g)=>{const x=g+n.length,_=t===x;return o.jsxs(Q.div,{className:`bg-gradient-to-br from-turquoise-50 via-pink-50 to-white/90 border ${_?"border-turquoise-300":"border-turquoise-100"} rounded-xl shadow-lg hover:shadow-xl transition-all duration-300`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:g*.1},whileHover:{scale:1.01},children:[o.jsx("button",{className:"w-full text-left p-6 focus:outline-none",onClick:()=>u(x),"aria-expanded":_,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`flex-shrink-0 w-12 h-12 ${_?"bg-turquoise-200":"bg-turquoise-100"} rounded-full flex items-center justify-center shadow-inner transition-colors duration-300`,children:o.jsx(Ut,{className:`h-6 w-6 ${_?"text-turquoise-600":"text-turquoise-500"} transition-colors duration-300`})}),o.jsx("h3",{className:`text-xl font-bold ${_?"text-turquoise-700":"text-turquoise-600"} transition-colors duration-300`,children:f.question})]}),o.jsx("div",{className:`flex-shrink-0 w-6 h-6 bg-${_?"turquoise":"gray"}-100 rounded-full flex items-center justify-center`,children:_?o.jsx(kc,{className:"h-4 w-4 text-turquoise-600"}):o.jsx(Ac,{className:"h-4 w-4 text-gray-600"})})]})}),o.jsx(nn,{children:_&&o.jsx(Q.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"px-6 pb-6 pt-0",children:o.jsx("div",{className:"text-gray-800 bg-white/80 p-4 rounded-lg shadow-sm leading-relaxed border-l-4 border-turquoise-300",children:f.answer})})})]},f.id)})})]})]}),o.jsxs(Q.div,{className:"mt-12 text-center p-6 bg-gradient-to-br from-turquoise-50 via-pink-50 to-white/90 border border-turquoise-100 rounded-xl shadow-lg",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.8},children:[o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx("div",{className:"w-16 h-16 bg-turquoise-100 rounded-full flex items-center justify-center shadow-inner",children:o.jsx(Ut,{className:"h-8 w-8 text-turquoise-500"})})}),o.jsx("h3",{className:"text-xl font-bold text-turquoise-700 mb-3",children:"まだ質問がありますか？"}),o.jsx("p",{className:"text-gray-800 mb-6",children:"他にわからないことがあれば、お気軽にお問い合わせください。"}),o.jsxs(we,{to:"/questions",className:"inline-flex items-center px-6 py-3 bg-turquoise-500 text-white font-medium rounded-lg shadow-md hover:bg-turquoise-600 transition-colors duration-300",children:[o.jsx(Ut,{className:"h-5 w-5 mr-2"}),"質問を投稿する"]})]})]})})})]})},xw=({src:t,alt:e,className:n="",overlayColor:r="rgb(0, 62, 76)",overlayOpacity:s=.7,children:i,quality:a=85})=>o.jsxs("div",{className:`relative ${n}`,children:[o.jsxs("div",{className:"absolute inset-0 z-0 overflow-hidden",children:[o.jsx(Oe,{src:t,alt:e,className:"w-full h-full object-cover",loading:"eager",quality:a,format:"webp"}),o.jsx("div",{className:"absolute inset-0",style:{backgroundColor:r,opacity:s}})]}),o.jsx("div",{className:"relative z-10",children:i})]}),yw=()=>{const t=[{src:"/src/assets/IMG/IMG_2593.jpeg",alt:"Image de studio Pilates 1",description:"Notre studio principal avec équipement Pilates"},{src:"/src/assets/IMG/IMG_2602.jpeg",alt:"Image de studio Pilates 2",description:"Espace d'entraînement avec reformer Pilates"},{src:"/src/assets/IMG/IMG_2364.jpeg",alt:"Image de studio Pilates 3",description:"Vue d'ensemble de notre espace d'entraînement"},{src:"/src/assets/IMG/IMG_1114.jpeg",alt:"Image de studio Pilates 4",description:"Séance de Pilates avec instructeur"},{src:"/src/assets/IMG/IMG_1601.jpeg",alt:"Image de studio Pilates 5",description:"Exercices sur équipement spécialisé"},{src:"/src/assets/IMG/IMG_2616.jpeg",alt:"Image de studio Pilates 6",description:"Entraînement personnalisé"},{src:"/src/assets/IMG/IMG_2628.jpeg",alt:"Image de studio Pilates 7",description:"Nos équipements modernes"},{src:"/src/assets/machine/IMG_6780.jpeg",alt:"Reformer Pilates",description:"Notre reformer Pilates de dernière génération"},{src:"/src/assets/machine/IMG_1119.jpeg",alt:"Barrel Pilates",description:"Barrel pour exercices spécifiques"},{src:"/src/assets/machine/IMG_8645.jpeg",alt:"Chair Pilates",description:"Chair Pilates pour renforcement musculaire"}];return o.jsxs(o.Fragment,{children:[o.jsx(xw,{src:"/src/assets/IMG/IMG_2364.jpeg",alt:"Fond de la galerie",className:"pt-32 pb-16",overlayColor:"rgb(0, 62, 76)",overlayOpacity:.7,children:o.jsx(ie,{children:o.jsxs("div",{className:"max-w-3xl",children:[o.jsx(Q.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-4xl md:text-5xl font-serif font-bold mb-4 text-white",children:"ギャラリー"}),o.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-turquoise-300 to-pink-200 rounded-full mb-6"}),o.jsx(Q.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"text-xl text-white/90",children:"スタジオと設備の写真をご覧ください。"})]})})}),o.jsx(_e,{className:"bg-turquoise-50",children:o.jsxs(ie,{children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl font-serif font-bold text-turquoise-700 mb-4",children:"スタジオフォト"}),o.jsx("div",{className:"w-20 h-1 bg-gradient-to-r from-turquoise-300 to-pink-200 rounded-full mx-auto mb-6"}),o.jsx("p",{className:"text-gray-800 text-lg max-w-2xl mx-auto bg-white/80 p-3 rounded-lg shadow-sm",children:"当スタジオの設備と雰囲気をご覧ください"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map((e,n)=>o.jsxs(Q.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:n*.1},className:"bg-gradient-to-br from-turquoise-50 via-pink-50 to-white/90 border border-turquoise-100 rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:[o.jsx("div",{className:"aspect-[4/3] overflow-hidden",children:o.jsx(Oe,{src:e.src,alt:e.alt,className:"w-full h-full object-cover transition-transform duration-500 hover:scale-110",loading:"lazy",quality:85,format:"webp",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"})}),o.jsxs("div",{className:"p-6",children:[o.jsx("h3",{className:"font-bold text-turquoise-700 mb-2",children:e.alt}),o.jsx("p",{className:"text-gray-800 bg-white/80 p-2 rounded-lg shadow-sm text-sm",children:e.description})]})]},n))})]})})]})},ww=()=>{const[t,e]=U.useState({name:"",email:"",question:""}),[n,r]=U.useState(!1),[s,i]=U.useState(!1),[a,c]=U.useState(null),u=m=>{const{name:f,value:g}=m.target;e(x=>({...x,[f]:g}))},h=async m=>{m.preventDefault(),r(!0),c(null);try{await iw(t.question,t.name,t.email)?(e({name:"",email:"",question:""}),i(!0),setTimeout(()=>{i(!1)},5e3)):c("質問の送信中に問題が発生しました。もう一度お試しください。")}catch(f){console.error("Erreur lors de la soumission de la question:",f),c("エラーが発生しました。後でもう一度お試しください。")}finally{r(!1)}};return o.jsxs("div",{className:"bg-gradient-to-br from-turquoise-50 via-pink-50 to-white/90 border border-turquoise-100 rounded-xl shadow-lg p-8",children:[o.jsx("h2",{className:"text-2xl font-serif font-bold text-turquoise-700 mb-6",children:"ご質問はこちら"}),o.jsx("div",{className:"w-20 h-1 bg-gradient-to-r from-turquoise-300 to-pink-200 rounded-full mb-6"}),a&&o.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg mb-4",children:a}),s?o.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg",children:"ご質問ありがとうございます。スタッフが確認次第、ご回答させていただきます。"}):o.jsxs("form",{onSubmit:h,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"name",className:"block text-neutral-700 text-sm font-medium mb-1",children:["お名前 ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"name",name:"name",value:t.name,onChange:u,className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-turquoise-300 shadow-sm",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"email",className:"block text-neutral-700 text-sm font-medium mb-1",children:["メールアドレス ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:u,className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-turquoise-300 shadow-sm",required:!0}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"ご回答はメールでお送りします"})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"question",className:"block text-neutral-700 text-sm font-medium mb-1",children:["ご質問 ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("textarea",{id:"question",name:"question",value:t.question,onChange:u,rows:4,className:"w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-turquoise-300 shadow-sm",required:!0})]}),o.jsx("div",{className:"text-center pt-4",children:o.jsxs(Pe,{variant:"primary",size:"lg",type:"submit",disabled:n,className:"shadow-md hover:shadow-lg transform transition hover:-translate-y-1",children:[n?"送信中...":"質問を送信する"," ",!n&&o.jsx(ka,{className:"ml-2 h-4 w-4"})]})})]})]})},bw=()=>{const[t,e]=U.useState([]),[n,r]=U.useState(!0);U.useEffect(()=>{(async()=>{try{r(!0);const a=await Gn();e(a.filter(c=>c.status==="answered"&&!c.id.startsWith("faq-")))}catch(a){console.error("Erreur lors du chargement des questions:",a)}finally{r(!1)}})()},[]);const s={"@context":"https://schema.org","@type":"FAQPage",mainEntity:t.map(i=>({"@type":"Question",name:i.question,acceptedAnswer:{"@type":"Answer",text:i.answer||""}}))};return o.jsxs(o.Fragment,{children:[o.jsx(gn,{title:"よくある質問 | Softis ピラティススタジオ",description:"Softisピラティススタジオに関するよくある質問と回答。お客様から実際に寄せられた質問にお答えします。",keywords:"ピラティス, よくある質問, FAQ, 質問と回答, Softis, ピラティススタジオ, 豊田市",structuredData:s}),o.jsxs("div",{className:"relative pt-32 pb-16 text-white",children:[o.jsx("div",{className:"absolute inset-0 z-0 overflow-hidden bg-gradient-to-r from-turquoise-700 to-turquoise-500",children:o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute transform rotate-45 -translate-x-1/4 -translate-y-1/4 -left-1/4 -top-1/4 w-1/2 h-1/2 bg-white/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute transform -rotate-12 translate-x-1/4 translate-y-1/4 right-1/4 bottom-1/4 w-1/2 h-1/2 bg-white/20 rounded-full blur-3xl"})]})}),o.jsx(ie,{className:"relative z-10",children:o.jsxs(Q.div,{className:"text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7},children:[o.jsx("h1",{className:"text-4xl md:text-5xl font-serif font-bold text-white mb-4",children:"質問と回答"}),o.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-turquoise-300 to-pink-200 rounded-full mx-auto mb-4"}),o.jsx("p",{className:"text-white text-xl max-w-3xl mx-auto",children:"お客様から寄せられたご質問とその回答をご紹介します"})]})})]}),o.jsx(_e,{className:"bg-turquoise-50",children:o.jsx(ie,{children:o.jsxs("div",{className:"max-w-3xl mx-auto",children:[n?o.jsxs("div",{className:"text-center p-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-turquoise-700 mx-auto"}),o.jsx("p",{className:"mt-4 text-gray-600",children:"質問を読み込んでいます..."})]}):t.length>0?o.jsx("div",{className:"space-y-6 mb-12",children:t.map((i,a)=>o.jsx(Q.div,{className:"bg-gradient-to-br from-turquoise-50 via-pink-50 to-white/90 border border-turquoise-100 rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:a*.1},children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[o.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-turquoise-100 rounded-full flex items-center justify-center",children:o.jsx(ln,{className:"h-5 w-5 text-turquoise-600"})}),o.jsx("h3",{className:"text-lg md:text-xl font-bold text-turquoise-700",children:i.question})]}),o.jsx("div",{className:"ml-14 text-gray-800 bg-white/80 p-4 rounded-lg shadow-sm leading-relaxed border-l-4 border-turquoise-300",children:i.answer})]})},i.id))}):o.jsxs("div",{className:"text-center p-8 bg-white/80 rounded-lg shadow-sm mb-12",children:[o.jsx(ln,{className:"h-12 w-12 text-turquoise-400 mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"まだユーザーからの回答済み質問はありません。"}),o.jsx("p",{className:"text-gray-600",children:"下のフォームから質問を投稿してください。"})]}),o.jsx(ww,{})]})})})]})},qm=({onLogout:t})=>{const e=Sh();return o.jsxs("div",{className:"mb-6 flex flex-wrap items-center justify-between bg-white rounded-xl shadow p-2 mb-6",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs(we,{to:"/admin",className:`px-4 py-2 rounded-lg flex items-center space-x-2 ${e.pathname==="/admin"?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[o.jsx(ln,{className:"h-4 w-4"}),o.jsx("span",{children:"FAQ Admin"})]}),o.jsxs(we,{to:"/admin/blog",className:`px-4 py-2 rounded-lg flex items-center space-x-2 ${e.pathname==="/admin/blog"?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[o.jsx(Cp,{className:"h-4 w-4"}),o.jsx("span",{children:"Blog Admin"})]}),o.jsxs(we,{to:"/admin/firebase",className:`px-4 py-2 rounded-lg flex items-center space-x-2 ${e.pathname==="/admin/firebase"?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[o.jsx(ii,{className:"h-4 w-4"}),o.jsx("span",{children:"Firebase"})]})]}),o.jsxs("button",{onClick:t,className:"px-4 py-2 rounded-lg flex items-center space-x-2 bg-red-50 text-red-600 hover:bg-red-100",children:[o.jsx(ji,{className:"h-4 w-4"}),o.jsx("span",{children:"Déconnexion"})]})]})},vw="admin123",Qi=()=>localStorage.getItem("admin_auth")==="true",_w=t=>t===vw?(localStorage.setItem("admin_auth","true"),!0):!1,fl=()=>{localStorage.removeItem("admin_auth")},Ew=()=>{const t=pn(),[e,n]=U.useState([]),[r,s]=U.useState(null),[i,a]=U.useState(""),[c,u]=U.useState(!1),[h,m]=U.useState("all"),[f,g]=U.useState(!1),[x,_]=U.useState(null);U.useEffect(()=>{if(!Qi()){t("/admin-login");return}k()},[t]);const k=async()=>{try{g(!0),_(null);const v=await Gn();n(v)}catch(v){console.error("Erreur lors du chargement des questions:",v),_("Erreur lors du chargement des questions. Veuillez réessayer.")}finally{g(!1)}},P=()=>{fl(),t("/admin-login")},C=async v=>{if(window.confirm("この質問を削除してもよろしいですか？"))try{g(!0),await aw(v)?(await k(),(r==null?void 0:r.id)===v&&(s(null),a(""))):_("質問の削除中にエラーが発生しました。")}catch(N){console.error("Erreur lors de la suppression de la question:",N),_("質問の削除中にエラーが発生しました。")}finally{g(!1)}},V=v=>{s(v),a(v.answer||""),u(!1)},M=()=>{u(!0)},$=async()=>{if(r)try{if(g(!0),_(null),await ow(r.id,i)){await k();const T=(await Gn()).find(E=>E.id===r.id);T&&s(T),u(!1)}else _("質問への回答の保存中にエラーが発生しました。")}catch(v){console.error("Erreur lors de la réponse à la question:",v),_("質問への回答の保存中にエラーが発生しました。")}finally{g(!1)}},ee=async()=>{if(r)try{if(g(!0),_(null),await lw(r)){await k();const T=(await Gn()).find(E=>E.id===r.id);T&&s(T),u(!1)}else _("質問の更新中にエラーが発生しました。")}catch(v){console.error("Erreur lors de la mise à jour de la question:",v),_("質問の更新中にエラーが発生しました。")}finally{g(!1)}},O=async()=>{try{g(!0);const v=await Gn(),N=JSON.stringify(v,null,2),T=new Blob([N],{type:"application/json"}),E=URL.createObjectURL(T),re=document.createElement("a");re.href=E,re.download=`softis-questions-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(re),re.click(),document.body.removeChild(re),URL.revokeObjectURL(E)}catch(v){console.error("Erreur lors de l'export des questions:",v),_("質問のエクスポート中にエラーが発生しました。")}finally{g(!1)}},I=v=>{var E;const N=(E=v.target.files)==null?void 0:E[0];if(!N)return;const T=new FileReader;T.onload=re=>{var ne;try{const Ne=(ne=re.target)==null?void 0:ne.result,be=JSON.parse(Ne);alert("Firebase経由でのインポート機能は現在開発中です。FirebaseAdminページから直接データを管理してください。")}catch(Ne){console.error("Erreur lors de l'import des questions:",Ne),_("質問のインポート中にエラーが発生しました。")}},T.readAsText(N)},y=e.filter(v=>h==="all"?!0:h==="pending"?v.status==="pending":v.status==="answered"),b=v=>new Date(v).toLocaleString("ja-JP");return f&&e.length===0?o.jsx("div",{className:"pt-32 pb-16 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-700 mx-auto"}),o.jsx("p",{className:"mt-4 text-gray-600",children:"質問を読み込んでいます..."})]})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative pt-32 pb-16 text-white",children:[o.jsx("div",{className:"absolute inset-0 z-0 overflow-hidden bg-gradient-to-r from-purple-700 to-indigo-500",children:o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute transform rotate-45 -translate-x-1/4 -translate-y-1/4 -left-1/4 -top-1/4 w-1/2 h-1/2 bg-white/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute transform -rotate-12 translate-x-1/4 translate-y-1/4 right-1/4 bottom-1/4 w-1/2 h-1/2 bg-white/20 rounded-full blur-3xl"})]})}),o.jsxs(ie,{className:"relative z-10",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(Q.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-4xl font-serif font-bold",children:"管理ダッシュボード"}),o.jsxs(Pe,{variant:"outline",size:"sm",onClick:P,className:"bg-white/10 backdrop-blur-sm hover:bg-white/20",children:["ログアウト ",o.jsx(ji,{className:"ml-2 h-4 w-4"})]})]}),o.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"mt-4 flex gap-4",children:[o.jsxs("div",{className:"bg-white/10 rounded-lg px-4 py-3 backdrop-blur-sm",children:[o.jsx("div",{className:"text-xl font-bold",children:e.filter(v=>v.status==="pending").length}),o.jsx("div",{className:"text-xs opacity-70",children:"未回答"})]}),o.jsxs("div",{className:"bg-white/10 rounded-lg px-4 py-3 backdrop-blur-sm",children:[o.jsx("div",{className:"text-xl font-bold",children:e.filter(v=>v.status==="answered").length}),o.jsx("div",{className:"text-xs opacity-70",children:"回答済み"})]}),o.jsxs("div",{className:"bg-white/10 rounded-lg px-4 py-3 backdrop-blur-sm",children:[o.jsx("div",{className:"text-xl font-bold",children:e.length}),o.jsx("div",{className:"text-xs opacity-70",children:"合計"})]})]}),x&&o.jsx(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-md",children:x})]})]}),o.jsx(_e,{children:o.jsxs(ie,{children:[o.jsx(qm,{onLogout:P}),o.jsxs("div",{className:"mb-6 flex flex-wrap justify-between items-center",children:[o.jsxs("div",{className:"lg:col-span-1",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow p-5 mb-6",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-700 mb-4",children:"フィルター"}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx("button",{className:`px-4 py-2 rounded-lg text-sm ${h==="all"?"bg-purple-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>m("all"),children:"全て"}),o.jsx("button",{className:`px-4 py-2 rounded-lg text-sm ${h==="pending"?"bg-purple-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>m("pending"),children:"未回答"}),o.jsx("button",{className:`px-4 py-2 rounded-lg text-sm ${h==="answered"?"bg-purple-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,onClick:()=>m("answered"),children:"回答済み"})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow h-[500px] overflow-y-auto",children:[o.jsx("div",{className:"p-4 border-b",children:o.jsx("h2",{className:"text-lg font-bold text-gray-700",children:"質問一覧"})}),f&&o.jsx("div",{className:"flex justify-center items-center py-4",children:o.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-700"})}),!f&&y.length>0?o.jsx("div",{className:"divide-y",children:y.map(v=>o.jsx("div",{className:`p-4 cursor-pointer hover:bg-gray-50 ${(r==null?void 0:r.id)===v.id?"bg-purple-50":""}`,onClick:()=>V(v),children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${v.status==="answered"?"bg-green-100":"bg-yellow-100"}`,children:v.status==="answered"?o.jsx(si,{className:"h-4 w-4 text-green-600"}):o.jsx(Xr,{className:"h-4 w-4 text-yellow-600"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium text-gray-800 truncate",children:v.question}),o.jsx("p",{className:"text-xs text-gray-500",children:b(v.date)})]}),o.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:N=>{N.stopPropagation(),C(v.id)},children:o.jsx(Ks,{className:"h-4 w-4"})})]})},v.id))}):f?null:o.jsxs("div",{className:"p-8 text-center text-gray-500",children:[o.jsx(ln,{className:"h-10 w-10 mx-auto mb-2 text-gray-300"}),o.jsx("p",{children:"質問がありません"})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-5 mt-6",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-700 mb-4",children:"データ管理"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("button",{className:"flex items-center w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",onClick:O,disabled:f,children:[o.jsx(zh,{className:"h-4 w-4 mr-2"})," 質問をエクスポート",f&&o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-700 ml-2"})]}),o.jsxs("label",{className:"flex items-center w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 cursor-pointer",children:[o.jsx(Sa,{className:"h-4 w-4 mr-2"})," 質問をインポート",o.jsx("input",{type:"file",accept:".json",onChange:I,className:"hidden",disabled:f})]}),o.jsxs("button",{className:"flex items-center w-full px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200",onClick:()=>t("/admin/firebase"),disabled:f,children:[o.jsx(ii,{className:"h-4 w-4 mr-2"})," Firebase管理"]})]})]})]}),o.jsx("div",{className:"lg:col-span-2",children:o.jsx("div",{className:"bg-white rounded-lg shadow h-full",children:r?o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-start mb-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"質問詳細"}),o.jsxs("div",{className:"space-x-2",children:[!c&&o.jsxs(Pe,{variant:"outline",size:"sm",onClick:M,disabled:f,children:[o.jsx(Ho,{className:"h-4 w-4 mr-1"})," 編集"]}),c&&o.jsxs(Pe,{variant:"primary",size:"sm",onClick:ee,disabled:f,children:[o.jsx(Aa,{className:"h-4 w-4 mr-1"})," 保存",f&&o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white ml-2"})]})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:"ユーザー情報"}),o.jsxs("div",{className:"flex flex-wrap gap-y-3 gap-x-6",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(oi,{className:"h-4 w-4 text-gray-400 mr-2"}),o.jsx("span",{className:"text-sm text-gray-700",children:r.name})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(Up,{className:"h-4 w-4 text-gray-400 mr-2"}),o.jsx("span",{className:"text-sm text-gray-700",children:r.email})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(Xr,{className:"h-4 w-4 text-gray-400 mr-2"}),o.jsx("span",{className:"text-sm text-gray-700",children:b(r.date)})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"質問内容"}),c?o.jsx("textarea",{value:r.question,onChange:v=>s({...r,question:v.target.value}),className:"w-full p-3 border rounded-lg focus:ring focus:ring-purple-200 focus:outline-none",rows:4}):o.jsx("p",{className:"p-4 bg-purple-50 rounded-lg text-gray-700",children:r.question})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"回答"}),c||r.status==="pending"?o.jsxs("div",{className:"space-y-3",children:[o.jsx("textarea",{value:i,onChange:v=>a(v.target.value),className:"w-full p-3 border rounded-lg focus:ring focus:ring-purple-200 focus:outline-none",rows:6,placeholder:"回答を入力してください...",disabled:f}),r.status==="pending"&&o.jsx("div",{className:"flex justify-end",children:o.jsxs(Pe,{variant:"primary",onClick:$,disabled:!i.trim()||f,children:[o.jsx(si,{className:"h-4 w-4 mr-1"})," 回答を公開する",f&&o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white ml-2"})]})})]}):o.jsxs("div",{className:"p-4 bg-green-50 rounded-lg text-gray-700",children:[r.answer||"回答がありません",r.answerDate&&o.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["回答日時: ",b(r.answerDate)]})]})]})]})]}):o.jsxs("div",{className:"p-8 h-full flex flex-col items-center justify-center text-gray-500",children:[o.jsx(ln,{className:"h-16 w-16 mb-4 text-gray-300"}),o.jsx("p",{className:"mb-2",children:"質問を選択してください"}),o.jsx("p",{className:"text-sm text-gray-400",children:"左側のリストから表示する質問を選びます"})]})})})]})]})})]})},Nw=()=>{const t=pn(),[e,n]=U.useState(""),[r,s]=U.useState(""),[i,a]=U.useState(!1);U.useEffect(()=>{Qi()&&t("/admin")},[t]);const c=u=>{u.preventDefault(),a(!0),s(""),setTimeout(()=>{_w(e)?t("/admin"):(s("パスワードが正しくありません"),a(!1))},500)};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-100 to-indigo-50 flex flex-col justify-center",children:o.jsx(ie,{className:"pt-24 pb-16",children:o.jsxs(Q.div,{className:"max-w-md mx-auto",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-xl overflow-hidden",children:[o.jsxs("div",{className:"bg-purple-600 p-6 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-white/10 backdrop-blur-sm rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Hp,{className:"h-8 w-8 text-white"})}),o.jsx("h1",{className:"text-2xl font-bold text-white",children:"Softis 管理者ログイン"})]}),o.jsxs("div",{className:"p-6",children:[r&&o.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg mb-6",children:r}),o.jsxs("form",{onSubmit:c,children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-bold mb-2",children:"パスワード"}),o.jsx("input",{type:"password",id:"password",className:"shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-purple-500",value:e,onChange:u=>n(u.target.value),placeholder:"管理者パスワード",required:!0}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"デモ用パスワード: admin123"})]}),o.jsxs(Pe,{variant:"primary",size:"lg",className:"w-full bg-purple-600 hover:bg-purple-700",type:"submit",disabled:i,children:[i?"ログイン中...":"ログイン"," ",!i&&o.jsx(Bp,{className:"ml-2 h-4 w-4"})]})]})]})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("button",{className:"text-purple-600 hover:text-purple-800 text-sm",onClick:()=>t("/"),children:"サイトに戻る"})})]})})})},Tw=()=>{const[t,e]=U.useState([]),[n,r]=U.useState(null),[s,i]=U.useState([]),[a,c]=U.useState(!0);U.useEffect(()=>{(async()=>{try{c(!0);const x=await fa();e(x);const _=new Set;x.forEach(k=>{k.tags.forEach(P=>_.add(P))}),i(Array.from(_))}catch(x){console.error("Erreur lors du chargement des articles:",x)}finally{c(!1)}})()},[]);const u=n?t.filter(g=>g.tags.includes(n)):t,h=g=>new Date(g).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}),m=(g,x=150)=>{const _=g.replace(/#{1,6} |[*_`~]/g,"");return _.length<=x?_:_.substring(0,x)+"..."},f={"@context":"https://schema.org","@type":"Blog",headline:"Softis ピラティスブログ - 健康、姿勢改善、ピラティスに関する情報",description:"ピラティス、姿勢改善、健康的な生活についての有益な情報をご紹介します。豊田市のピラティススタジオSoftisからのお役立ち情報。",author:{"@type":"Organization",name:"Softis ピラティススタジオ",url:"https://softis.jp"},publisher:{"@type":"Organization",name:"Softis ピラティススタジオ",logo:{"@type":"ImageObject",url:"https://softis.jp/logo.png"}},blogPost:t.map(g=>({"@type":"BlogPosting",headline:g.title,description:m(g.content),datePublished:g.date,author:{"@type":"Person",name:g.author},keywords:g.tags.join(", ")}))};return o.jsxs(o.Fragment,{children:[o.jsx(gn,{title:"ブログ - ピラティススタジオSoftis",description:"ピラティス、姿勢改善、健康的な生活についての有益な情報をご紹介します。豊田市のピラティススタジオSoftisからのお役立ち情報。",keywords:"ピラティス, ブログ, 姿勢改善, 健康, エクササイズ, Softis, ピラティススタジオ",structuredData:f}),o.jsxs("div",{className:"relative pt-32 pb-16 text-white",children:[o.jsx("div",{className:"absolute inset-0 z-0 overflow-hidden bg-gradient-to-r from-pink-600 to-purple-700",children:o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute transform rotate-45 -translate-x-1/4 -translate-y-1/4 -left-1/4 -top-1/4 w-1/2 h-1/2 bg-white/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute transform -rotate-12 translate-x-1/4 translate-y-1/4 right-1/4 bottom-1/4 w-1/2 h-1/2 bg-white/20 rounded-full blur-3xl"})]})}),o.jsx(ie,{className:"relative z-10",children:o.jsxs(Q.div,{className:"text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7},children:[o.jsx("h1",{className:"text-4xl md:text-5xl font-serif font-bold text-white mb-4",children:"ブログ"}),o.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-pink-300 to-purple-300 rounded-full mx-auto mb-4"}),o.jsx("p",{className:"text-white text-xl max-w-3xl mx-auto",children:"ピラティス、健康、姿勢改善に関する情報を発信しています"})]})})]}),o.jsx(_e,{className:"bg-gray-50",children:o.jsx(ie,{children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[o.jsx("div",{className:"lg:col-span-1",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 sticky top-24",children:[o.jsx("h2",{className:"text-xl font-serif font-bold text-gray-800 mb-4",children:"カテゴリー"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("button",{className:`block w-full text-left px-3 py-2 rounded-lg transition ${n===null?"bg-purple-100 text-purple-700":"hover:bg-gray-100"}`,onClick:()=>r(null),children:"すべて"}),s.map(g=>o.jsx("button",{className:`block w-full text-left px-3 py-2 rounded-lg transition ${n===g?"bg-purple-100 text-purple-700":"hover:bg-gray-100"}`,onClick:()=>r(g),children:g},g))]})]})}),o.jsxs("div",{className:"lg:col-span-3",children:[a?o.jsxs("div",{className:"text-center p-12",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-700 mx-auto"}),o.jsx("p",{className:"mt-4 text-gray-600",children:"ブログ記事を読み込んでいます..."})]}):u.length>0?o.jsx("div",{className:"space-y-8",children:u.map((g,x)=>o.jsx(Q.article,{className:"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:x*.1},children:o.jsxs("div",{className:"md:flex",children:[g.imageUrl&&o.jsx("div",{className:"md:flex-shrink-0 h-48 md:h-auto md:w-48 relative overflow-hidden",children:o.jsx("img",{className:"w-full h-full object-cover absolute top-0 left-0",src:g.imageUrl,alt:g.title})}),o.jsxs("div",{className:"p-6 flex flex-col justify-between flex-1",children:[o.jsxs("div",{children:[o.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:g.tags.map(_=>o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",onClick:()=>r(_),children:[o.jsx(or,{className:"w-3 h-3 mr-1"}),_]},_))}),o.jsx(we,{to:`/blog/${g.id}`,className:"block",children:o.jsx("h2",{className:"text-xl font-serif font-bold text-gray-900 hover:text-purple-600 transition",children:g.title})}),o.jsxs("div",{className:"mt-3 flex items-center text-sm text-gray-500",children:[o.jsx(Ti,{className:"h-4 w-4 mr-1"}),o.jsx("time",{dateTime:g.date,children:h(g.date)}),o.jsx("span",{className:"mx-1",children:"•"}),o.jsx("span",{children:g.author})]}),o.jsx("p",{className:"mt-3 text-gray-600",children:m(g.content)})]}),o.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[o.jsx(Ut,{className:"h-4 w-4 mr-1"}),o.jsxs("span",{children:[g.comments.filter(_=>_.status==="approved").length," コメント"]})]}),o.jsxs(we,{to:`/blog/${g.id}`,className:"inline-flex items-center text-sm font-medium text-purple-600 hover:text-purple-800",children:["続きを読む",o.jsx(Pp,{className:"h-4 w-4 ml-1"})]})]})]})]})},g.id))}):o.jsx("div",{className:"bg-white p-8 rounded-xl shadow-md text-center",children:o.jsx("p",{className:"text-gray-600",children:"記事が見つかりませんでした。"})}),o.jsx("div",{className:"mt-10 text-center",children:o.jsxs(we,{to:"/blog/new",className:"inline-flex items-center px-6 py-3 bg-purple-600 text-white font-medium rounded-lg shadow-md hover:bg-purple-700 transition-colors duration-300",children:[o.jsx(Ut,{className:"h-5 w-5 mr-2"}),"新しい記事を書く"]})})]})]})})})]})};function jw(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Iw=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Aw=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,kw={};function qu(t,e){return(kw.jsx?Aw:Iw).test(t)}const Sw=/[ \t\n\f\r]/g;function Cw(t){return typeof t=="object"?t.type==="text"?zu(t.value):!1:zu(t)}function zu(t){return t.replace(Sw,"")===""}class gs{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}gs.prototype.normal={};gs.prototype.property={};gs.prototype.space=void 0;function zm(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new gs(n,r,e)}function ga(t){return t.toLowerCase()}class ot{constructor(e,n){this.attribute=n,this.property=e}}ot.prototype.attribute="";ot.prototype.booleanish=!1;ot.prototype.boolean=!1;ot.prototype.commaOrSpaceSeparated=!1;ot.prototype.commaSeparated=!1;ot.prototype.defined=!1;ot.prototype.mustUseProperty=!1;ot.prototype.number=!1;ot.prototype.overloadedBoolean=!1;ot.prototype.property="";ot.prototype.spaceSeparated=!1;ot.prototype.space=void 0;let Pw=0;const se=Rn(),Ae=Rn(),xa=Rn(),z=Rn(),ge=Rn(),Xn=Rn(),pt=Rn();function Rn(){return 2**++Pw}const ya=Object.freeze(Object.defineProperty({__proto__:null,boolean:se,booleanish:Ae,commaOrSpaceSeparated:pt,commaSeparated:Xn,number:z,overloadedBoolean:xa,spaceSeparated:ge},Symbol.toStringTag,{value:"Module"})),ko=Object.keys(ya);class pl extends ot{constructor(e,n,r,s){let i=-1;if(super(e,n),Bu(this,"space",s),typeof r=="number")for(;++i<ko.length;){const a=ko[i];Bu(this,ko[i],(r&ya[a])===ya[a])}}}pl.prototype.defined=!0;function Bu(t,e,n){n&&(t[e]=n)}function mr(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const i=new pl(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),e[r]=i,n[ga(r)]=r,n[ga(i.attribute)]=r}return new gs(e,n,t.space)}const Bm=mr({properties:{ariaActiveDescendant:null,ariaAtomic:Ae,ariaAutoComplete:null,ariaBusy:Ae,ariaChecked:Ae,ariaColCount:z,ariaColIndex:z,ariaColSpan:z,ariaControls:ge,ariaCurrent:null,ariaDescribedBy:ge,ariaDetails:null,ariaDisabled:Ae,ariaDropEffect:ge,ariaErrorMessage:null,ariaExpanded:Ae,ariaFlowTo:ge,ariaGrabbed:Ae,ariaHasPopup:null,ariaHidden:Ae,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ge,ariaLevel:z,ariaLive:null,ariaModal:Ae,ariaMultiLine:Ae,ariaMultiSelectable:Ae,ariaOrientation:null,ariaOwns:ge,ariaPlaceholder:null,ariaPosInSet:z,ariaPressed:Ae,ariaReadOnly:Ae,ariaRelevant:null,ariaRequired:Ae,ariaRoleDescription:ge,ariaRowCount:z,ariaRowIndex:z,ariaRowSpan:z,ariaSelected:Ae,ariaSetSize:z,ariaSort:null,ariaValueMax:z,ariaValueMin:z,ariaValueNow:z,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Um(t,e){return e in t?t[e]:e}function $m(t,e){return Um(t,e.toLowerCase())}const Rw=mr({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Xn,acceptCharset:ge,accessKey:ge,action:null,allow:null,allowFullScreen:se,allowPaymentRequest:se,allowUserMedia:se,alt:null,as:null,async:se,autoCapitalize:null,autoComplete:ge,autoFocus:se,autoPlay:se,blocking:ge,capture:null,charSet:null,checked:se,cite:null,className:ge,cols:z,colSpan:null,content:null,contentEditable:Ae,controls:se,controlsList:ge,coords:z|Xn,crossOrigin:null,data:null,dateTime:null,decoding:null,default:se,defer:se,dir:null,dirName:null,disabled:se,download:xa,draggable:Ae,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:se,formTarget:null,headers:ge,height:z,hidden:xa,high:z,href:null,hrefLang:null,htmlFor:ge,httpEquiv:ge,id:null,imageSizes:null,imageSrcSet:null,inert:se,inputMode:null,integrity:null,is:null,isMap:se,itemId:null,itemProp:ge,itemRef:ge,itemScope:se,itemType:ge,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:se,low:z,manifest:null,max:null,maxLength:z,media:null,method:null,min:null,minLength:z,multiple:se,muted:se,name:null,nonce:null,noModule:se,noValidate:se,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:se,optimum:z,pattern:null,ping:ge,placeholder:null,playsInline:se,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:se,referrerPolicy:null,rel:ge,required:se,reversed:se,rows:z,rowSpan:z,sandbox:ge,scope:null,scoped:se,seamless:se,selected:se,shadowRootClonable:se,shadowRootDelegatesFocus:se,shadowRootMode:null,shape:null,size:z,sizes:null,slot:null,span:z,spellCheck:Ae,src:null,srcDoc:null,srcLang:null,srcSet:null,start:z,step:null,style:null,tabIndex:z,target:null,title:null,translate:null,type:null,typeMustMatch:se,useMap:null,value:Ae,width:z,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ge,axis:null,background:null,bgColor:null,border:z,borderColor:null,bottomMargin:z,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:se,declare:se,event:null,face:null,frame:null,frameBorder:null,hSpace:z,leftMargin:z,link:null,longDesc:null,lowSrc:null,marginHeight:z,marginWidth:z,noResize:se,noHref:se,noShade:se,noWrap:se,object:null,profile:null,prompt:null,rev:null,rightMargin:z,rules:null,scheme:null,scrolling:Ae,standby:null,summary:null,text:null,topMargin:z,valueType:null,version:null,vAlign:null,vLink:null,vSpace:z,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:se,disableRemotePlayback:se,prefix:null,property:null,results:z,security:null,unselectable:null},space:"html",transform:$m}),Dw=mr({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:pt,accentHeight:z,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:z,amplitude:z,arabicForm:null,ascent:z,attributeName:null,attributeType:null,azimuth:z,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:z,by:null,calcMode:null,capHeight:z,className:ge,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:z,diffuseConstant:z,direction:null,display:null,dur:null,divisor:z,dominantBaseline:null,download:se,dx:null,dy:null,edgeMode:null,editable:null,elevation:z,enableBackground:null,end:null,event:null,exponent:z,externalResourcesRequired:null,fill:null,fillOpacity:z,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Xn,g2:Xn,glyphName:Xn,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:z,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:z,horizOriginX:z,horizOriginY:z,id:null,ideographic:z,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:z,k:z,k1:z,k2:z,k3:z,k4:z,kernelMatrix:pt,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:z,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:z,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:z,overlineThickness:z,paintOrder:null,panose1:null,path:null,pathLength:z,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ge,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:z,pointsAtY:z,pointsAtZ:z,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:pt,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:pt,rev:pt,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:pt,requiredFeatures:pt,requiredFonts:pt,requiredFormats:pt,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:z,specularExponent:z,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:z,strikethroughThickness:z,string:null,stroke:null,strokeDashArray:pt,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:z,strokeOpacity:z,strokeWidth:null,style:null,surfaceScale:z,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:pt,tabIndex:z,tableValues:null,target:null,targetX:z,targetY:z,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:pt,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:z,underlineThickness:z,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:z,values:null,vAlphabetic:z,vMathematical:z,vectorEffect:null,vHanging:z,vIdeographic:z,version:null,vertAdvY:z,vertOriginX:z,vertOriginY:z,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:z,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Um}),Hm=mr({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),Gm=mr({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:$m}),Qm=mr({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),Vw={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Ow=/[A-Z]/g,Uu=/-[a-z]/g,Mw=/^data[-\w.:]+$/i;function Lw(t,e){const n=ga(e);let r=e,s=ot;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Mw.test(e)){if(e.charAt(4)==="-"){const i=e.slice(5).replace(Uu,qw);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=e.slice(4);if(!Uu.test(i)){let a=i.replace(Ow,Fw);a.charAt(0)!=="-"&&(a="-"+a),e="data"+a}}s=pl}return new s(r,e)}function Fw(t){return"-"+t.toLowerCase()}function qw(t){return t.charAt(1).toUpperCase()}const zw=zm([Bm,Rw,Hm,Gm,Qm],"html"),gl=zm([Bm,Dw,Hm,Gm,Qm],"svg");function Bw(t){return t.join(" ").trim()}var xl={},$u=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Uw=/\n/g,$w=/^\s*/,Hw=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Gw=/^:\s*/,Qw=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Kw=/^[;\s]*/,Ww=/^\s+|\s+$/g,Yw=`
`,Hu="/",Gu="*",jn="",Xw="comment",Jw="declaration",Zw=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function s(_){var k=_.match(Uw);k&&(n+=k.length);var P=_.lastIndexOf(Yw);r=~P?_.length-P:r+_.length}function i(){var _={line:n,column:r};return function(k){return k.position=new a(_),h(),k}}function a(_){this.start=_,this.end={line:n,column:r},this.source=e.source}a.prototype.content=t;function c(_){var k=new Error(e.source+":"+n+":"+r+": "+_);if(k.reason=_,k.filename=e.source,k.line=n,k.column=r,k.source=t,!e.silent)throw k}function u(_){var k=_.exec(t);if(k){var P=k[0];return s(P),t=t.slice(P.length),k}}function h(){u($w)}function m(_){var k;for(_=_||[];k=f();)k!==!1&&_.push(k);return _}function f(){var _=i();if(!(Hu!=t.charAt(0)||Gu!=t.charAt(1))){for(var k=2;jn!=t.charAt(k)&&(Gu!=t.charAt(k)||Hu!=t.charAt(k+1));)++k;if(k+=2,jn===t.charAt(k-1))return c("End of comment missing");var P=t.slice(2,k-2);return r+=2,s(P),t=t.slice(k),r+=2,_({type:Xw,comment:P})}}function g(){var _=i(),k=u(Hw);if(k){if(f(),!u(Gw))return c("property missing ':'");var P=u(Qw),C=_({type:Jw,property:Qu(k[0].replace($u,jn)),value:P?Qu(P[0].replace($u,jn)):jn});return u(Kw),C}}function x(){var _=[];m(_);for(var k;k=g();)k!==!1&&(_.push(k),m(_));return _}return h(),x()};function Qu(t){return t?t.replace(Ww,jn):jn}var eb=ri&&ri.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xl,"__esModule",{value:!0});xl.default=nb;var tb=eb(Zw);function nb(t,e){var n=null;if(!t||typeof t!="string")return n;var r=(0,tb.default)(t),s=typeof e=="function";return r.forEach(function(i){if(i.type==="declaration"){var a=i.property,c=i.value;s?e(a,c,i):c&&(n=n||{},n[a]=c)}}),n}var Ki={};Object.defineProperty(Ki,"__esModule",{value:!0});Ki.camelCase=void 0;var rb=/^--[a-zA-Z0-9_-]+$/,sb=/-([a-z])/g,ib=/^[^-]+$/,ob=/^-(webkit|moz|ms|o|khtml)-/,ab=/^-(ms)-/,lb=function(t){return!t||ib.test(t)||rb.test(t)},cb=function(t,e){return e.toUpperCase()},Ku=function(t,e){return"".concat(e,"-")},ub=function(t,e){return e===void 0&&(e={}),lb(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(ab,Ku):t=t.replace(ob,Ku),t.replace(sb,cb))};Ki.camelCase=ub;var hb=ri&&ri.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},db=hb(xl),mb=Ki;function wa(t,e){var n={};return!t||typeof t!="string"||(0,db.default)(t,function(r,s){r&&s&&(n[(0,mb.camelCase)(r,e)]=s)}),n}wa.default=wa;var fb=wa;const pb=as(fb),Km=Wm("end"),yl=Wm("start");function Wm(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function gb(t){const e=yl(t),n=Km(t);if(e&&n)return{start:e,end:n}}function Qr(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Wu(t.position):"start"in t||"end"in t?Wu(t):"line"in t||"column"in t?ba(t):""}function ba(t){return Yu(t&&t.line)+":"+Yu(t&&t.column)}function Wu(t){return ba(t&&t.start)+"-"+ba(t&&t.end)}function Yu(t){return t&&typeof t=="number"?t:1}class Ye extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",i={},a=!1;if(n&&("line"in n&&"column"in n?i={place:n}:"start"in n&&"end"in n?i={place:n}:"type"in n?i={ancestors:[n],place:n.position}:i={...n}),typeof e=="string"?s=e:!i.cause&&e&&(a=!0,s=e.message,i.cause=e),!i.ruleId&&!i.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?i.ruleId=r:(i.source=r.slice(0,u),i.ruleId=r.slice(u+1))}if(!i.place&&i.ancestors&&i.ancestors){const u=i.ancestors[i.ancestors.length-1];u&&(i.place=u.position)}const c=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file,this.message=s,this.line=c?c.line:void 0,this.name=Qr(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=a&&i.cause&&typeof i.cause.stack=="string"?i.cause.stack:"",this.actual,this.expected,this.note,this.url}}Ye.prototype.file="";Ye.prototype.name="";Ye.prototype.reason="";Ye.prototype.message="";Ye.prototype.stack="";Ye.prototype.column=void 0;Ye.prototype.line=void 0;Ye.prototype.ancestors=void 0;Ye.prototype.cause=void 0;Ye.prototype.fatal=void 0;Ye.prototype.place=void 0;Ye.prototype.ruleId=void 0;Ye.prototype.source=void 0;const wl={}.hasOwnProperty,xb=new Map,yb=/[A-Z]/g,wb=new Set(["table","tbody","thead","tfoot","tr"]),bb=new Set(["td","th"]),Ym="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function vb(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=kb(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Ab(n,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?gl:zw,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},i=Xm(s,t,void 0);return i&&typeof i!="string"?i:s.create(t,s.Fragment,{children:i||void 0},void 0)}function Xm(t,e,n){if(e.type==="element")return _b(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return Eb(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return Tb(t,e,n);if(e.type==="mdxjsEsm")return Nb(t,e);if(e.type==="root")return jb(t,e,n);if(e.type==="text")return Ib(t,e)}function _b(t,e,n){const r=t.schema;let s=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=gl,t.schema=s),t.ancestors.push(e);const i=Zm(t,e.tagName,!1),a=Sb(t,e);let c=vl(t,e);return wb.has(e.tagName)&&(c=c.filter(function(u){return typeof u=="string"?!Cw(u):!0})),Jm(t,a,i,e),bl(a,c),t.ancestors.pop(),t.schema=r,t.create(e,i,a,n)}function Eb(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}os(t,e.position)}function Nb(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);os(t,e.position)}function Tb(t,e,n){const r=t.schema;let s=r;e.name==="svg"&&r.space==="html"&&(s=gl,t.schema=s),t.ancestors.push(e);const i=e.name===null?t.Fragment:Zm(t,e.name,!0),a=Cb(t,e),c=vl(t,e);return Jm(t,a,i,e),bl(a,c),t.ancestors.pop(),t.schema=r,t.create(e,i,a,n)}function jb(t,e,n){const r={};return bl(r,vl(t,e)),t.create(e,t.Fragment,r,n)}function Ib(t,e){return e.value}function Jm(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function bl(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function Ab(t,e,n){return r;function r(s,i,a,c){const h=Array.isArray(a.children)?n:e;return c?h(i,a,c):h(i,a)}}function kb(t,e){return n;function n(r,s,i,a){const c=Array.isArray(i.children),u=yl(r);return e(s,i,a,c,{columnNumber:u?u.column-1:void 0,fileName:t,lineNumber:u?u.line:void 0},void 0)}}function Sb(t,e){const n={};let r,s;for(s in e.properties)if(s!=="children"&&wl.call(e.properties,s)){const i=Pb(t,s,e.properties[s]);if(i){const[a,c]=i;t.tableCellAlignToStyle&&a==="align"&&typeof c=="string"&&bb.has(e.tagName)?r=c:n[a]=c}}if(r){const i=n.style||(n.style={});i[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Cb(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const i=r.data.estree.body[0];i.type;const a=i.expression;a.type;const c=a.properties[0];c.type,Object.assign(n,t.evaluater.evaluateExpression(c.argument))}else os(t,e.position);else{const s=r.name;let i;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const c=r.value.data.estree.body[0];c.type,i=t.evaluater.evaluateExpression(c.expression)}else os(t,e.position);else i=r.value===null?!0:r.value;n[s]=i}return n}function vl(t,e){const n=[];let r=-1;const s=t.passKeys?new Map:xb;for(;++r<e.children.length;){const i=e.children[r];let a;if(t.passKeys){const u=i.type==="element"?i.tagName:i.type==="mdxJsxFlowElement"||i.type==="mdxJsxTextElement"?i.name:void 0;if(u){const h=s.get(u)||0;a=u+"-"+h,s.set(u,h+1)}}const c=Xm(t,i,a);c!==void 0&&n.push(c)}return n}function Pb(t,e,n){const r=Lw(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?jw(n):Bw(n)),r.property==="style"){let s=typeof n=="object"?n:Rb(t,String(n));return t.stylePropertyNameCase==="css"&&(s=Db(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&r.space?Vw[r.property]||r.property:r.attribute,n]}}function Rb(t,e){try{return pb(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,s=new Ye("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=Ym+"#cannot-parse-style-attribute",s}}function Zm(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let i=-1,a;for(;++i<s.length;){const c=qu(s[i])?{type:"Identifier",name:s[i]}:{type:"Literal",value:s[i]};a=a?{type:"MemberExpression",object:a,property:c,computed:!!(i&&c.type==="Literal"),optional:!1}:c}r=a}else r=qu(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const s=r.value;return wl.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(r);os(t)}function os(t,e){const n=new Ye("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=Ym+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Db(t){const e={};let n;for(n in t)wl.call(t,n)&&(e[Vb(n)]=t[n]);return e}function Vb(t){let e=t.replace(yb,Ob);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function Ob(t){return"-"+t.toLowerCase()}const So={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Mb={};function Lb(t,e){const n=Mb,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return ef(t,r,s)}function ef(t,e,n){if(Fb(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Xu(t.children,e,n)}return Array.isArray(t)?Xu(t,e,n):""}function Xu(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=ef(t[s],e,n);return r.join("")}function Fb(t){return!!(t&&typeof t=="object")}const Ju=document.createElement("i");function _l(t){const e="&"+t+";";Ju.innerHTML=e;const n=Ju.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Ot(t,e,n,r){const s=t.length;let i=0,a;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(e,n),t.splice(...a);else for(n&&t.splice(e,n);i<r.length;)a=r.slice(i,i+1e4),a.unshift(e,0),t.splice(...a),i+=1e4,e+=1e4}function bt(t,e){return t.length>0?(Ot(t,t.length,0,e),t):e}const Zu={}.hasOwnProperty;function qb(t){const e={};let n=-1;for(;++n<t.length;)zb(e,t[n]);return e}function zb(t,e){let n;for(n in e){const s=(Zu.call(t,n)?t[n]:void 0)||(t[n]={}),i=e[n];let a;if(i)for(a in i){Zu.call(s,a)||(s[a]=[]);const c=i[a];Bb(s[a],Array.isArray(c)?c:c?[c]:[])}}}function Bb(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);Ot(t,0,0,r)}function tf(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function Jn(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const St=bn(/[A-Za-z]/),xt=bn(/[\dA-Za-z]/),Ub=bn(/[#-'*+\--9=?A-Z^-~]/);function va(t){return t!==null&&(t<32||t===127)}const _a=bn(/\d/),$b=bn(/[\dA-Fa-f]/),Hb=bn(/[!-/:-@[-`{-~]/);function X(t){return t!==null&&t<-2}function it(t){return t!==null&&(t<0||t===32)}function de(t){return t===-2||t===-1||t===32}const Gb=bn(new RegExp("\\p{P}|\\p{S}","u")),Qb=bn(/\s/);function bn(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function fr(t){const e=[];let n=-1,r=0,s=0;for(;++n<t.length;){const i=t.charCodeAt(n);let a="";if(i===37&&xt(t.charCodeAt(n+1))&&xt(t.charCodeAt(n+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(a=String.fromCharCode(i));else if(i>55295&&i<57344){const c=t.charCodeAt(n+1);i<56320&&c>56319&&c<57344?(a=String.fromCharCode(i,c),s=1):a="�"}else a=String.fromCharCode(i);a&&(e.push(t.slice(r,n),encodeURIComponent(a)),r=n+s+1,a=""),s&&(n+=s,s=0)}return e.join("")+t.slice(r)}function xe(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let i=0;return a;function a(u){return de(u)?(t.enter(n),c(u)):e(u)}function c(u){return de(u)&&i++<s?(t.consume(u),c):(t.exit(n),e(u))}}const Kb={tokenize:Wb};function Wb(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(c){if(c===null){t.consume(c);return}return t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),xe(t,e,"linePrefix")}function s(c){return t.enter("paragraph"),i(c)}function i(c){const u=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,a(c)}function a(c){if(c===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(c);return}return X(c)?(t.consume(c),t.exit("chunkText"),i):(t.consume(c),a)}}const Yb={tokenize:Xb},eh={tokenize:Jb};function Xb(t){const e=this,n=[];let r=0,s,i,a;return c;function c(M){if(r<n.length){const $=n[r];return e.containerState=$[1],t.attempt($[0].continuation,u,h)(M)}return h(M)}function u(M){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&V();const $=e.events.length;let ee=$,O;for(;ee--;)if(e.events[ee][0]==="exit"&&e.events[ee][1].type==="chunkFlow"){O=e.events[ee][1].end;break}C(r);let I=$;for(;I<e.events.length;)e.events[I][1].end={...O},I++;return Ot(e.events,ee+1,0,e.events.slice($)),e.events.length=I,h(M)}return c(M)}function h(M){if(r===n.length){if(!s)return g(M);if(s.currentConstruct&&s.currentConstruct.concrete)return _(M);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(eh,m,f)(M)}function m(M){return s&&V(),C(r),g(M)}function f(M){return e.parser.lazy[e.now().line]=r!==n.length,a=e.now().offset,_(M)}function g(M){return e.containerState={},t.attempt(eh,x,_)(M)}function x(M){return r++,n.push([e.currentConstruct,e.containerState]),g(M)}function _(M){if(M===null){s&&V(),C(0),t.consume(M);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:i}),k(M)}function k(M){if(M===null){P(t.exit("chunkFlow"),!0),C(0),t.consume(M);return}return X(M)?(t.consume(M),P(t.exit("chunkFlow")),r=0,e.interrupt=void 0,c):(t.consume(M),k)}function P(M,$){const ee=e.sliceStream(M);if($&&ee.push(null),M.previous=i,i&&(i.next=M),i=M,s.defineSkip(M.start),s.write(ee),e.parser.lazy[M.start.line]){let O=s.events.length;for(;O--;)if(s.events[O][1].start.offset<a&&(!s.events[O][1].end||s.events[O][1].end.offset>a))return;const I=e.events.length;let y=I,b,v;for(;y--;)if(e.events[y][0]==="exit"&&e.events[y][1].type==="chunkFlow"){if(b){v=e.events[y][1].end;break}b=!0}for(C(r),O=I;O<e.events.length;)e.events[O][1].end={...v},O++;Ot(e.events,y+1,0,e.events.slice(I)),e.events.length=O}}function C(M){let $=n.length;for(;$-- >M;){const ee=n[$];e.containerState=ee[1],ee[0].exit.call(e,t)}n.length=M}function V(){s.write([null]),i=void 0,s=void 0,e.containerState._closeFlow=void 0}}function Jb(t,e,n){return xe(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function th(t){if(t===null||it(t)||Qb(t))return 1;if(Gb(t))return 2}function El(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const i=t[s].resolveAll;i&&!r.includes(i)&&(e=i(e,n),r.push(i))}return e}const Ea={name:"attention",resolveAll:Zb,tokenize:ev};function Zb(t,e){let n=-1,r,s,i,a,c,u,h,m;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;u=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const f={...t[r][1].end},g={...t[n][1].start};nh(f,-u),nh(g,u),a={type:u>1?"strongSequence":"emphasisSequence",start:f,end:{...t[r][1].end}},c={type:u>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:g},i={type:u>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},s={type:u>1?"strong":"emphasis",start:{...a.start},end:{...c.end}},t[r][1].end={...a.start},t[n][1].start={...c.end},h=[],t[r][1].end.offset-t[r][1].start.offset&&(h=bt(h,[["enter",t[r][1],e],["exit",t[r][1],e]])),h=bt(h,[["enter",s,e],["enter",a,e],["exit",a,e],["enter",i,e]]),h=bt(h,El(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),h=bt(h,[["exit",i,e],["enter",c,e],["exit",c,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(m=2,h=bt(h,[["enter",t[n][1],e],["exit",t[n][1],e]])):m=0,Ot(t,r-1,n-r+3,h),n=r+h.length-m-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function ev(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=th(r);let i;return a;function a(u){return i=u,t.enter("attentionSequence"),c(u)}function c(u){if(u===i)return t.consume(u),c;const h=t.exit("attentionSequence"),m=th(u),f=!m||m===2&&s||n.includes(u),g=!s||s===2&&m||n.includes(r);return h._open=!!(i===42?f:f&&(s||!g)),h._close=!!(i===42?g:g&&(m||!f)),e(u)}}function nh(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const tv={name:"autolink",tokenize:nv};function nv(t,e,n){let r=0;return s;function s(x){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),i}function i(x){return St(x)?(t.consume(x),a):x===64?n(x):h(x)}function a(x){return x===43||x===45||x===46||xt(x)?(r=1,c(x)):h(x)}function c(x){return x===58?(t.consume(x),r=0,u):(x===43||x===45||x===46||xt(x))&&r++<32?(t.consume(x),c):(r=0,h(x))}function u(x){return x===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.exit("autolink"),e):x===null||x===32||x===60||va(x)?n(x):(t.consume(x),u)}function h(x){return x===64?(t.consume(x),m):Ub(x)?(t.consume(x),h):n(x)}function m(x){return xt(x)?f(x):n(x)}function f(x){return x===46?(t.consume(x),r=0,m):x===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(x),t.exit("autolinkMarker"),t.exit("autolink"),e):g(x)}function g(x){if((x===45||xt(x))&&r++<63){const _=x===45?g:f;return t.consume(x),_}return n(x)}}const Wi={partial:!0,tokenize:rv};function rv(t,e,n){return r;function r(i){return de(i)?xe(t,s,"linePrefix")(i):s(i)}function s(i){return i===null||X(i)?e(i):n(i)}}const nf={continuation:{tokenize:iv},exit:ov,name:"blockQuote",tokenize:sv};function sv(t,e,n){const r=this;return s;function s(a){if(a===62){const c=r.containerState;return c.open||(t.enter("blockQuote",{_container:!0}),c.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(a),t.exit("blockQuoteMarker"),i}return n(a)}function i(a){return de(a)?(t.enter("blockQuotePrefixWhitespace"),t.consume(a),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(a))}}function iv(t,e,n){const r=this;return s;function s(a){return de(a)?xe(t,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):i(a)}function i(a){return t.attempt(nf,e,n)(a)}}function ov(t){t.exit("blockQuote")}const rf={name:"characterEscape",tokenize:av};function av(t,e,n){return r;function r(i){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(i),t.exit("escapeMarker"),s}function s(i){return Hb(i)?(t.enter("characterEscapeValue"),t.consume(i),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(i)}}const sf={name:"characterReference",tokenize:lv};function lv(t,e,n){const r=this;let s=0,i,a;return c;function c(f){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),u}function u(f){return f===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(f),t.exit("characterReferenceMarkerNumeric"),h):(t.enter("characterReferenceValue"),i=31,a=xt,m(f))}function h(f){return f===88||f===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(f),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),i=6,a=$b,m):(t.enter("characterReferenceValue"),i=7,a=_a,m(f))}function m(f){if(f===59&&s){const g=t.exit("characterReferenceValue");return a===xt&&!_l(r.sliceSerialize(g))?n(f):(t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return a(f)&&s++<i?(t.consume(f),m):n(f)}}const rh={partial:!0,tokenize:uv},sh={concrete:!0,name:"codeFenced",tokenize:cv};function cv(t,e,n){const r=this,s={partial:!0,tokenize:ee};let i=0,a=0,c;return u;function u(O){return h(O)}function h(O){const I=r.events[r.events.length-1];return i=I&&I[1].type==="linePrefix"?I[2].sliceSerialize(I[1],!0).length:0,c=O,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),m(O)}function m(O){return O===c?(a++,t.consume(O),m):a<3?n(O):(t.exit("codeFencedFenceSequence"),de(O)?xe(t,f,"whitespace")(O):f(O))}function f(O){return O===null||X(O)?(t.exit("codeFencedFence"),r.interrupt?e(O):t.check(rh,k,$)(O)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),g(O))}function g(O){return O===null||X(O)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),f(O)):de(O)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),xe(t,x,"whitespace")(O)):O===96&&O===c?n(O):(t.consume(O),g)}function x(O){return O===null||X(O)?f(O):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),_(O))}function _(O){return O===null||X(O)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),f(O)):O===96&&O===c?n(O):(t.consume(O),_)}function k(O){return t.attempt(s,$,P)(O)}function P(O){return t.enter("lineEnding"),t.consume(O),t.exit("lineEnding"),C}function C(O){return i>0&&de(O)?xe(t,V,"linePrefix",i+1)(O):V(O)}function V(O){return O===null||X(O)?t.check(rh,k,$)(O):(t.enter("codeFlowValue"),M(O))}function M(O){return O===null||X(O)?(t.exit("codeFlowValue"),V(O)):(t.consume(O),M)}function $(O){return t.exit("codeFenced"),e(O)}function ee(O,I,y){let b=0;return v;function v(ne){return O.enter("lineEnding"),O.consume(ne),O.exit("lineEnding"),N}function N(ne){return O.enter("codeFencedFence"),de(ne)?xe(O,T,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ne):T(ne)}function T(ne){return ne===c?(O.enter("codeFencedFenceSequence"),E(ne)):y(ne)}function E(ne){return ne===c?(b++,O.consume(ne),E):b>=a?(O.exit("codeFencedFenceSequence"),de(ne)?xe(O,re,"whitespace")(ne):re(ne)):y(ne)}function re(ne){return ne===null||X(ne)?(O.exit("codeFencedFence"),I(ne)):y(ne)}}}function uv(t,e,n){const r=this;return s;function s(a){return a===null?n(a):(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),i)}function i(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}const Co={name:"codeIndented",tokenize:dv},hv={partial:!0,tokenize:mv};function dv(t,e,n){const r=this;return s;function s(h){return t.enter("codeIndented"),xe(t,i,"linePrefix",5)(h)}function i(h){const m=r.events[r.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?a(h):n(h)}function a(h){return h===null?u(h):X(h)?t.attempt(hv,a,u)(h):(t.enter("codeFlowValue"),c(h))}function c(h){return h===null||X(h)?(t.exit("codeFlowValue"),a(h)):(t.consume(h),c)}function u(h){return t.exit("codeIndented"),e(h)}}function mv(t,e,n){const r=this;return s;function s(a){return r.parser.lazy[r.now().line]?n(a):X(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),s):xe(t,i,"linePrefix",5)(a)}function i(a){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(a):X(a)?s(a):n(a)}}const fv={name:"codeText",previous:gv,resolve:pv,tokenize:xv};function pv(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function gv(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function xv(t,e,n){let r=0,s,i;return a;function a(f){return t.enter("codeText"),t.enter("codeTextSequence"),c(f)}function c(f){return f===96?(t.consume(f),r++,c):(t.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(t.enter("space"),t.consume(f),t.exit("space"),u):f===96?(i=t.enter("codeTextSequence"),s=0,m(f)):X(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),u):(t.enter("codeTextData"),h(f))}function h(f){return f===null||f===32||f===96||X(f)?(t.exit("codeTextData"),u(f)):(t.consume(f),h)}function m(f){return f===96?(t.consume(f),s++,m):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(f)):(i.type="codeTextData",h(f))}}class yv{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const s=n||0;this.setCursor(Math.trunc(e));const i=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&Or(this.left,r),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Or(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Or(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Or(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Or(this.left,n.reverse())}}}function Or(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function of(t){const e={};let n=-1,r,s,i,a,c,u,h;const m=new yv(t);for(;++n<m.length;){for(;n in e;)n=e[n];if(r=m.get(n),n&&r[1].type==="chunkFlow"&&m.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,i=0,i<u.length&&u[i][1].type==="lineEndingBlank"&&(i+=2),i<u.length&&u[i][1].type==="content"))for(;++i<u.length&&u[i][1].type!=="content";)u[i][1].type==="chunkText"&&(u[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,wv(m,n)),n=e[n],h=!0);else if(r[1]._container){for(i=n,s=void 0;i--;)if(a=m.get(i),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(s&&(m.get(s)[1].type="lineEndingBlank"),a[1].type="lineEnding",s=i);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;s&&(r[1].end={...m.get(s)[1].start},c=m.slice(s,n),c.unshift(r),m.splice(s,n-s+1,c))}}return Ot(t,0,Number.POSITIVE_INFINITY,m.slice(0)),!h}function wv(t,e){const n=t.get(e)[1],r=t.get(e)[2];let s=e-1;const i=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const c=a.events,u=[],h={};let m,f,g=-1,x=n,_=0,k=0;const P=[k];for(;x;){for(;t.get(++s)[1]!==x;);i.push(s),x._tokenizer||(m=r.sliceStream(x),x.next||m.push(null),f&&a.defineSkip(x.start),x._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(m),x._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),f=x,x=x.next}for(x=n;++g<c.length;)c[g][0]==="exit"&&c[g-1][0]==="enter"&&c[g][1].type===c[g-1][1].type&&c[g][1].start.line!==c[g][1].end.line&&(k=g+1,P.push(k),x._tokenizer=void 0,x.previous=void 0,x=x.next);for(a.events=[],x?(x._tokenizer=void 0,x.previous=void 0):P.pop(),g=P.length;g--;){const C=c.slice(P[g],P[g+1]),V=i.pop();u.push([V,V+C.length-1]),t.splice(V,2,C)}for(u.reverse(),g=-1;++g<u.length;)h[_+u[g][0]]=_+u[g][1],_+=u[g][1]-u[g][0]-1;return h}const bv={resolve:_v,tokenize:Ev},vv={partial:!0,tokenize:Nv};function _v(t){return of(t),t}function Ev(t,e){let n;return r;function r(c){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(c)}function s(c){return c===null?i(c):X(c)?t.check(vv,a,i)(c):(t.consume(c),s)}function i(c){return t.exit("chunkContent"),t.exit("content"),e(c)}function a(c){return t.consume(c),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function Nv(t,e,n){const r=this;return s;function s(a){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),xe(t,i,"linePrefix")}function i(a){if(a===null||X(a))return n(a);const c=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(a):t.interrupt(r.parser.constructs.flow,n,e)(a)}}function af(t,e,n,r,s,i,a,c,u){const h=u||Number.POSITIVE_INFINITY;let m=0;return f;function f(C){return C===60?(t.enter(r),t.enter(s),t.enter(i),t.consume(C),t.exit(i),g):C===null||C===32||C===41||va(C)?n(C):(t.enter(r),t.enter(a),t.enter(c),t.enter("chunkString",{contentType:"string"}),k(C))}function g(C){return C===62?(t.enter(i),t.consume(C),t.exit(i),t.exit(s),t.exit(r),e):(t.enter(c),t.enter("chunkString",{contentType:"string"}),x(C))}function x(C){return C===62?(t.exit("chunkString"),t.exit(c),g(C)):C===null||C===60||X(C)?n(C):(t.consume(C),C===92?_:x)}function _(C){return C===60||C===62||C===92?(t.consume(C),x):x(C)}function k(C){return!m&&(C===null||C===41||it(C))?(t.exit("chunkString"),t.exit(c),t.exit(a),t.exit(r),e(C)):m<h&&C===40?(t.consume(C),m++,k):C===41?(t.consume(C),m--,k):C===null||C===32||C===40||va(C)?n(C):(t.consume(C),C===92?P:k)}function P(C){return C===40||C===41||C===92?(t.consume(C),k):k(C)}}function lf(t,e,n,r,s,i){const a=this;let c=0,u;return h;function h(x){return t.enter(r),t.enter(s),t.consume(x),t.exit(s),t.enter(i),m}function m(x){return c>999||x===null||x===91||x===93&&!u||x===94&&!c&&"_hiddenFootnoteSupport"in a.parser.constructs?n(x):x===93?(t.exit(i),t.enter(s),t.consume(x),t.exit(s),t.exit(r),e):X(x)?(t.enter("lineEnding"),t.consume(x),t.exit("lineEnding"),m):(t.enter("chunkString",{contentType:"string"}),f(x))}function f(x){return x===null||x===91||x===93||X(x)||c++>999?(t.exit("chunkString"),m(x)):(t.consume(x),u||(u=!de(x)),x===92?g:f)}function g(x){return x===91||x===92||x===93?(t.consume(x),c++,f):f(x)}}function cf(t,e,n,r,s,i){let a;return c;function c(g){return g===34||g===39||g===40?(t.enter(r),t.enter(s),t.consume(g),t.exit(s),a=g===40?41:g,u):n(g)}function u(g){return g===a?(t.enter(s),t.consume(g),t.exit(s),t.exit(r),e):(t.enter(i),h(g))}function h(g){return g===a?(t.exit(i),u(a)):g===null?n(g):X(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),xe(t,h,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),m(g))}function m(g){return g===a||g===null||X(g)?(t.exit("chunkString"),h(g)):(t.consume(g),g===92?f:m)}function f(g){return g===a||g===92?(t.consume(g),m):m(g)}}function Kr(t,e){let n;return r;function r(s){return X(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):de(s)?xe(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}const Tv={name:"definition",tokenize:Iv},jv={partial:!0,tokenize:Av};function Iv(t,e,n){const r=this;let s;return i;function i(x){return t.enter("definition"),a(x)}function a(x){return lf.call(r,t,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(x)}function c(x){return s=Jn(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),x===58?(t.enter("definitionMarker"),t.consume(x),t.exit("definitionMarker"),u):n(x)}function u(x){return it(x)?Kr(t,h)(x):h(x)}function h(x){return af(t,m,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(x)}function m(x){return t.attempt(jv,f,f)(x)}function f(x){return de(x)?xe(t,g,"whitespace")(x):g(x)}function g(x){return x===null||X(x)?(t.exit("definition"),r.parser.defined.push(s),e(x)):n(x)}}function Av(t,e,n){return r;function r(c){return it(c)?Kr(t,s)(c):n(c)}function s(c){return cf(t,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function i(c){return de(c)?xe(t,a,"whitespace")(c):a(c)}function a(c){return c===null||X(c)?e(c):n(c)}}const kv={name:"hardBreakEscape",tokenize:Sv};function Sv(t,e,n){return r;function r(i){return t.enter("hardBreakEscape"),t.consume(i),s}function s(i){return X(i)?(t.exit("hardBreakEscape"),e(i)):n(i)}}const Cv={name:"headingAtx",resolve:Pv,tokenize:Rv};function Pv(t,e){let n=t.length-2,r=3,s,i;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},i={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},Ot(t,r,n-r+1,[["enter",s,e],["enter",i,e],["exit",i,e],["exit",s,e]])),t}function Rv(t,e,n){let r=0;return s;function s(m){return t.enter("atxHeading"),i(m)}function i(m){return t.enter("atxHeadingSequence"),a(m)}function a(m){return m===35&&r++<6?(t.consume(m),a):m===null||it(m)?(t.exit("atxHeadingSequence"),c(m)):n(m)}function c(m){return m===35?(t.enter("atxHeadingSequence"),u(m)):m===null||X(m)?(t.exit("atxHeading"),e(m)):de(m)?xe(t,c,"whitespace")(m):(t.enter("atxHeadingText"),h(m))}function u(m){return m===35?(t.consume(m),u):(t.exit("atxHeadingSequence"),c(m))}function h(m){return m===null||m===35||it(m)?(t.exit("atxHeadingText"),c(m)):(t.consume(m),h)}}const Dv=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],ih=["pre","script","style","textarea"],Vv={concrete:!0,name:"htmlFlow",resolveTo:Lv,tokenize:Fv},Ov={partial:!0,tokenize:zv},Mv={partial:!0,tokenize:qv};function Lv(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function Fv(t,e,n){const r=this;let s,i,a,c,u;return h;function h(j){return m(j)}function m(j){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(j),f}function f(j){return j===33?(t.consume(j),g):j===47?(t.consume(j),i=!0,k):j===63?(t.consume(j),s=3,r.interrupt?e:A):St(j)?(t.consume(j),a=String.fromCharCode(j),P):n(j)}function g(j){return j===45?(t.consume(j),s=2,x):j===91?(t.consume(j),s=5,c=0,_):St(j)?(t.consume(j),s=4,r.interrupt?e:A):n(j)}function x(j){return j===45?(t.consume(j),r.interrupt?e:A):n(j)}function _(j){const ct="CDATA[";return j===ct.charCodeAt(c++)?(t.consume(j),c===ct.length?r.interrupt?e:T:_):n(j)}function k(j){return St(j)?(t.consume(j),a=String.fromCharCode(j),P):n(j)}function P(j){if(j===null||j===47||j===62||it(j)){const ct=j===47,ut=a.toLowerCase();return!ct&&!i&&ih.includes(ut)?(s=1,r.interrupt?e(j):T(j)):Dv.includes(a.toLowerCase())?(s=6,ct?(t.consume(j),C):r.interrupt?e(j):T(j)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):i?V(j):M(j))}return j===45||xt(j)?(t.consume(j),a+=String.fromCharCode(j),P):n(j)}function C(j){return j===62?(t.consume(j),r.interrupt?e:T):n(j)}function V(j){return de(j)?(t.consume(j),V):v(j)}function M(j){return j===47?(t.consume(j),v):j===58||j===95||St(j)?(t.consume(j),$):de(j)?(t.consume(j),M):v(j)}function $(j){return j===45||j===46||j===58||j===95||xt(j)?(t.consume(j),$):ee(j)}function ee(j){return j===61?(t.consume(j),O):de(j)?(t.consume(j),ee):M(j)}function O(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(t.consume(j),u=j,I):de(j)?(t.consume(j),O):y(j)}function I(j){return j===u?(t.consume(j),u=null,b):j===null||X(j)?n(j):(t.consume(j),I)}function y(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||it(j)?ee(j):(t.consume(j),y)}function b(j){return j===47||j===62||de(j)?M(j):n(j)}function v(j){return j===62?(t.consume(j),N):n(j)}function N(j){return j===null||X(j)?T(j):de(j)?(t.consume(j),N):n(j)}function T(j){return j===45&&s===2?(t.consume(j),Ne):j===60&&s===1?(t.consume(j),be):j===62&&s===4?(t.consume(j),lt):j===63&&s===3?(t.consume(j),A):j===93&&s===5?(t.consume(j),at):X(j)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(Ov,Ve,E)(j)):j===null||X(j)?(t.exit("htmlFlowData"),E(j)):(t.consume(j),T)}function E(j){return t.check(Mv,re,Ve)(j)}function re(j){return t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),ne}function ne(j){return j===null||X(j)?E(j):(t.enter("htmlFlowData"),T(j))}function Ne(j){return j===45?(t.consume(j),A):T(j)}function be(j){return j===47?(t.consume(j),a="",Le):T(j)}function Le(j){if(j===62){const ct=a.toLowerCase();return ih.includes(ct)?(t.consume(j),lt):T(j)}return St(j)&&a.length<8?(t.consume(j),a+=String.fromCharCode(j),Le):T(j)}function at(j){return j===93?(t.consume(j),A):T(j)}function A(j){return j===62?(t.consume(j),lt):j===45&&s===2?(t.consume(j),A):T(j)}function lt(j){return j===null||X(j)?(t.exit("htmlFlowData"),Ve(j)):(t.consume(j),lt)}function Ve(j){return t.exit("htmlFlow"),e(j)}}function qv(t,e,n){const r=this;return s;function s(a){return X(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),i):n(a)}function i(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}function zv(t,e,n){return r;function r(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(Wi,e,n)}}const Bv={name:"htmlText",tokenize:Uv};function Uv(t,e,n){const r=this;let s,i,a;return c;function c(A){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(A),u}function u(A){return A===33?(t.consume(A),h):A===47?(t.consume(A),ee):A===63?(t.consume(A),M):St(A)?(t.consume(A),y):n(A)}function h(A){return A===45?(t.consume(A),m):A===91?(t.consume(A),i=0,_):St(A)?(t.consume(A),V):n(A)}function m(A){return A===45?(t.consume(A),x):n(A)}function f(A){return A===null?n(A):A===45?(t.consume(A),g):X(A)?(a=f,be(A)):(t.consume(A),f)}function g(A){return A===45?(t.consume(A),x):f(A)}function x(A){return A===62?Ne(A):A===45?g(A):f(A)}function _(A){const lt="CDATA[";return A===lt.charCodeAt(i++)?(t.consume(A),i===lt.length?k:_):n(A)}function k(A){return A===null?n(A):A===93?(t.consume(A),P):X(A)?(a=k,be(A)):(t.consume(A),k)}function P(A){return A===93?(t.consume(A),C):k(A)}function C(A){return A===62?Ne(A):A===93?(t.consume(A),C):k(A)}function V(A){return A===null||A===62?Ne(A):X(A)?(a=V,be(A)):(t.consume(A),V)}function M(A){return A===null?n(A):A===63?(t.consume(A),$):X(A)?(a=M,be(A)):(t.consume(A),M)}function $(A){return A===62?Ne(A):M(A)}function ee(A){return St(A)?(t.consume(A),O):n(A)}function O(A){return A===45||xt(A)?(t.consume(A),O):I(A)}function I(A){return X(A)?(a=I,be(A)):de(A)?(t.consume(A),I):Ne(A)}function y(A){return A===45||xt(A)?(t.consume(A),y):A===47||A===62||it(A)?b(A):n(A)}function b(A){return A===47?(t.consume(A),Ne):A===58||A===95||St(A)?(t.consume(A),v):X(A)?(a=b,be(A)):de(A)?(t.consume(A),b):Ne(A)}function v(A){return A===45||A===46||A===58||A===95||xt(A)?(t.consume(A),v):N(A)}function N(A){return A===61?(t.consume(A),T):X(A)?(a=N,be(A)):de(A)?(t.consume(A),N):b(A)}function T(A){return A===null||A===60||A===61||A===62||A===96?n(A):A===34||A===39?(t.consume(A),s=A,E):X(A)?(a=T,be(A)):de(A)?(t.consume(A),T):(t.consume(A),re)}function E(A){return A===s?(t.consume(A),s=void 0,ne):A===null?n(A):X(A)?(a=E,be(A)):(t.consume(A),E)}function re(A){return A===null||A===34||A===39||A===60||A===61||A===96?n(A):A===47||A===62||it(A)?b(A):(t.consume(A),re)}function ne(A){return A===47||A===62||it(A)?b(A):n(A)}function Ne(A){return A===62?(t.consume(A),t.exit("htmlTextData"),t.exit("htmlText"),e):n(A)}function be(A){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(A),t.exit("lineEnding"),Le}function Le(A){return de(A)?xe(t,at,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(A):at(A)}function at(A){return t.enter("htmlTextData"),a(A)}}const Nl={name:"labelEnd",resolveAll:Qv,resolveTo:Kv,tokenize:Wv},$v={tokenize:Yv},Hv={tokenize:Xv},Gv={tokenize:Jv};function Qv(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",e+=s}}return t.length!==n.length&&Ot(t,0,t.length,n),t}function Kv(t,e){let n=t.length,r=0,s,i,a,c;for(;n--;)if(s=t[n][1],i){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(a){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(i=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(a=n);const u={type:t[i][1].type==="labelLink"?"link":"image",start:{...t[i][1].start},end:{...t[t.length-1][1].end}},h={type:"label",start:{...t[i][1].start},end:{...t[a][1].end}},m={type:"labelText",start:{...t[i+r+2][1].end},end:{...t[a-2][1].start}};return c=[["enter",u,e],["enter",h,e]],c=bt(c,t.slice(i+1,i+r+3)),c=bt(c,[["enter",m,e]]),c=bt(c,El(e.parser.constructs.insideSpan.null,t.slice(i+r+4,a-3),e)),c=bt(c,[["exit",m,e],t[a-2],t[a-1],["exit",h,e]]),c=bt(c,t.slice(a+1)),c=bt(c,[["exit",u,e]]),Ot(t,i,t.length,c),t}function Wv(t,e,n){const r=this;let s=r.events.length,i,a;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){i=r.events[s][1];break}return c;function c(g){return i?i._inactive?f(g):(a=r.parser.defined.includes(Jn(r.sliceSerialize({start:i.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(g),t.exit("labelMarker"),t.exit("labelEnd"),u):n(g)}function u(g){return g===40?t.attempt($v,m,a?m:f)(g):g===91?t.attempt(Hv,m,a?h:f)(g):a?m(g):f(g)}function h(g){return t.attempt(Gv,m,f)(g)}function m(g){return e(g)}function f(g){return i._balanced=!0,n(g)}}function Yv(t,e,n){return r;function r(f){return t.enter("resource"),t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),s}function s(f){return it(f)?Kr(t,i)(f):i(f)}function i(f){return f===41?m(f):af(t,a,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function a(f){return it(f)?Kr(t,u)(f):m(f)}function c(f){return n(f)}function u(f){return f===34||f===39||f===40?cf(t,h,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):m(f)}function h(f){return it(f)?Kr(t,m)(f):m(f)}function m(f){return f===41?(t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),t.exit("resource"),e):n(f)}}function Xv(t,e,n){const r=this;return s;function s(c){return lf.call(r,t,i,a,"reference","referenceMarker","referenceString")(c)}function i(c){return r.parser.defined.includes(Jn(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(c):n(c)}function a(c){return n(c)}}function Jv(t,e,n){return r;function r(i){return t.enter("reference"),t.enter("referenceMarker"),t.consume(i),t.exit("referenceMarker"),s}function s(i){return i===93?(t.enter("referenceMarker"),t.consume(i),t.exit("referenceMarker"),t.exit("reference"),e):n(i)}}const Zv={name:"labelStartImage",resolveAll:Nl.resolveAll,tokenize:e_};function e_(t,e,n){const r=this;return s;function s(c){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(c),t.exit("labelImageMarker"),i}function i(c){return c===91?(t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelImage"),a):n(c)}function a(c){return c===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(c):e(c)}}const t_={name:"labelStartLink",resolveAll:Nl.resolveAll,tokenize:n_};function n_(t,e,n){const r=this;return s;function s(a){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelLink"),i}function i(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const Po={name:"lineEnding",tokenize:r_};function r_(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),xe(t,e,"linePrefix")}}const ti={name:"thematicBreak",tokenize:s_};function s_(t,e,n){let r=0,s;return i;function i(h){return t.enter("thematicBreak"),a(h)}function a(h){return s=h,c(h)}function c(h){return h===s?(t.enter("thematicBreakSequence"),u(h)):r>=3&&(h===null||X(h))?(t.exit("thematicBreak"),e(h)):n(h)}function u(h){return h===s?(t.consume(h),r++,u):(t.exit("thematicBreakSequence"),de(h)?xe(t,c,"whitespace")(h):c(h))}}const tt={continuation:{tokenize:l_},exit:u_,name:"list",tokenize:a_},i_={partial:!0,tokenize:h_},o_={partial:!0,tokenize:c_};function a_(t,e,n){const r=this,s=r.events[r.events.length-1];let i=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,a=0;return c;function c(x){const _=r.containerState.type||(x===42||x===43||x===45?"listUnordered":"listOrdered");if(_==="listUnordered"?!r.containerState.marker||x===r.containerState.marker:_a(x)){if(r.containerState.type||(r.containerState.type=_,t.enter(_,{_container:!0})),_==="listUnordered")return t.enter("listItemPrefix"),x===42||x===45?t.check(ti,n,h)(x):h(x);if(!r.interrupt||x===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),u(x)}return n(x)}function u(x){return _a(x)&&++a<10?(t.consume(x),u):(!r.interrupt||a<2)&&(r.containerState.marker?x===r.containerState.marker:x===41||x===46)?(t.exit("listItemValue"),h(x)):n(x)}function h(x){return t.enter("listItemMarker"),t.consume(x),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||x,t.check(Wi,r.interrupt?n:m,t.attempt(i_,g,f))}function m(x){return r.containerState.initialBlankLine=!0,i++,g(x)}function f(x){return de(x)?(t.enter("listItemPrefixWhitespace"),t.consume(x),t.exit("listItemPrefixWhitespace"),g):n(x)}function g(x){return r.containerState.size=i+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(x)}}function l_(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Wi,s,i);function s(c){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,xe(t,e,"listItemIndent",r.containerState.size+1)(c)}function i(c){return r.containerState.furtherBlankLines||!de(c)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(c)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(o_,e,a)(c))}function a(c){return r.containerState._closeFlow=!0,r.interrupt=void 0,xe(t,t.attempt(tt,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function c_(t,e,n){const r=this;return xe(t,s,"listItemIndent",r.containerState.size+1);function s(i){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?e(i):n(i)}}function u_(t){t.exit(this.containerState.type)}function h_(t,e,n){const r=this;return xe(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(i){const a=r.events[r.events.length-1];return!de(i)&&a&&a[1].type==="listItemPrefixWhitespace"?e(i):n(i)}}const oh={name:"setextUnderline",resolveTo:d_,tokenize:m_};function d_(t,e){let n=t.length,r,s,i;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!i&&t[n][1].type==="definition"&&(i=n);const a={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",i?(t.splice(s,0,["enter",a,e]),t.splice(i+1,0,["exit",t[r][1],e]),t[r][1].end={...t[i][1].end}):t[r][1]=a,t.push(["exit",a,e]),t}function m_(t,e,n){const r=this;let s;return i;function i(h){let m=r.events.length,f;for(;m--;)if(r.events[m][1].type!=="lineEnding"&&r.events[m][1].type!=="linePrefix"&&r.events[m][1].type!=="content"){f=r.events[m][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(t.enter("setextHeadingLine"),s=h,a(h)):n(h)}function a(h){return t.enter("setextHeadingLineSequence"),c(h)}function c(h){return h===s?(t.consume(h),c):(t.exit("setextHeadingLineSequence"),de(h)?xe(t,u,"lineSuffix")(h):u(h))}function u(h){return h===null||X(h)?(t.exit("setextHeadingLine"),e(h)):n(h)}}const f_={tokenize:p_};function p_(t){const e=this,n=t.attempt(Wi,r,t.attempt(this.parser.constructs.flowInitial,s,xe(t,t.attempt(this.parser.constructs.flow,s,t.attempt(bv,s)),"linePrefix")));return n;function r(i){if(i===null){t.consume(i);return}return t.enter("lineEndingBlank"),t.consume(i),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(i){if(i===null){t.consume(i);return}return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const g_={resolveAll:hf()},x_=uf("string"),y_=uf("text");function uf(t){return{resolveAll:hf(t==="text"?w_:void 0),tokenize:e};function e(n){const r=this,s=this.parser.constructs[t],i=n.attempt(s,a,c);return a;function a(m){return h(m)?i(m):c(m)}function c(m){if(m===null){n.consume(m);return}return n.enter("data"),n.consume(m),u}function u(m){return h(m)?(n.exit("data"),i(m)):(n.consume(m),u)}function h(m){if(m===null)return!0;const f=s[m];let g=-1;if(f)for(;++g<f.length;){const x=f[g];if(!x.previous||x.previous.call(r,r.previous))return!0}return!1}}}function hf(t){return e;function e(n,r){let s=-1,i;for(;++s<=n.length;)i===void 0?n[s]&&n[s][1].type==="data"&&(i=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==i+2&&(n[i][1].end=n[s-1][1].end,n.splice(i+2,s-i-2),s=i+2),i=void 0);return t?t(n,r):n}}function w_(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let i=s.length,a=-1,c=0,u;for(;i--;){const h=s[i];if(typeof h=="string"){for(a=h.length;h.charCodeAt(a-1)===32;)c++,a--;if(a)break;a=-1}else if(h===-2)u=!0,c++;else if(h!==-1){i++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(c=0),c){const h={type:n===t.length||u||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?a:r.start._bufferIndex+a,_index:r.start._index+i,line:r.end.line,column:r.end.column-c,offset:r.end.offset-c},end:{...r.end}};r.end={...h.start},r.start.offset===r.end.offset?Object.assign(r,h):(t.splice(n,0,["enter",h,e],["exit",h,e]),n+=2)}n++}return t}const b_={42:tt,43:tt,45:tt,48:tt,49:tt,50:tt,51:tt,52:tt,53:tt,54:tt,55:tt,56:tt,57:tt,62:nf},v_={91:Tv},__={[-2]:Co,[-1]:Co,32:Co},E_={35:Cv,42:ti,45:[oh,ti],60:Vv,61:oh,95:ti,96:sh,126:sh},N_={38:sf,92:rf},T_={[-5]:Po,[-4]:Po,[-3]:Po,33:Zv,38:sf,42:Ea,60:[tv,Bv],91:t_,92:[kv,rf],93:Nl,95:Ea,96:fv},j_={null:[Ea,g_]},I_={null:[42,95]},A_={null:[]},k_=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:I_,contentInitial:v_,disable:A_,document:b_,flow:E_,flowInitial:__,insideSpan:j_,string:N_,text:T_},Symbol.toStringTag,{value:"Module"}));function S_(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},i=[];let a=[],c=[];const u={attempt:I(ee),check:I(O),consume:V,enter:M,exit:$,interrupt:I(O,{interrupt:!0})},h={code:null,containerState:{},defineSkip:k,events:[],now:_,parser:t,previous:null,sliceSerialize:g,sliceStream:x,write:f};let m=e.tokenize.call(h,u);return e.resolveAll&&i.push(e),h;function f(N){return a=bt(a,N),P(),a[a.length-1]!==null?[]:(y(e,0),h.events=El(i,h.events,h),h.events)}function g(N,T){return P_(x(N),T)}function x(N){return C_(a,N)}function _(){const{_bufferIndex:N,_index:T,line:E,column:re,offset:ne}=r;return{_bufferIndex:N,_index:T,line:E,column:re,offset:ne}}function k(N){s[N.line]=N.column,v()}function P(){let N;for(;r._index<a.length;){const T=a[r._index];if(typeof T=="string")for(N=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===N&&r._bufferIndex<T.length;)C(T.charCodeAt(r._bufferIndex));else C(T)}}function C(N){m=m(N)}function V(N){X(N)?(r.line++,r.column=1,r.offset+=N===-3?2:1,v()):N!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),h.previous=N}function M(N,T){const E=T||{};return E.type=N,E.start=_(),h.events.push(["enter",E,h]),c.push(E),E}function $(N){const T=c.pop();return T.end=_(),h.events.push(["exit",T,h]),T}function ee(N,T){y(N,T.from)}function O(N,T){T.restore()}function I(N,T){return E;function E(re,ne,Ne){let be,Le,at,A;return Array.isArray(re)?Ve(re):"tokenize"in re?Ve([re]):lt(re);function lt(Se){return jt;function jt(It){const Kt=It!==null&&Se[It],_t=It!==null&&Se.null,Mt=[...Array.isArray(Kt)?Kt:Kt?[Kt]:[],...Array.isArray(_t)?_t:_t?[_t]:[]];return Ve(Mt)(It)}}function Ve(Se){return be=Se,Le=0,Se.length===0?Ne:j(Se[Le])}function j(Se){return jt;function jt(It){return A=b(),at=Se,Se.partial||(h.currentConstruct=Se),Se.name&&h.parser.constructs.disable.null.includes(Se.name)?ut():Se.tokenize.call(T?Object.assign(Object.create(h),T):h,u,ct,ut)(It)}}function ct(Se){return N(at,A),ne}function ut(Se){return A.restore(),++Le<be.length?j(be[Le]):Ne}}}function y(N,T){N.resolveAll&&!i.includes(N)&&i.push(N),N.resolve&&Ot(h.events,T,h.events.length-T,N.resolve(h.events.slice(T),h)),N.resolveTo&&(h.events=N.resolveTo(h.events,h))}function b(){const N=_(),T=h.previous,E=h.currentConstruct,re=h.events.length,ne=Array.from(c);return{from:re,restore:Ne};function Ne(){r=N,h.previous=T,h.currentConstruct=E,h.events.length=re,c=ne,v()}}function v(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function C_(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,i=e.end._bufferIndex;let a;if(n===s)a=[t[n].slice(r,i)];else{if(a=t.slice(n,s),r>-1){const c=a[0];typeof c=="string"?a[0]=c.slice(r):a.shift()}i>0&&a.push(t[s].slice(0,i))}return a}function P_(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const i=t[n];let a;if(typeof i=="string")a=i;else switch(i){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&s)continue;a=" ";break}default:a=String.fromCharCode(i)}s=i===-2,r.push(a)}return r.join("")}function R_(t){const r={constructs:qb([k_,...(t||{}).extensions||[]]),content:s(Kb),defined:[],document:s(Yb),flow:s(f_),lazy:{},string:s(x_),text:s(y_)};return r;function s(i){return a;function a(c){return S_(r,i,c)}}}function D_(t){for(;!of(t););return t}const ah=/[\0\t\n\r]/g;function V_(){let t=1,e="",n=!0,r;return s;function s(i,a,c){const u=[];let h,m,f,g,x;for(i=e+(typeof i=="string"?i.toString():new TextDecoder(a||void 0).decode(i)),f=0,e="",n&&(i.charCodeAt(0)===65279&&f++,n=void 0);f<i.length;){if(ah.lastIndex=f,h=ah.exec(i),g=h&&h.index!==void 0?h.index:i.length,x=i.charCodeAt(g),!h){e=i.slice(f);break}if(x===10&&f===g&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<g&&(u.push(i.slice(f,g)),t+=g-f),x){case 0:{u.push(65533),t++;break}case 9:{for(m=Math.ceil(t/4)*4,u.push(-2);t++<m;)u.push(-1);break}case 10:{u.push(-4),t=1;break}default:r=!0,t=1}f=g+1}return c&&(r&&u.push(-5),e&&u.push(e),u.push(null)),u}}const O_=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function M_(t){return t.replace(O_,L_)}function L_(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),i=s===120||s===88;return tf(n.slice(i?2:1),i?16:10)}return _l(n)||t}const df={}.hasOwnProperty;function F_(t,e,n){return typeof e!="string"&&(n=e,e=void 0),q_(n)(D_(R_(n).document().write(V_()(t,e,!0))))}function q_(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:i(wr),autolinkProtocol:b,autolinkEmail:b,atxHeading:i(Dn),blockQuote:i(_t),characterEscape:b,characterReference:b,codeFenced:i(Mt),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:i(Mt,a),codeText:i(pr,a),codeTextData:b,data:b,codeFlowValue:b,definition:i(gr),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:i(xr),hardBreakEscape:i(yr),hardBreakTrailing:i(yr),htmlFlow:i(ys,a),htmlFlowData:b,htmlText:i(ys,a),htmlTextData:b,image:i(Ji),label:a,link:i(wr),listItem:i(ws),listItemValue:g,listOrdered:i(Vn,f),listUnordered:i(Vn),paragraph:i(Zi),reference:j,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:i(Dn),strong:i(br),thematicBreak:i(bs)},exit:{atxHeading:u(),atxHeadingSequence:ee,autolink:u(),autolinkEmail:Kt,autolinkProtocol:It,blockQuote:u(),characterEscapeValue:v,characterReferenceMarkerHexadecimal:ut,characterReferenceMarkerNumeric:ut,characterReferenceValue:Se,characterReference:jt,codeFenced:u(P),codeFencedFence:k,codeFencedFenceInfo:x,codeFencedFenceMeta:_,codeFlowValue:v,codeIndented:u(C),codeText:u(ne),codeTextData:v,data:v,definition:u(),definitionDestinationString:$,definitionLabelString:V,definitionTitleString:M,emphasis:u(),hardBreakEscape:u(T),hardBreakTrailing:u(T),htmlFlow:u(E),htmlFlowData:v,htmlText:u(re),htmlTextData:v,image:u(be),label:at,labelText:Le,lineEnding:N,link:u(Ne),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:ct,resourceDestinationString:A,resourceTitleString:lt,resource:Ve,setextHeading:u(y),setextHeadingLineSequence:I,setextHeadingText:O,strong:u(),thematicBreak:u()}};mf(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(D){let q={type:"root",children:[]};const Y={stack:[q],tokenStack:[],config:e,enter:c,exit:h,buffer:a,resume:m,data:n},ae=[];let me=-1;for(;++me<D.length;)if(D[me][1].type==="listOrdered"||D[me][1].type==="listUnordered")if(D[me][0]==="enter")ae.push(me);else{const ht=ae.pop();me=s(D,ht,me)}for(me=-1;++me<D.length;){const ht=e[D[me][0]];df.call(ht,D[me][1].type)&&ht[D[me][1].type].call(Object.assign({sliceSerialize:D[me][2].sliceSerialize},Y),D[me][1])}if(Y.tokenStack.length>0){const ht=Y.tokenStack[Y.tokenStack.length-1];(ht[1]||lh).call(Y,void 0,ht[0])}for(q.position={start:en(D.length>0?D[0][1].start:{line:1,column:1,offset:0}),end:en(D.length>0?D[D.length-2][1].end:{line:1,column:1,offset:0})},me=-1;++me<e.transforms.length;)q=e.transforms[me](q)||q;return q}function s(D,q,Y){let ae=q-1,me=-1,ht=!1,dt,yt,Wt,Lt;for(;++ae<=Y;){const Xe=D[ae];switch(Xe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Xe[0]==="enter"?me++:me--,Lt=void 0;break}case"lineEndingBlank":{Xe[0]==="enter"&&(dt&&!Lt&&!me&&!Wt&&(Wt=ae),Lt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Lt=void 0}if(!me&&Xe[0]==="enter"&&Xe[1].type==="listItemPrefix"||me===-1&&Xe[0]==="exit"&&(Xe[1].type==="listUnordered"||Xe[1].type==="listOrdered")){if(dt){let Yt=ae;for(yt=void 0;Yt--;){const mt=D[Yt];if(mt[1].type==="lineEnding"||mt[1].type==="lineEndingBlank"){if(mt[0]==="exit")continue;yt&&(D[yt][1].type="lineEndingBlank",ht=!0),mt[1].type="lineEnding",yt=Yt}else if(!(mt[1].type==="linePrefix"||mt[1].type==="blockQuotePrefix"||mt[1].type==="blockQuotePrefixWhitespace"||mt[1].type==="blockQuoteMarker"||mt[1].type==="listItemIndent"))break}Wt&&(!yt||Wt<yt)&&(dt._spread=!0),dt.end=Object.assign({},yt?D[yt][1].start:Xe[1].end),D.splice(yt||ae,0,["exit",dt,Xe[2]]),ae++,Y++}if(Xe[1].type==="listItemPrefix"){const Yt={type:"listItem",_spread:!1,start:Object.assign({},Xe[1].start),end:void 0};dt=Yt,D.splice(ae,0,["enter",Yt,Xe[2]]),ae++,Y++,Wt=void 0,Lt=!0}}}return D[q][1]._spread=ht,Y}function i(D,q){return Y;function Y(ae){c.call(this,D(ae),ae),q&&q.call(this,ae)}}function a(){this.stack.push({type:"fragment",children:[]})}function c(D,q,Y){this.stack[this.stack.length-1].children.push(D),this.stack.push(D),this.tokenStack.push([q,Y||void 0]),D.position={start:en(q.start),end:void 0}}function u(D){return q;function q(Y){D&&D.call(this,Y),h.call(this,Y)}}function h(D,q){const Y=this.stack.pop(),ae=this.tokenStack.pop();if(ae)ae[0].type!==D.type&&(q?q.call(this,D,ae[0]):(ae[1]||lh).call(this,D,ae[0]));else throw new Error("Cannot close `"+D.type+"` ("+Qr({start:D.start,end:D.end})+"): it’s not open");Y.position.end=en(D.end)}function m(){return Lb(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function g(D){if(this.data.expectingFirstListItemValue){const q=this.stack[this.stack.length-2];q.start=Number.parseInt(this.sliceSerialize(D),10),this.data.expectingFirstListItemValue=void 0}}function x(){const D=this.resume(),q=this.stack[this.stack.length-1];q.lang=D}function _(){const D=this.resume(),q=this.stack[this.stack.length-1];q.meta=D}function k(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function P(){const D=this.resume(),q=this.stack[this.stack.length-1];q.value=D.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function C(){const D=this.resume(),q=this.stack[this.stack.length-1];q.value=D.replace(/(\r?\n|\r)$/g,"")}function V(D){const q=this.resume(),Y=this.stack[this.stack.length-1];Y.label=q,Y.identifier=Jn(this.sliceSerialize(D)).toLowerCase()}function M(){const D=this.resume(),q=this.stack[this.stack.length-1];q.title=D}function $(){const D=this.resume(),q=this.stack[this.stack.length-1];q.url=D}function ee(D){const q=this.stack[this.stack.length-1];if(!q.depth){const Y=this.sliceSerialize(D).length;q.depth=Y}}function O(){this.data.setextHeadingSlurpLineEnding=!0}function I(D){const q=this.stack[this.stack.length-1];q.depth=this.sliceSerialize(D).codePointAt(0)===61?1:2}function y(){this.data.setextHeadingSlurpLineEnding=void 0}function b(D){const Y=this.stack[this.stack.length-1].children;let ae=Y[Y.length-1];(!ae||ae.type!=="text")&&(ae=vr(),ae.position={start:en(D.start),end:void 0},Y.push(ae)),this.stack.push(ae)}function v(D){const q=this.stack.pop();q.value+=this.sliceSerialize(D),q.position.end=en(D.end)}function N(D){const q=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Y=q.children[q.children.length-1];Y.position.end=en(D.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(q.type)&&(b.call(this,D),v.call(this,D))}function T(){this.data.atHardBreak=!0}function E(){const D=this.resume(),q=this.stack[this.stack.length-1];q.value=D}function re(){const D=this.resume(),q=this.stack[this.stack.length-1];q.value=D}function ne(){const D=this.resume(),q=this.stack[this.stack.length-1];q.value=D}function Ne(){const D=this.stack[this.stack.length-1];if(this.data.inReference){const q=this.data.referenceType||"shortcut";D.type+="Reference",D.referenceType=q,delete D.url,delete D.title}else delete D.identifier,delete D.label;this.data.referenceType=void 0}function be(){const D=this.stack[this.stack.length-1];if(this.data.inReference){const q=this.data.referenceType||"shortcut";D.type+="Reference",D.referenceType=q,delete D.url,delete D.title}else delete D.identifier,delete D.label;this.data.referenceType=void 0}function Le(D){const q=this.sliceSerialize(D),Y=this.stack[this.stack.length-2];Y.label=M_(q),Y.identifier=Jn(q).toLowerCase()}function at(){const D=this.stack[this.stack.length-1],q=this.resume(),Y=this.stack[this.stack.length-1];if(this.data.inReference=!0,Y.type==="link"){const ae=D.children;Y.children=ae}else Y.alt=q}function A(){const D=this.resume(),q=this.stack[this.stack.length-1];q.url=D}function lt(){const D=this.resume(),q=this.stack[this.stack.length-1];q.title=D}function Ve(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function ct(D){const q=this.resume(),Y=this.stack[this.stack.length-1];Y.label=q,Y.identifier=Jn(this.sliceSerialize(D)).toLowerCase(),this.data.referenceType="full"}function ut(D){this.data.characterReferenceType=D.type}function Se(D){const q=this.sliceSerialize(D),Y=this.data.characterReferenceType;let ae;Y?(ae=tf(q,Y==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ae=_l(q);const me=this.stack[this.stack.length-1];me.value+=ae}function jt(D){const q=this.stack.pop();q.position.end=en(D.end)}function It(D){v.call(this,D);const q=this.stack[this.stack.length-1];q.url=this.sliceSerialize(D)}function Kt(D){v.call(this,D);const q=this.stack[this.stack.length-1];q.url="mailto:"+this.sliceSerialize(D)}function _t(){return{type:"blockquote",children:[]}}function Mt(){return{type:"code",lang:null,meta:null,value:""}}function pr(){return{type:"inlineCode",value:""}}function gr(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function xr(){return{type:"emphasis",children:[]}}function Dn(){return{type:"heading",depth:0,children:[]}}function yr(){return{type:"break"}}function ys(){return{type:"html",value:""}}function Ji(){return{type:"image",title:null,url:"",alt:null}}function wr(){return{type:"link",title:null,url:"",children:[]}}function Vn(D){return{type:"list",ordered:D.type==="listOrdered",start:null,spread:D._spread,children:[]}}function ws(D){return{type:"listItem",spread:D._spread,checked:null,children:[]}}function Zi(){return{type:"paragraph",children:[]}}function br(){return{type:"strong",children:[]}}function vr(){return{type:"text",value:""}}function bs(){return{type:"thematicBreak"}}}function en(t){return{line:t.line,column:t.column,offset:t.offset}}function mf(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?mf(t,r):z_(t,r)}}function z_(t,e){let n;for(n in e)if(df.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function lh(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Qr({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Qr({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Qr({start:e.start,end:e.end})+") is still open")}function B_(t){const e=this;e.parser=n;function n(r){return F_(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function U_(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function $_(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function H_(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function G_(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Q_(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function K_(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),s=fr(r.toLowerCase()),i=t.footnoteOrder.indexOf(r);let a,c=t.footnoteCounts.get(r);c===void 0?(c=0,t.footnoteOrder.push(r),a=t.footnoteOrder.length):a=i+1,c+=1,t.footnoteCounts.set(r,c);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};t.patch(e,u);const h={type:"element",tagName:"sup",properties:{},children:[u]};return t.patch(e,h),t.applyData(e,h)}function W_(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Y_(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function ff(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const s=t.all(e),i=s[0];i&&i.type==="text"?i.value="["+i.value:s.unshift({type:"text",value:"["});const a=s[s.length-1];return a&&a.type==="text"?a.value+=r:s.push({type:"text",value:r}),s}function X_(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return ff(t,e);const s={src:fr(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,i),t.applyData(e,i)}function J_(t,e){const n={src:fr(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function Z_(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function eE(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return ff(t,e);const s={href:fr(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const i={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function tE(t,e){const n={href:fr(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function nE(t,e,n){const r=t.all(e),s=n?rE(n):pf(e),i={},a=[];if(typeof e.checked=="boolean"){const m=r[0];let f;m&&m.type==="element"&&m.tagName==="p"?f=m:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let c=-1;for(;++c<r.length;){const m=r[c];(s||c!==0||m.type!=="element"||m.tagName!=="p")&&a.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!s?a.push(...m.children):a.push(m)}const u=r[r.length-1];u&&(s||u.type!=="element"||u.tagName!=="p")&&a.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:i,children:a};return t.patch(e,h),t.applyData(e,h)}function rE(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=pf(n[r])}return e}function pf(t){const e=t.spread;return e??t.children.length>1}function sE(t,e){const n={},r=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<r.length;){const a=r[s];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const i={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,i),t.applyData(e,i)}function iE(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function oE(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function aE(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function lE(t,e){const n=t.all(e),r=n.shift(),s=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],a),s.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},c=yl(e.children[1]),u=Km(e.children[e.children.length-1]);c&&u&&(a.position={start:c,end:u}),s.push(a)}const i={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,i),t.applyData(e,i)}function cE(t,e,n){const r=n?n.children:void 0,i=(r?r.indexOf(e):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,c=a?a.length:e.children.length;let u=-1;const h=[];for(;++u<c;){const f=e.children[u],g={},x=a?a[u]:void 0;x&&(g.align=x);let _={type:"element",tagName:i,properties:g,children:[]};f&&(_.children=t.all(f),t.patch(f,_),_=t.applyData(f,_)),h.push(_)}const m={type:"element",tagName:"tr",properties:{},children:t.wrap(h,!0)};return t.patch(e,m),t.applyData(e,m)}function uE(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const ch=9,uh=32;function hE(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),s=0;const i=[];for(;r;)i.push(hh(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(e);return i.push(hh(e.slice(s),s>0,!1)),i.join("")}function hh(t,e,n){let r=0,s=t.length;if(e){let i=t.codePointAt(r);for(;i===ch||i===uh;)r++,i=t.codePointAt(r)}if(n){let i=t.codePointAt(s-1);for(;i===ch||i===uh;)s--,i=t.codePointAt(s-1)}return s>r?t.slice(r,s):""}function dE(t,e){const n={type:"text",value:hE(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function mE(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const fE={blockquote:U_,break:$_,code:H_,delete:G_,emphasis:Q_,footnoteReference:K_,heading:W_,html:Y_,imageReference:X_,image:J_,inlineCode:Z_,linkReference:eE,link:tE,listItem:nE,list:sE,paragraph:iE,root:oE,strong:aE,table:lE,tableCell:uE,tableRow:cE,text:dE,thematicBreak:mE,toml:Bs,yaml:Bs,definition:Bs,footnoteDefinition:Bs};function Bs(){}const gf=-1,Yi=0,Wr=1,Ei=2,Tl=3,jl=4,Il=5,Al=6,xf=7,yf=8,dh=typeof self=="object"?self:globalThis,pE=(t,e)=>{const n=(s,i)=>(t.set(i,s),s),r=s=>{if(t.has(s))return t.get(s);const[i,a]=e[s];switch(i){case Yi:case gf:return n(a,s);case Wr:{const c=n([],s);for(const u of a)c.push(r(u));return c}case Ei:{const c=n({},s);for(const[u,h]of a)c[r(u)]=r(h);return c}case Tl:return n(new Date(a),s);case jl:{const{source:c,flags:u}=a;return n(new RegExp(c,u),s)}case Il:{const c=n(new Map,s);for(const[u,h]of a)c.set(r(u),r(h));return c}case Al:{const c=n(new Set,s);for(const u of a)c.add(r(u));return c}case xf:{const{name:c,message:u}=a;return n(new dh[c](u),s)}case yf:return n(BigInt(a),s);case"BigInt":return n(Object(BigInt(a)),s);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:c}=new Uint8Array(a);return n(new DataView(c),a)}}return n(new dh[i](a),s)};return r},mh=t=>pE(new Map,t)(0),zn="",{toString:gE}={},{keys:xE}=Object,Mr=t=>{const e=typeof t;if(e!=="object"||!t)return[Yi,e];const n=gE.call(t).slice(8,-1);switch(n){case"Array":return[Wr,zn];case"Object":return[Ei,zn];case"Date":return[Tl,zn];case"RegExp":return[jl,zn];case"Map":return[Il,zn];case"Set":return[Al,zn];case"DataView":return[Wr,n]}return n.includes("Array")?[Wr,n]:n.includes("Error")?[xf,n]:[Ei,n]},Us=([t,e])=>t===Yi&&(e==="function"||e==="symbol"),yE=(t,e,n,r)=>{const s=(a,c)=>{const u=r.push(a)-1;return n.set(c,u),u},i=a=>{if(n.has(a))return n.get(a);let[c,u]=Mr(a);switch(c){case Yi:{let m=a;switch(u){case"bigint":c=yf,m=a.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+u);m=null;break;case"undefined":return s([gf],a)}return s([c,m],a)}case Wr:{if(u){let g=a;return u==="DataView"?g=new Uint8Array(a.buffer):u==="ArrayBuffer"&&(g=new Uint8Array(a)),s([u,[...g]],a)}const m=[],f=s([c,m],a);for(const g of a)m.push(i(g));return f}case Ei:{if(u)switch(u){case"BigInt":return s([u,a.toString()],a);case"Boolean":case"Number":case"String":return s([u,a.valueOf()],a)}if(e&&"toJSON"in a)return i(a.toJSON());const m=[],f=s([c,m],a);for(const g of xE(a))(t||!Us(Mr(a[g])))&&m.push([i(g),i(a[g])]);return f}case Tl:return s([c,a.toISOString()],a);case jl:{const{source:m,flags:f}=a;return s([c,{source:m,flags:f}],a)}case Il:{const m=[],f=s([c,m],a);for(const[g,x]of a)(t||!(Us(Mr(g))||Us(Mr(x))))&&m.push([i(g),i(x)]);return f}case Al:{const m=[],f=s([c,m],a);for(const g of a)(t||!Us(Mr(g)))&&m.push(i(g));return f}}const{message:h}=a;return s([c,{name:u,message:h}],a)};return i},fh=(t,{json:e,lossy:n}={})=>{const r=[];return yE(!(e||n),!!e,new Map,r)(t),r},Ni=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?mh(fh(t,e)):structuredClone(t):(t,e)=>mh(fh(t,e));function wE(t,e){const n=[{type:"text",value:"↩"}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function bE(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function vE(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||wE,r=t.options.footnoteBackLabel||bE,s=t.options.footnoteLabel||"Footnotes",i=t.options.footnoteLabelTagName||"h2",a=t.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let u=-1;for(;++u<t.footnoteOrder.length;){const h=t.footnoteById.get(t.footnoteOrder[u]);if(!h)continue;const m=t.all(h),f=String(h.identifier).toUpperCase(),g=fr(f.toLowerCase());let x=0;const _=[],k=t.footnoteCounts.get(f);for(;k!==void 0&&++x<=k;){_.length>0&&_.push({type:"text",value:" "});let V=typeof n=="string"?n:n(u,x);typeof V=="string"&&(V={type:"text",value:V}),_.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+g+(x>1?"-"+x:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,x),className:["data-footnote-backref"]},children:Array.isArray(V)?V:[V]})}const P=m[m.length-1];if(P&&P.type==="element"&&P.tagName==="p"){const V=P.children[P.children.length-1];V&&V.type==="text"?V.value+=" ":P.children.push({type:"text",value:" "}),P.children.push(..._)}else m.push(..._);const C={type:"element",tagName:"li",properties:{id:e+"fn-"+g},children:t.wrap(m,!0)};t.patch(h,C),c.push(C)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:i,properties:{...Ni(a),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(c,!0)},{type:"text",value:`
`}]}}const wf=function(t){if(t==null)return TE;if(typeof t=="function")return Xi(t);if(typeof t=="object")return Array.isArray(t)?_E(t):EE(t);if(typeof t=="string")return NE(t);throw new Error("Expected function, string, or object as test")};function _E(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=wf(t[n]);return Xi(r);function r(...s){let i=-1;for(;++i<e.length;)if(e[i].apply(this,s))return!0;return!1}}function EE(t){const e=t;return Xi(n);function n(r){const s=r;let i;for(i in t)if(s[i]!==e[i])return!1;return!0}}function NE(t){return Xi(e);function e(n){return n&&n.type===t}}function Xi(t){return e;function e(n,r,s){return!!(jE(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function TE(){return!0}function jE(t){return t!==null&&typeof t=="object"&&"type"in t}const bf=[],IE=!0,ph=!1,AE="skip";function kE(t,e,n,r){let s;typeof e=="function"&&typeof n!="function"?(r=n,n=e):s=e;const i=wf(s),a=r?-1:1;c(t,void 0,[])();function c(u,h,m){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const x=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(u.type+(x?"<"+x+">":""))+")"})}return g;function g(){let x=bf,_,k,P;if((!e||i(u,h,m[m.length-1]||void 0))&&(x=SE(n(u,m)),x[0]===ph))return x;if("children"in u&&u.children){const C=u;if(C.children&&x[0]!==AE)for(k=(r?C.children.length:-1)+a,P=m.concat(C);k>-1&&k<C.children.length;){const V=C.children[k];if(_=c(V,k,P)(),_[0]===ph)return _;k=typeof _[1]=="number"?_[1]:k+a}}return x}}}function SE(t){return Array.isArray(t)?t:typeof t=="number"?[IE,t]:t==null?bf:[t]}function vf(t,e,n,r){let s,i,a;typeof e=="function"&&typeof n!="function"?(i=void 0,a=e,s=n):(i=e,a=n,s=r),kE(t,i,c,s);function c(u,h){const m=h[h.length-1],f=m?m.children.indexOf(u):void 0;return a(u,f,m)}}const Na={}.hasOwnProperty,CE={};function PE(t,e){const n=e||CE,r=new Map,s=new Map,i=new Map,a={...fE,...n.handlers},c={all:h,applyData:DE,definitionById:r,footnoteById:s,footnoteCounts:i,footnoteOrder:[],handlers:a,one:u,options:n,patch:RE,wrap:OE};return vf(t,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const f=m.type==="definition"?r:s,g=String(m.identifier).toUpperCase();f.has(g)||f.set(g,m)}}),c;function u(m,f){const g=m.type,x=c.handlers[g];if(Na.call(c.handlers,g)&&x)return x(c,m,f);if(c.options.passThrough&&c.options.passThrough.includes(g)){if("children"in m){const{children:k,...P}=m,C=Ni(P);return C.children=c.all(m),C}return Ni(m)}return(c.options.unknownHandler||VE)(c,m,f)}function h(m){const f=[];if("children"in m){const g=m.children;let x=-1;for(;++x<g.length;){const _=c.one(g[x],m);if(_){if(x&&g[x-1].type==="break"&&(!Array.isArray(_)&&_.type==="text"&&(_.value=gh(_.value)),!Array.isArray(_)&&_.type==="element")){const k=_.children[0];k&&k.type==="text"&&(k.value=gh(k.value))}Array.isArray(_)?f.push(..._):f.push(_)}}}return f}}function RE(t,e){t.position&&(e.position=gb(t))}function DE(t,e){let n=e;if(t&&t.data){const r=t.data.hName,s=t.data.hChildren,i=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&i&&Object.assign(n.properties,Ni(i)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function VE(t,e){const n=e.data||{},r="value"in e&&!(Na.call(n,"hProperties")||Na.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function OE(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function gh(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function xh(t,e){const n=PE(t,e),r=n.one(t,void 0),s=vE(n),i=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&i.children.push({type:"text",value:`
`},s),i}function ME(t,e){return t&&"run"in t?async function(n,r){const s=xh(n,{file:r,...e});await t.run(s,r)}:function(n,r){return xh(n,{file:r,...t||e})}}function yh(t){if(t)throw t}var ni=Object.prototype.hasOwnProperty,_f=Object.prototype.toString,wh=Object.defineProperty,bh=Object.getOwnPropertyDescriptor,vh=function(e){return typeof Array.isArray=="function"?Array.isArray(e):_f.call(e)==="[object Array]"},_h=function(e){if(!e||_f.call(e)!=="[object Object]")return!1;var n=ni.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&ni.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var s;for(s in e);return typeof s>"u"||ni.call(e,s)},Eh=function(e,n){wh&&n.name==="__proto__"?wh(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},Nh=function(e,n){if(n==="__proto__")if(ni.call(e,n)){if(bh)return bh(e,n).value}else return;return e[n]},LE=function t(){var e,n,r,s,i,a,c=arguments[0],u=1,h=arguments.length,m=!1;for(typeof c=="boolean"&&(m=c,c=arguments[1]||{},u=2),(c==null||typeof c!="object"&&typeof c!="function")&&(c={});u<h;++u)if(e=arguments[u],e!=null)for(n in e)r=Nh(c,n),s=Nh(e,n),c!==s&&(m&&s&&(_h(s)||(i=vh(s)))?(i?(i=!1,a=r&&vh(r)?r:[]):a=r&&_h(r)?r:{},Eh(c,{name:n,newValue:t(m,a,s)})):typeof s<"u"&&Eh(c,{name:n,newValue:s}));return c};const Ro=as(LE);function Ta(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function FE(){const t=[],e={run:n,use:r};return e;function n(...s){let i=-1;const a=s.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);c(null,...s);function c(u,...h){const m=t[++i];let f=-1;if(u){a(u);return}for(;++f<s.length;)(h[f]===null||h[f]===void 0)&&(h[f]=s[f]);s=h,m?qE(m,c)(...h):a(null,...h)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function qE(t,e){let n;return r;function r(...a){const c=t.length>a.length;let u;c&&a.push(s);try{u=t.apply(this,a)}catch(h){const m=h;if(c&&n)throw m;return s(m)}c||(u&&u.then&&typeof u.then=="function"?u.then(i,s):u instanceof Error?s(u):i(u))}function s(a,...c){n||(n=!0,e(a,...c))}function i(a){s(null,a)}}const At={basename:zE,dirname:BE,extname:UE,join:$E,sep:"/"};function zE(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');xs(t);let n=0,r=-1,s=t.length,i;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(i){n=s+1;break}}else r<0&&(i=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let a=-1,c=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(i){n=s+1;break}}else a<0&&(i=!0,a=s+1),c>-1&&(t.codePointAt(s)===e.codePointAt(c--)?c<0&&(r=s):(c=-1,r=a));return n===r?r=a:r<0&&(r=t.length),t.slice(n,r)}function BE(t){if(xs(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function UE(t){xs(t);let e=t.length,n=-1,r=0,s=-1,i=0,a;for(;e--;){const c=t.codePointAt(e);if(c===47){if(a){r=e+1;break}continue}n<0&&(a=!0,n=e+1),c===46?s<0?s=e:i!==1&&(i=1):s>-1&&(i=-1)}return s<0||n<0||i===0||i===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function $E(...t){let e=-1,n;for(;++e<t.length;)xs(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":HE(n)}function HE(t){xs(t);const e=t.codePointAt(0)===47;let n=GE(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function GE(t,e){let n="",r=0,s=-1,i=0,a=-1,c,u;for(;++a<=t.length;){if(a<t.length)c=t.codePointAt(a);else{if(c===47)break;c=47}if(c===47){if(!(s===a-1||i===1))if(s!==a-1&&i===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),s=a,i=0;continue}}else if(n.length>0){n="",r=0,s=a,i=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,a):n=t.slice(s+1,a),r=a-s-1;s=a,i=0}else c===46&&i>-1?i++:i=-1}return n}function xs(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const QE={cwd:KE};function KE(){return"/"}function ja(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function WE(t){if(typeof t=="string")t=new URL(t);else if(!ja(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return YE(t)}function YE(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const Do=["history","path","basename","stem","extname","dirname"];class Ef{constructor(e){let n;e?ja(e)?n={path:e}:typeof e=="string"||XE(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":QE.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Do.length;){const i=Do[r];i in n&&n[i]!==void 0&&n[i]!==null&&(this[i]=i==="history"?[...n[i]]:n[i])}let s;for(s in n)Do.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?At.basename(this.path):void 0}set basename(e){Oo(e,"basename"),Vo(e,"basename"),this.path=At.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?At.dirname(this.path):void 0}set dirname(e){Th(this.basename,"dirname"),this.path=At.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?At.extname(this.path):void 0}set extname(e){if(Vo(e,"extname"),Th(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=At.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){ja(e)&&(e=WE(e)),Oo(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?At.basename(this.path,this.extname):void 0}set stem(e){Oo(e,"stem"),Vo(e,"stem"),this.path=At.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new Ye(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Vo(t,e){if(t&&t.includes(At.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+At.sep+"`")}function Oo(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function Th(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function XE(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const JE=function(t){const r=this.constructor.prototype,s=r[t],i=function(){return s.apply(i,arguments)};return Object.setPrototypeOf(i,r),i},ZE={}.hasOwnProperty;class kl extends JE{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=FE()}copy(){const e=new kl;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(Ro(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Fo("data",this.frozen),this.namespace[e]=n,this):ZE.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Fo("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(e,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=$s(e),r=this.parser||this.Parser;return Mo("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),Mo("process",this.parser||this.Parser),Lo("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(i,a){const c=$s(e),u=r.parse(c);r.run(u,c,function(m,f,g){if(m||!f||!g)return h(m);const x=f,_=r.stringify(x,g);nN(_)?g.value=_:g.result=_,h(m,g)});function h(m,f){m||!f?a(m):i?i(f):n(void 0,f)}}}processSync(e){let n=!1,r;return this.freeze(),Mo("processSync",this.parser||this.Parser),Lo("processSync",this.compiler||this.Compiler),this.process(e,s),Ih("processSync","process",n),r;function s(i,a){n=!0,yh(i),r=a}}run(e,n,r){jh(e),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?i(void 0,r):new Promise(i);function i(a,c){const u=$s(n);s.run(e,u,h);function h(m,f,g){const x=f||e;m?c(m):a?a(x):r(void 0,x,g)}}}runSync(e,n){let r=!1,s;return this.run(e,n,i),Ih("runSync","run",r),s;function i(a,c){yh(a),s=c,r=!0}}stringify(e,n){this.freeze();const r=$s(n),s=this.compiler||this.Compiler;return Lo("stringify",s),jh(e),s(e,r)}use(e,...n){const r=this.attachers,s=this.namespace;if(Fo("use",this.frozen),e!=null)if(typeof e=="function")u(e,n);else if(typeof e=="object")Array.isArray(e)?c(e):a(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function i(h){if(typeof h=="function")u(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[m,...f]=h;u(m,f)}else a(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function a(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(h.plugins),h.settings&&(s.settings=Ro(!0,s.settings,h.settings))}function c(h){let m=-1;if(h!=null)if(Array.isArray(h))for(;++m<h.length;){const f=h[m];i(f)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function u(h,m){let f=-1,g=-1;for(;++f<r.length;)if(r[f][0]===h){g=f;break}if(g===-1)r.push([h,...m]);else if(m.length>0){let[x,..._]=m;const k=r[g][1];Ta(k)&&Ta(x)&&(x=Ro(!0,k,x)),r[g]=[h,x,..._]}}}}const eN=new kl().freeze();function Mo(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Lo(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Fo(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function jh(t){if(!Ta(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function Ih(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function $s(t){return tN(t)?t:new Ef(t)}function tN(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function nN(t){return typeof t=="string"||rN(t)}function rN(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const sN="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Ah=[],kh={allowDangerousHtml:!0},iN=/^(https?|ircs?|mailto|xmpp)$/i,oN=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function aN(t){const e=lN(t),n=cN(t);return uN(e.runSync(e.parse(n),n),t)}function lN(t){const e=t.rehypePlugins||Ah,n=t.remarkPlugins||Ah,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...kh}:kh;return eN().use(B_).use(n).use(ME,r).use(e)}function cN(t){const e=t.children||"",n=new Ef;return typeof e=="string"&&(n.value=e),n}function uN(t,e){const n=e.allowedElements,r=e.allowElement,s=e.components,i=e.disallowedElements,a=e.skipHtml,c=e.unwrapDisallowed,u=e.urlTransform||hN;for(const m of oN)Object.hasOwn(e,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+sN+m.id,void 0);return vf(t,h),vb(t,{Fragment:o.Fragment,components:s,ignoreInvalidStyle:!0,jsx:o.jsx,jsxs:o.jsxs,passKeys:!0,passNode:!0});function h(m,f,g){if(m.type==="raw"&&g&&typeof f=="number")return a?g.children.splice(f,1):g.children[f]={type:"text",value:m.value},f;if(m.type==="element"){let x;for(x in So)if(Object.hasOwn(So,x)&&Object.hasOwn(m.properties,x)){const _=m.properties[x],k=So[x];(k===null||k.includes(m.tagName))&&(m.properties[x]=u(String(_||""),x,m))}}if(m.type==="element"){let x=n?!n.includes(m.tagName):i?i.includes(m.tagName):!1;if(!x&&r&&typeof f=="number"&&(x=!r(m,f,g)),x&&g&&typeof f=="number")return c&&m.children?g.children.splice(f,1,...m.children):g.children.splice(f,1),f}}}function hN(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),s=t.indexOf("/");return e===-1||s!==-1&&e>s||n!==-1&&e>n||r!==-1&&e>r||iN.test(t.slice(0,e))?t:""}const dN=()=>{const{id:t}=Ch();pn();const[e,n]=U.useState(null),[r,s]=U.useState(!0),[i,a]=U.useState(null),[c,u]=U.useState({name:"",email:"",content:""}),[h,m]=U.useState(!1),[f,g]=U.useState(!1);U.useEffect(()=>{(async()=>{if(!t){a("記事IDが指定されていません。"),s(!1);return}try{s(!0);const M=await pa(t);M?n(M):a("記事が見つかりませんでした。")}catch(M){console.error("記事の読み込み中にエラーが発生しました:",M),a("記事の読み込み中にエラーが発生しました。")}finally{s(!1)}})()},[t]);const x=V=>{const{name:M,value:$}=V.target;u(ee=>({...ee,[M]:$}))},_=async V=>{if(V.preventDefault(),!(!e||!e.id)){m(!0);try{if(await dw(e.id,c.name,c.email,c.content)){u({name:"",email:"",content:""}),g(!0),setTimeout(()=>{g(!1)},5e3);const $=await pa(e.id);$&&n($)}}catch(M){console.error("Erreur lors de l'ajout du commentaire:",M)}finally{m(!1)}}},k=V=>new Date(V).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}),P=e?{"@context":"https://schema.org","@type":"BlogPosting",headline:e.title,description:e.content.substring(0,150)+"...",image:e.imageUrl,datePublished:e.date,author:{"@type":"Person",name:e.author},publisher:{"@type":"Organization",name:"Softis ピラティススタジオ",logo:{"@type":"ImageObject",url:"https://softis.jp/logo.png"}},keywords:e.tags.join(", "),comment:e.comments.filter(V=>V.status==="approved").map(V=>({"@type":"Comment",author:{"@type":"Person",name:V.author},datePublished:V.date,text:V.content}))}:{};if(r)return o.jsx(_e,{className:"py-20",children:o.jsx(ie,{children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-700 mx-auto"}),o.jsx("p",{className:"mt-4 text-gray-600",children:"読み込み中..."})]})})});if(i||!e)return o.jsx(_e,{className:"py-20",children:o.jsx(ie,{children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"エラー"}),o.jsx("p",{className:"text-gray-700 mb-6",children:i||"記事が見つかりませんでした。"}),o.jsxs(we,{to:"/blog",className:"inline-flex items-center px-4 py-2 bg-purple-600 rounded-lg text-white hover:bg-purple-700 transition-colors",children:[o.jsx(Yr,{className:"h-4 w-4 mr-2"}),"ブログトップに戻る"]})]})})});const C=e.comments.filter(V=>V.status==="approved");return o.jsxs(o.Fragment,{children:[o.jsx(gn,{title:`${e.title} - ピラティススタジオSoftis`,description:e.content.substring(0,160),keywords:`${e.tags.join(", ")}, ピラティス, ブログ, Softis`,structuredData:P}),o.jsxs("div",{className:"relative pt-32 pb-16 text-white",children:[o.jsx("div",{className:"absolute inset-0 z-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:e.imageUrl?`url(${e.imageUrl})`:"none",backgroundColor:e.imageUrl?void 0:"rgba(147, 51, 234, 0.9)"},children:o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-purple-900/70 to-purple-900/90"})}),o.jsxs(ie,{className:"relative z-10",children:[o.jsxs(we,{to:"/blog",className:"inline-flex items-center text-purple-200 hover:text-white mb-6 transition-colors",children:[o.jsx(Yr,{className:"h-4 w-4 mr-1"}),"ブログトップに戻る"]}),o.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7},children:[o.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:e.tags.map(V=>o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-200 text-purple-800",children:[o.jsx(or,{className:"w-3 h-3 mr-1"}),V]},V))}),o.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-serif font-bold text-white mb-4",children:e.title}),o.jsxs("div",{className:"flex items-center text-purple-100 text-sm mt-4",children:[o.jsxs("div",{className:"flex items-center mr-4",children:[o.jsx(oi,{className:"h-4 w-4 mr-1"}),o.jsx("span",{children:e.author})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(Ti,{className:"h-4 w-4 mr-1"}),o.jsx("time",{dateTime:e.date,children:k(e.date)})]}),o.jsxs("div",{className:"flex items-center ml-4",children:[o.jsx(Ut,{className:"h-4 w-4 mr-1"}),o.jsxs("span",{children:[C.length," コメント"]})]})]})]})]})]}),o.jsx(_e,{className:"bg-white",children:o.jsx(ie,{children:o.jsxs("div",{className:"max-w-3xl mx-auto",children:[o.jsx(Q.div,{className:"prose prose-lg prose-purple mx-auto mb-16",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.3},children:o.jsx(aN,{children:e.content})}),o.jsxs(Q.div,{className:"border-t border-gray-200 pt-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},children:[o.jsxs("h3",{className:"text-2xl font-serif font-bold text-gray-800 mb-8",children:["コメント (",C.length,")"]}),C.length>0?o.jsx("div",{className:"space-y-8 mb-12",children:C.map((V,M)=>o.jsxs("div",{className:"bg-purple-50 rounded-lg p-6",children:[o.jsx("div",{className:"flex justify-between items-start mb-2",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-200 flex items-center justify-center",children:o.jsx(oi,{className:"h-5 w-5 text-purple-700"})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("p",{className:"font-medium text-gray-900",children:V.author}),o.jsx("p",{className:"text-xs text-gray-500",children:k(V.date)})]})]})}),o.jsx("div",{className:"mt-2 text-gray-800",children:V.content})]},V.id))}):o.jsxs("div",{className:"text-center bg-gray-50 p-8 rounded-lg mb-12",children:[o.jsx(Ut,{className:"h-10 w-10 text-gray-400 mx-auto mb-2"}),o.jsx("p",{children:"まだコメントがありません。最初のコメントを残しましょう！"})]}),o.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[o.jsx("h4",{className:"text-xl font-bold text-gray-800 mb-4",children:"コメントを残す"}),f?o.jsx("div",{className:"bg-green-100 text-green-700 p-4 rounded-lg mb-6",children:"コメントありがとうございます！管理者の承認後に表示されます。"}):o.jsxs("form",{onSubmit:_,className:"space-y-5",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["お名前 ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"name",name:"name",value:c.name,onChange:x,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-300",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:["メールアドレス ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"email",id:"email",name:"email",value:c.email,onChange:x,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-300",required:!0})]})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-1",children:["コメント ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("textarea",{id:"content",name:"content",rows:4,value:c.content,onChange:x,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-300",required:!0})]}),o.jsx("div",{className:"text-right",children:o.jsxs(Pe,{type:"submit",variant:"primary",disabled:h,children:[h?"送信中...":"コメントを投稿",!h&&o.jsx(ka,{className:"ml-2 h-4 w-4"})]})})]})]})]})]})})})]})},mN=()=>{const t=pn(),[e,n]=U.useState({title:"",content:"",author:"",email:"",imageUrl:"",tags:["ピラティス"]}),[r,s]=U.useState(""),[i,a]=U.useState(!1),[c,u]=U.useState(null),h=_=>{const{name:k,value:P}=_.target;n(C=>({...C,[k]:P}))},m=()=>{r.trim()&&!e.tags.includes(r.trim())&&(n(_=>({..._,tags:[..._.tags,r.trim()]})),s(""))},f=_=>{n(k=>({...k,tags:k.tags.filter(P=>P!==_)}))},g=async _=>{_.preventDefault(),a(!0),u(null);try{const k=await cw(e.title,e.content,e.author,e.email,e.tags,e.imageUrl||void 0);k?t(`/blog/${k.id}`):(u("記事の作成中にエラーが発生しました。もう一度お試しください。"),a(!1))}catch(k){console.error("Erreur lors de la création de l'article:",k),u("記事の作成中にエラーが発生しました。後でもう一度お試しください。"),a(!1)}},x=()=>e.content?e.content.replace(/#{1,6} (.+)$/gm,"<strong>$1</strong>").split(`

`).map((k,P)=>o.jsx("p",{className:"mb-4",children:k},P)):o.jsx("p",{className:"text-gray-400",children:"プレビューはここに表示されます..."});return o.jsxs(o.Fragment,{children:[o.jsx(gn,{title:"新しい記事を書く - ピラティススタジオSoftis",description:"ピラティス、姿勢改善、健康に関する新しい記事を投稿します。",keywords:"ピラティス, ブログ投稿, 記事作成, Softis"}),o.jsxs("div",{className:"relative pt-32 pb-16 text-white",children:[o.jsx("div",{className:"absolute inset-0 z-0 overflow-hidden bg-gradient-to-r from-pink-600 to-purple-700",children:o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute transform rotate-45 -translate-x-1/4 -translate-y-1/4 -left-1/4 -top-1/4 w-1/2 h-1/2 bg-white/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute transform -rotate-12 translate-x-1/4 translate-y-1/4 right-1/4 bottom-1/4 w-1/2 h-1/2 bg-white/20 rounded-full blur-3xl"})]})}),o.jsxs(ie,{className:"relative z-10",children:[o.jsxs(we,{to:"/blog",className:"inline-flex items-center text-purple-200 hover:text-white mb-6 transition-colors",children:[o.jsx(Yr,{className:"h-4 w-4 mr-1"}),"ブログトップに戻る"]}),o.jsxs(Q.div,{className:"text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7},children:[o.jsx("h1",{className:"text-4xl md:text-5xl font-serif font-bold text-white mb-4",children:"新しい記事を書く"}),o.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-pink-300 to-purple-300 rounded-full mx-auto mb-4"}),o.jsx("p",{className:"text-white text-xl max-w-3xl mx-auto",children:"ピラティスや健康に関する知識を共有しましょう"})]})]})]}),o.jsx(_e,{className:"bg-gray-50",children:o.jsx(ie,{children:o.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-xl shadow-md overflow-hidden",children:[c&&o.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg m-6",children:c}),o.jsxs("form",{onSubmit:g,className:"p-8",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:["タイトル ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"title",name:"title",value:e.title,onChange:h,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-300 text-lg",placeholder:"魅力的なタイトルを入力してください",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"author",className:"block text-sm font-medium text-gray-700 mb-1",children:["著者名 ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"author",name:"author",value:e.author,onChange:h,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-300",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:["メールアドレス ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:h,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-300",required:!0})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{htmlFor:"imageUrl",className:"block text-sm font-medium text-gray-700 mb-1",children:"画像URL (オプション)"}),o.jsx("input",{type:"url",id:"imageUrl",name:"imageUrl",value:e.imageUrl,onChange:h,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-300",placeholder:"https://example.com/image.jpg"})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["タグ ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[e.tags.map(_=>o.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-purple-100 text-purple-800",children:[o.jsx(or,{className:"h-3 w-3 mr-1"}),_,o.jsx("button",{type:"button",onClick:()=>f(_),className:"ml-1 text-purple-600 hover:text-purple-800",children:o.jsx(Ca,{className:"h-3 w-3"})})]},_)),o.jsxs("div",{className:"inline-flex",children:[o.jsx("input",{type:"text",value:r,onChange:_=>s(_.target.value),className:"px-3 py-1 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-1 focus:ring-purple-300 w-32",placeholder:"新しいタグ",onKeyPress:_=>_.key==="Enter"&&(_.preventDefault(),m())}),o.jsx("button",{type:"button",onClick:m,className:"px-3 py-1 bg-purple-600 text-white rounded-r-lg hover:bg-purple-700",children:o.jsx(Uh,{className:"h-4 w-4"})})]})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-1",children:["内容 ",o.jsx("span",{className:"text-red-500",children:"*"}),o.jsx("span",{className:"text-xs ml-2 text-gray-500",children:"Markdown形式に対応しています"})]}),o.jsx("textarea",{id:"content",name:"content",value:e.content,onChange:h,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-300 font-mono",rows:10,placeholder:"# 見出し\\n\\n段落テキスト\\n\\n## 小見出し\\n\\n- リストアイテム\\n- リストアイテム",required:!0})]}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"プレビュー"}),o.jsx("div",{className:"p-4 border border-gray-300 rounded-lg bg-gray-50 min-h-[100px] prose max-w-none",children:x()})]}),o.jsxs("div",{className:"flex justify-end space-x-4",children:[o.jsx(we,{to:"/blog",className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"キャンセル"}),o.jsxs(Pe,{type:"submit",variant:"primary",disabled:i,children:[i?"保存中...":"記事を公開する",!i&&o.jsx(Aa,{className:"ml-2 h-4 w-4"})]})]})]})]})})})]})},fN=()=>{const t=pn(),{id:e}=Ch(),[n,r]=U.useState({id:"",title:"",content:"",author:"",email:"",imageUrl:null,tags:[],date:"",comments:[],status:"published"}),[s,i]=U.useState(""),[a,c]=U.useState(!1),[u,h]=U.useState(!0),[m,f]=U.useState(null);U.useEffect(()=>{if(!e){f("ID de l'article manquant"),h(!1);return}(async()=>{try{const V=await pa(e);V?r(V):(f("Article non trouvé"),t("/admin/blog"))}catch(V){console.error("Erreur lors du chargement de l'article:",V),f("Impossible de charger l'article. Veuillez réessayer.")}finally{h(!1)}})()},[e,t]);const g=C=>{const{name:V,value:M}=C.target;r($=>({...$,[V]:M}))},x=()=>{s.trim()&&!n.tags.includes(s.trim())&&(r(C=>({...C,tags:[...C.tags,s.trim()]})),i(""))},_=C=>{r(V=>({...V,tags:V.tags.filter(M=>M!==C)}))},k=async C=>{C.preventDefault(),c(!0),f(null);try{const V=await uw(n);V?t(`/blog/${V.id}`):(f("エラーが発生しました。もう一度お試しください。"),c(!1))}catch(V){console.error("Erreur lors de la mise à jour de l'article:",V),f("エラーが発生しました。後でもう一度お試しください。"),c(!1)}};if(u)return o.jsx(_e,{className:"pt-32",children:o.jsx(ie,{children:o.jsxs("div",{className:"flex justify-center items-center py-16",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),o.jsx("p",{className:"ml-3 text-gray-600",children:"記事を読み込んでいます..."})]})})});const P=()=>n.content?n.content.replace(/#{1,6} (.+)$/gm,"<strong>$1</strong>").split(`

`).map((V,M)=>o.jsx("p",{className:"mb-4",children:V},M)):o.jsx("p",{className:"text-gray-400",children:"プレビューはここに表示されます..."});return o.jsxs(o.Fragment,{children:[o.jsx(gn,{title:"記事を編集 - ピラティススタジオSoftis",description:"ピラティス、姿勢改善、健康に関する記事を編集します。",keywords:"ピラティス, ブログ編集, 記事更新, Softis"}),o.jsxs("div",{className:"relative pt-32 pb-16 text-white",children:[o.jsx("div",{className:"absolute inset-0 z-0 overflow-hidden bg-gradient-to-r from-pink-600 to-purple-700",children:o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute transform rotate-45 -translate-x-1/4 -translate-y-1/4 -left-1/4 -top-1/4 w-1/2 h-1/2 bg-white/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute transform -rotate-12 translate-x-1/4 translate-y-1/4 right-1/4 bottom-1/4 w-1/2 h-1/2 bg-white/20 rounded-full blur-3xl"})]})}),o.jsxs(ie,{className:"relative z-10",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs(we,{to:"/admin/blog",className:"inline-flex items-center text-purple-200 hover:text-white transition-colors",children:[o.jsx(Yr,{className:"h-4 w-4 mr-1"}),"ブログ管理に戻る"]}),o.jsx(we,{to:`/blog/${e}`,className:"inline-flex items-center text-purple-200 hover:text-white transition-colors",target:"_blank",rel:"noopener noreferrer",children:"記事を表示"})]}),o.jsxs(Q.div,{className:"text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7},children:[o.jsx("h1",{className:"text-4xl md:text-5xl font-serif font-bold text-white mb-4",children:"記事を編集"}),o.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-pink-300 to-purple-300 rounded-full mx-auto mb-4"}),o.jsx("p",{className:"text-white text-xl max-w-3xl mx-auto",children:"ピラティスや健康に関する情報を更新しましょう"})]})]})]}),o.jsx(_e,{className:"bg-gray-50",children:o.jsx(ie,{children:o.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-xl shadow-md overflow-hidden",children:[m&&o.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg m-6",children:m}),o.jsxs("form",{onSubmit:k,className:"p-8",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:["タイトル ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"title",name:"title",value:n.title,onChange:g,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-300 text-lg",placeholder:"魅力的なタイトルを入力してください",required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"author",className:"block text-sm font-medium text-gray-700 mb-1",children:["著者名 ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",id:"author",name:"author",value:n.author,onChange:g,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-300",required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:["メールアドレス ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:g,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-300",required:!0})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{htmlFor:"imageUrl",className:"block text-sm font-medium text-gray-700 mb-1",children:"画像URL (オプション)"}),o.jsx("input",{type:"url",id:"imageUrl",name:"imageUrl",value:n.imageUrl||"",onChange:g,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-300",placeholder:"https://example.com/image.jpg"})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["タグ ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[n.tags.map(C=>o.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-purple-100 text-purple-800",children:[o.jsx(or,{className:"h-3 w-3 mr-1"}),C,o.jsx("button",{type:"button",onClick:()=>_(C),className:"ml-1 text-purple-600 hover:text-purple-800",children:o.jsx(Ca,{className:"h-3 w-3"})})]},C)),o.jsxs("div",{className:"inline-flex",children:[o.jsx("input",{type:"text",value:s,onChange:C=>i(C.target.value),className:"px-3 py-1 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-1 focus:ring-purple-300 w-32",placeholder:"新しいタグ",onKeyPress:C=>C.key==="Enter"&&(C.preventDefault(),x())}),o.jsx("button",{type:"button",onClick:x,className:"px-3 py-1 bg-purple-600 text-white rounded-r-lg hover:bg-purple-700",children:o.jsx(Uh,{className:"h-4 w-4"})})]})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"状態"}),o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("label",{className:"inline-flex items-center",children:[o.jsx("input",{type:"radio",name:"status",value:"published",checked:n.status==="published",onChange:()=>r(C=>({...C,status:"published"})),className:"h-4 w-4 text-purple-600 focus:ring-purple-500"}),o.jsx("span",{className:"ml-2 text-gray-700",children:"公開"})]}),o.jsxs("label",{className:"inline-flex items-center",children:[o.jsx("input",{type:"radio",name:"status",value:"draft",checked:n.status==="draft",onChange:()=>r(C=>({...C,status:"draft"})),className:"h-4 w-4 text-purple-600 focus:ring-purple-500"}),o.jsx("span",{className:"ml-2 text-gray-700",children:"下書き"})]})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-1",children:["内容 ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("textarea",{id:"content",name:"content",value:n.content,onChange:g,rows:12,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-300 font-mono text-sm",placeholder:"記事の内容をここに入力してください...",required:!0}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Markdownが使用できます。"})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[o.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"プレビュー"}),o.jsx("div",{className:"prose prose-sm max-w-none",children:P()})]})]})]}),n.comments.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"コメント"}),o.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:o.jsxs("div",{className:"text-sm text-gray-700",children:["この記事には ",n.comments.length," 件のコメントがあります。"]})})]}),o.jsxs("div",{className:"flex justify-end gap-4",children:[o.jsx(Pe,{type:"button",variant:"outline",onClick:()=>t("/admin/blog"),children:"キャンセル"}),o.jsx(Pe,{type:"submit",variant:"primary",disabled:a,children:a?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"処理中..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Aa,{className:"h-4 w-4 mr-2"}),"更新する"]})})]})]})]})})})]})},pN=()=>{const t=pn(),[e,n]=U.useState([]),[r,s]=U.useState(null),[i,a]=U.useState([]),[c,u]=U.useState("all"),[h,m]=U.useState("list"),[f,g]=U.useState(!1);U.useEffect(()=>{if(!Qi()){t("/admin-login");return}x()},[t]);const x=async()=>{try{g(!0);const y=await fa();n(y);const b=[];y.forEach(v=>{v.comments.filter(N=>N.status==="pending").forEach(N=>{b.push({postId:v.id,comment:N})})}),a(b)}catch(y){console.error("Erreur lors du chargement des articles:",y)}finally{g(!1)}},_=()=>{fl(),t("/admin-login")},k=async y=>{if(window.confirm("Cette article sera supprimé définitivement. Continuer ?"))try{g(!0),await hw(y)?(await x(),(r==null?void 0:r.id)===y&&s(null)):alert("Erreur lors de la suppression de l'article")}catch(b){console.error("Erreur lors de la suppression:",b),alert("Erreur lors de la suppression de l'article")}finally{g(!1)}},P=y=>{s(y)},C=async(y,b)=>{try{g(!0),await mw(y,b)?await x():alert("Erreur lors de l'approbation du commentaire")}catch(v){console.error("Erreur lors de l'approbation du commentaire:",v),alert("Erreur lors de l'approbation du commentaire")}finally{g(!1)}},V=async(y,b)=>{if(window.confirm("Ce commentaire sera supprimé définitivement. Continuer ?"))try{g(!0),await fw(y,b)?await x():alert("Erreur lors de la suppression du commentaire")}catch(v){console.error("Erreur lors de la suppression du commentaire:",v),alert("Erreur lors de la suppression du commentaire")}finally{g(!1)}},M=async()=>{try{g(!0);const y=await fa(),b=JSON.stringify(y,null,2),v=new Blob([b],{type:"application/json"}),N=URL.createObjectURL(v),T=document.createElement("a");T.href=N,T.download=`softis-blog-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(N)}catch(y){console.error("Erreur lors de l'exportation:",y),alert("Erreur lors de l'exportation des données")}finally{g(!1)}},$=y=>{var N;const b=(N=y.target.files)==null?void 0:N[0];if(!b)return;const v=new FileReader;v.onload=T=>{var re;const E=(re=T.target)==null?void 0:re.result;importBlogData(E)?(alert("ブログのデータが正常にインポートされました。"),x()):alert("ブログのデータのインポート中にエラーが発生しました。")},v.readAsText(b)},ee=e.filter(y=>c==="all"?!0:y.status===c),O=y=>new Date(y).toLocaleString("ja-JP"),I=(y,b)=>y.length<=b?y:y.substring(0,b)+"...";return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative pt-32 pb-16 text-white",children:[o.jsx("div",{className:"absolute inset-0 z-0 overflow-hidden bg-gradient-to-r from-purple-700 to-indigo-500",children:o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute transform rotate-45 -translate-x-1/4 -translate-y-1/4 -left-1/4 -top-1/4 w-1/2 h-1/2 bg-white/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute transform -rotate-12 translate-x-1/4 translate-y-1/4 right-1/4 bottom-1/4 w-1/2 h-1/2 bg-white/20 rounded-full blur-3xl"})]})}),o.jsxs(ie,{className:"relative z-10",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx(Q.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-4xl font-serif font-bold",children:"ブログ管理"}),o.jsxs(Pe,{variant:"outline",size:"sm",onClick:_,className:"bg-white/10 backdrop-blur-sm hover:bg-white/20",children:["ログアウト ",o.jsx(ji,{className:"ml-2 h-4 w-4"})]})]}),o.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"mt-4 flex gap-4",children:[o.jsxs("div",{className:"bg-white/10 rounded-lg px-4 py-3 backdrop-blur-sm",children:[o.jsx("div",{className:"text-xl font-bold",children:e.filter(y=>y.status==="draft").length}),o.jsx("div",{className:"text-xs opacity-70",children:"下書き"})]}),o.jsxs("div",{className:"bg-white/10 rounded-lg px-4 py-3 backdrop-blur-sm",children:[o.jsx("div",{className:"text-xl font-bold",children:e.filter(y=>y.status==="published").length}),o.jsx("div",{className:"text-xs opacity-70",children:"公開済み"})]}),o.jsxs("div",{className:"bg-white/10 rounded-lg px-4 py-3 backdrop-blur-sm",children:[o.jsx("div",{className:"text-xl font-bold",children:i.length}),o.jsx("div",{className:"text-xs opacity-70",children:"承認待ちコメント"})]})]})]})]}),o.jsx(_e,{children:o.jsxs(ie,{children:[o.jsx(qm,{onLogout:_}),o.jsxs("div",{className:"mb-6 flex flex-wrap justify-between items-center",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"記事一覧"}),o.jsx(we,{to:"/blog/new",className:"ml-4 px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700",children:"新規作成"})]}),o.jsxs("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:[o.jsxs("div",{className:"flex items-center space-x-2 p-2 border border-gray-300 rounded-lg bg-white",children:[o.jsx("button",{className:`p-1 rounded ${c==="all"?"bg-purple-100 text-purple-600":"text-gray-500"}`,onClick:()=>u("all"),children:o.jsx(Mp,{className:"h-4 w-4"})}),o.jsx("button",{className:`p-1 rounded ${c==="published"?"bg-purple-100 text-purple-600":"text-gray-500"}`,onClick:()=>u("published"),children:"公開"}),o.jsx("button",{className:`p-1 rounded ${c==="draft"?"bg-purple-100 text-purple-600":"text-gray-500"}`,onClick:()=>u("draft"),children:"下書き"})]}),o.jsxs("div",{className:"flex items-center space-x-2 p-2 border border-gray-300 rounded-lg bg-white",children:[o.jsx("button",{className:`p-1 rounded ${h==="list"?"bg-purple-100 text-purple-600":"text-gray-500"}`,onClick:()=>m("list"),children:o.jsx(zp,{className:"h-4 w-4"})}),o.jsx("button",{className:`p-1 rounded ${h==="grid"?"bg-purple-100 text-purple-600":"text-gray-500"}`,onClick:()=>m("grid"),children:o.jsx(Fp,{className:"h-4 w-4"})})]})]})]}),ee.length>0?h==="list"?o.jsx("div",{className:"bg-white rounded-xl shadow overflow-hidden",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"タイトル"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"著者"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"日付"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ステータス"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"コメント"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"アクション"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200",children:ee.map(y=>o.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>P(y),children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm font-medium text-gray-900 truncate max-w-xs",children:y.title})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:y.author})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:O(y.date)})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${y.status==="published"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:y.status==="published"?"公開":"下書き"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"text-sm text-gray-500",children:[y.comments.length,o.jsxs("span",{className:"ml-1 text-xs",children:["(",y.comments.filter(b=>b.status==="pending").length," 未承認)"]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[o.jsx(we,{to:`/blog/${y.id}/edit`,className:"text-indigo-600 hover:text-indigo-900",onClick:b=>b.stopPropagation(),children:o.jsx(Ho,{className:"h-4 w-4"})}),o.jsx("button",{onClick:b=>{b.stopPropagation(),k(y.id)},className:"text-red-600 hover:text-red-900",children:o.jsx(Ks,{className:"h-4 w-4"})})]})})]},y.id))})]})}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ee.map(y=>o.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden cursor-pointer hover:shadow-md transition-shadow",onClick:()=>P(y),children:[y.imageUrl&&o.jsx("div",{className:"h-40 relative overflow-hidden",children:o.jsx("img",{src:y.imageUrl,alt:y.title,className:"w-full h-full object-cover absolute top-0 left-0"})}),o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 truncate",children:y.title}),o.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${y.status==="published"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:y.status==="published"?"公開":"下書き"})]}),o.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-2",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Calendar,{className:"h-3 w-3 mr-1"}),new Date(y.date).toLocaleDateString("ja-JP")]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(Ut,{className:"h-3 w-3 mr-1"}),y.comments.length]})]}),o.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[y.tags.slice(0,3).map(b=>o.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs bg-purple-100 text-purple-800",children:[o.jsx(or,{className:"h-2 w-2 mr-1"}),b]},b)),y.tags.length>3&&o.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs bg-gray-100 text-gray-800",children:["+",y.tags.length-3]})]}),o.jsxs("div",{className:"flex justify-between items-center mt-4",children:[o.jsx("span",{className:"text-xs text-gray-500",children:y.author}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(we,{to:`/blog/${y.id}/edit`,className:"p-1 text-indigo-600 hover:text-indigo-900",onClick:b=>b.stopPropagation(),children:o.jsx(Ho,{className:"h-4 w-4"})}),o.jsx("button",{onClick:b=>{b.stopPropagation(),k(y.id)},className:"p-1 text-red-600 hover:text-red-900",children:o.jsx(Ks,{className:"h-4 w-4"})})]})]})]})]},y.id))}):o.jsx("div",{className:"bg-white rounded-xl shadow p-6 text-center",children:o.jsx("p",{className:"text-gray-500",children:"記事がありません。新しい記事を作成してください。"})}),o.jsxs("div",{className:"mt-12",children:[o.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:["承認待ちコメント (",i.length,")"]}),i.length>0?o.jsx("div",{className:"bg-white rounded-xl shadow overflow-hidden",children:o.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"投稿者"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"記事"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"コメント"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"日付"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"アクション"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map(({postId:y,comment:b})=>{const v=e.find(N=>N.id===y);return o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0 h-8 w-8 bg-gray-100 rounded-full flex items-center justify-center",children:o.jsx(oi,{className:"h-4 w-4 text-gray-500"})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.author}),o.jsx("div",{className:"text-xs text-gray-500",children:b.email})]})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm text-gray-900 truncate max-w-xs",children:(v==null?void 0:v.title)||"不明な記事"})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm text-gray-500",children:I(b.content,100)})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-500",children:O(b.date)})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[o.jsx("button",{onClick:()=>C(y,b.id),className:"text-green-600 hover:text-green-900",children:o.jsx(si,{className:"h-4 w-4"})}),o.jsx("button",{onClick:()=>V(y,b.id),className:"text-red-600 hover:text-red-900",children:o.jsx(Ks,{className:"h-4 w-4"})})]})})]},b.id)})})]})})}):o.jsx("div",{className:"bg-white rounded-xl shadow p-6 text-center",children:o.jsx("p",{className:"text-gray-500",children:"承認待ちのコメントはありません。"})})]}),o.jsxs("div",{className:"mt-12 bg-white rounded-xl shadow p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"データ管理"}),o.jsxs("div",{className:"flex flex-wrap gap-4",children:[o.jsxs("button",{className:"flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",onClick:M,children:[o.jsx(zh,{className:"h-4 w-4 mr-2"})," ブログをエクスポート"]}),o.jsxs("label",{className:"flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 cursor-pointer",children:[o.jsx(Sa,{className:"h-4 w-4 mr-2"})," ブログをインポート",o.jsx("input",{type:"file",accept:".json",onChange:$,className:"hidden"})]})]})]})]})})]})},gN=async()=>{const t={success:!1,questionsCount:0,blogPostsCount:0,errors:[]};try{const e=await xN();t.questionsCount=e.count,e.errors.length>0&&(t.errors=[...t.errors,...e.errors]);const n=await yN();return t.blogPostsCount=n.count,n.errors.length>0&&(t.errors=[...t.errors,...n.errors]),t.success=!0,t}catch(e){return console.error("Erreur lors de la migration des données:",e),t.errors.push("Migration échouée: "+(e instanceof Error?e.message:String(e))),t}},xN=async()=>{const t={count:0,errors:[]};try{const e=localStorage.getItem("questions");if(!e)return t;const n=JSON.parse(e),r=Fm(ke);for(const s of n)try{const{id:i,...a}=s,c=et(ke,"questions",i);r.set(c,a),t.count++}catch(i){console.error(`Erreur lors de la migration de la question ${s.id}:`,i),t.errors.push(`Question ${s.id}: ${i instanceof Error?i.message:String(i)}`)}return await r.commit(),t}catch(e){return console.error("Erreur lors de la migration des questions:",e),t.errors.push("Migration des questions échouée: "+(e instanceof Error?e.message:String(e))),t}},yN=async()=>{const t={count:0,errors:[]};try{const e=localStorage.getItem("blogData");if(!e)return t;const n=JSON.parse(e),r=Fm(ke);for(const s of n.posts)try{const{id:i,...a}=s,c=et(ke,"blog",i);r.set(c,a),t.count++}catch(i){console.error(`Erreur lors de la migration de l'article ${s.id}:`,i),t.errors.push(`Article ${s.id}: ${i instanceof Error?i.message:String(i)}`)}return await r.commit(),t}catch(e){return console.error("Erreur lors de la migration des articles de blog:",e),t.errors.push("Migration des articles échouée: "+(e instanceof Error?e.message:String(e))),t}},wN=()=>{const t=pn(),[e,n]=U.useState(null),[r,s]=U.useState(!1);Bt.useEffect(()=>{Qi()||t("/admin-login")},[t]);const i=async()=>{if(window.confirm("Êtes-vous sûr de vouloir migrer les données de localStorage vers Firebase ? Cette opération peut prendre quelques instants.")){s(!0);try{const c=await gN();n(c)}catch(c){console.error("Erreur lors de la migration:",c),n({success:!1,questionsCount:0,blogPostsCount:0,errors:[c instanceof Error?c.message:"Une erreur inconnue est survenue"]})}finally{s(!1)}}},a=()=>{fl(),t("/admin-login")};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative pt-32 pb-16 text-white",children:[o.jsx("div",{className:"absolute inset-0 z-0 overflow-hidden bg-gradient-to-r from-blue-600 to-indigo-700",children:o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute transform rotate-45 -translate-x-1/4 -translate-y-1/4 -left-1/4 -top-1/4 w-1/2 h-1/2 bg-white/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute transform -rotate-12 translate-x-1/4 translate-y-1/4 right-1/4 bottom-1/4 w-1/2 h-1/2 bg-white/20 rounded-full blur-3xl"})]})}),o.jsxs(ie,{className:"relative z-10",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs(we,{to:"/admin",className:"inline-flex items-center text-blue-200 hover:text-white transition-colors",children:[o.jsx(Yr,{className:"h-4 w-4 mr-1"}),"管理画面に戻る"]}),o.jsxs(Pe,{variant:"outline",size:"sm",onClick:a,className:"bg-white/10 backdrop-blur-sm hover:bg-white/20",children:["ログアウト ",o.jsx(ji,{className:"ml-2 h-4 w-4"})]})]}),o.jsxs(Q.div,{className:"text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.7},children:[o.jsx("h1",{className:"text-4xl md:text-5xl font-serif font-bold text-white mb-4",children:"Firebase データ管理"}),o.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-blue-300 to-indigo-300 rounded-full mx-auto mb-4"}),o.jsx("p",{className:"text-white text-xl max-w-3xl mx-auto",children:"LocalStorageからFirebaseへのデータ移行とFirebaseデータの管理"})]})]})]}),o.jsx(_e,{className:"bg-gray-50",children:o.jsx(ie,{children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs(Q.div,{className:"bg-white rounded-xl shadow-md p-6 mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:o.jsx(Sa,{className:"h-6 w-6 text-blue-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"LocalStorage から Firebase への移行"})]}),o.jsx("p",{className:"text-gray-600 mb-6",children:"現在のLocalStorageに保存されているデータ（FAQ、ブログの記事とコメント）をFirebaseに移行します。 既存のデータは上書きされる可能性がありますのでご注意ください。"}),e?o.jsxs("div",{className:`p-4 rounded-lg ${e.success?"bg-green-50":"bg-red-50"}`,children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.success?o.jsx(si,{className:"h-6 w-6 text-green-600"}):o.jsx(qh,{className:"h-6 w-6 text-red-600"}),o.jsx("h3",{className:`text-lg font-bold ${e.success?"text-green-600":"text-red-600"}`,children:e.success?"移行成功":"移行に問題が発生しました"})]}),o.jsxs("div",{className:"space-y-2 mb-4",children:[o.jsx("p",{children:"移行結果:"}),o.jsxs("ul",{className:"list-disc ml-5",children:[o.jsxs("li",{children:["FAQ/質問: ",e.questionsCount," 件"]}),o.jsxs("li",{children:["ブログ記事: ",e.blogPostsCount," 件"]})]})]}),e.errors.length>0&&o.jsxs("div",{className:"mt-4",children:[o.jsx("p",{className:"font-bold text-red-600",children:"エラー:"}),o.jsx("ul",{className:"list-disc ml-5 text-red-600",children:e.errors.map((c,u)=>o.jsx("li",{children:c},u))})]}),o.jsx("div",{className:"mt-6",children:o.jsx(Pe,{variant:"primary",onClick:()=>n(null),children:"閉じる"})})]}):o.jsx(Pe,{variant:"primary",onClick:i,disabled:r,className:"w-full",children:r?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-t-transparent border-white rounded-full mr-2"}),"移行中..."]}):o.jsx(o.Fragment,{children:"移行を開始"})})]}),o.jsxs(Q.div,{className:"bg-white rounded-xl shadow-md p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[o.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[o.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:o.jsx(ii,{className:"h-6 w-6 text-blue-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Firebase 管理"})]}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Firebaseデータの管理はFirebaseコンソールから直接行うことができます。 より高度なデータ管理や分析が必要な場合は、以下のリンクからFirebaseコンソールにアクセスしてください。"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsxs("a",{href:"https://console.firebase.google.com/project/softis-a8ac1/firestore/data",target:"_blank",rel:"noopener noreferrer",className:"flex-1 flex items-center justify-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[o.jsx(ii,{className:"h-5 w-5 mr-2"}),"Firestore データベース"]}),o.jsx("a",{href:"https://console.firebase.google.com/project/softis-a8ac1/overview",target:"_blank",rel:"noopener noreferrer",className:"flex-1 flex items-center justify-center px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Firebase コンソール"})]})]})]})})})]})};function bN(){return o.jsx(Xf,{children:o.jsx(nn,{mode:"wait",children:o.jsxs(Jf,{children:[o.jsxs(Ge,{path:"/",element:o.jsx(eg,{}),children:[o.jsx(Ge,{index:!0,element:o.jsx(ng,{})}),o.jsx(Ge,{path:"pricing",element:o.jsx(rg,{})}),o.jsx(Ge,{path:"instructors",element:o.jsx(sg,{})}),o.jsx(Ge,{path:"contact",element:o.jsx(ig,{})}),o.jsx(Ge,{path:"faq",element:o.jsx(gw,{})}),o.jsx(Ge,{path:"gallery",element:o.jsx(yw,{})}),o.jsx(Ge,{path:"questions",element:o.jsx(bw,{})}),o.jsx(Ge,{path:"blog",element:o.jsx(Tw,{})}),o.jsx(Ge,{path:"blog/:id",element:o.jsx(dN,{})}),o.jsx(Ge,{path:"blog/new",element:o.jsx(mN,{})}),o.jsx(Ge,{path:"blog/:id/edit",element:o.jsx(fN,{})})]}),o.jsx(Ge,{path:"/admin-login",element:o.jsx(Nw,{})}),o.jsx(Ge,{path:"/admin",element:o.jsx(Ew,{})}),o.jsx(Ge,{path:"/admin/blog",element:o.jsx(pN,{})}),o.jsx(Ge,{path:"/admin/firebase",element:o.jsx(wN,{})})]})})})}Ph(document.getElementById("root")).render(o.jsx(U.StrictMode,{children:o.jsx(Fh,{children:o.jsx(bN,{})})}));
